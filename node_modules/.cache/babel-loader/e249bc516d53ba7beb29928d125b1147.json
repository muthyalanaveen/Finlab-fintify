{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/exchangesController.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/exchangesController.js","mtime":1649977023163},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbmF2ZWVubXV0aHlhbGEvRG9jdW1lbnRzL1Byb2plY3RzL3JldHVybnNfcG9ydGFsX3VpL3JldHVybnNfcG9ydGFsX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvcmV0dXJuc19wb3J0YWxfdWkvcmV0dXJuc19wb3J0YWxfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICdAL2NvbnN0YW50cyc7CmltcG9ydCB7IFVQREFURV9FWENIQU5HRV9MSVNUIH0gZnJvbSAnQC9zdG9yZS9jb25zdGFudHMnOwp2YXIgUkVUVVJOX1JFQVNPTl9BQ1RJT04gPSBDT05TVEFOVFMuUkVUVVJOX1JFQVNPTl9BQ1RJT047CmV4cG9ydCB2YXIgaXNFeGNoYW5nZXNFbmFibGVkID0gZnVuY3Rpb24gaXNFeGNoYW5nZXNFbmFibGVkKCkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGV4Y2hhbmdlc0FsbG93ZWQgPSBfZ2V0RmllbGRzRnJvbVN0b3JlLmV4Y2hhbmdlc0FsbG93ZWQsCiAgICAgIGlzR2lmdFJldHVybiA9IF9nZXRGaWVsZHNGcm9tU3RvcmUuaXNHaWZ0UmV0dXJuLAogICAgICBzZWxlY3RlZEl0ZW1zID0gX2dldEZpZWxkc0Zyb21TdG9yZS5zZWxlY3RlZEl0ZW1zOwoKICByZXR1cm4gZXhjaGFuZ2VzQWxsb3dlZCAmJiAhaXNHaWZ0UmV0dXJuICYmIHNlbGVjdGVkSXRlbXMubGVuZ3RoID09PSAxOwp9OyAvLyBhbiBpdGVtIGNhbiBiZSBleGNoYW5nZWQgZm9yIHNpemUgaWYgYW5kIG9ubHkgaWYgdGhlIGZvbGxvd2luZyBpcyB0cnVlOgovLyAxLiB0aGUgY2xpZW50IGhhcyBleGNoYW5nZXMgYWxsb3dlZCA9PSB0cnVlCi8vIDIuIGF0IGxlYXN0IG9uZSBvZiB0aGUgdmFyaWFudHMgaGFzIHF1YW50aXR5X2luX3N0b2NrID4gMAovLyAzLiB0aGF0IHZhcmlhbnQgaXMgb2YgdGhlIHNhbWUgY29sb3IgYXMgdGhlIGl0ZW0KLy8gNC4gbm90IGEgZ2lmdCByZXR1cm4KLy8gNS4gaXMgYSB0cnVzdHdvcnRoeXVzZXIKLy8gNi4gdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGl0ZW0gdGhhdCBpcyBub3QgZGlzYWJsZWQKCmV4cG9ydCB2YXIgY2FuRXhjaGFuZ2VTaXplID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VTaXplKCkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlMiA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpdGVtID0gX2dldEZpZWxkc0Zyb21TdG9yZTIuaXRlbSwKICAgICAgaXNUcnVzdFdvcnRoeVVzZXIgPSBfZ2V0RmllbGRzRnJvbVN0b3JlMi5pc1RydXN0V29ydGh5VXNlciwKICAgICAgcmVhc29uID0gX2dldEZpZWxkc0Zyb21TdG9yZTIucmVhc29uOwoKICB2YXIgdmFyaWFudHMgPSBnZXRTaXplT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChpdGVtKTsKICB2YXIgaGFzU2l6ZU9wdGlvbnMgPSB2YXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgIHJldHVybiAhdi5kaXNhYmxlZDsKICB9KS5sZW5ndGggPiAwOwogIHJldHVybiBpc0V4Y2hhbmdlc0VuYWJsZWQgJiYgcmVhc29uLnJlY29tbWVuZGF0aW9uX3R5cGUgPT09IFJFVFVSTl9SRUFTT05fQUNUSU9OLlNJWkUgJiYgaGFzU2l6ZU9wdGlvbnMgJiYgaXNUcnVzdFdvcnRoeVVzZXI7Cn07CmV4cG9ydCB2YXIgY2FuRXhjaGFuZ2VDb2xvciA9IGZ1bmN0aW9uIGNhbkV4Y2hhbmdlQ29sb3IoKSB7CiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmUzID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMy5pdGVtLAogICAgICBpc1RydXN0V29ydGh5VXNlciA9IF9nZXRGaWVsZHNGcm9tU3RvcmUzLmlzVHJ1c3RXb3J0aHlVc2VyLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMy5yZWFzb247CgogIHZhciB2YXJpYW50cyA9IGdldENvbG9yT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChpdGVtKTsKICB2YXIgaGFzQ29sb3JPcHRpb25zID0gdmFyaWFudHMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICByZXR1cm4gIXYuZGlzYWJsZWQ7CiAgfSkubGVuZ3RoID4gMDsKICByZXR1cm4gaXNFeGNoYW5nZXNFbmFibGVkICYmIHJlYXNvbi5yZWNvbW1lbmRhdGlvbl90eXBlID09PSBSRVRVUk5fUkVBU09OX0FDVElPTi5DT0xPUiAmJiBoYXNDb2xvck9wdGlvbnMgJiYgaXNUcnVzdFdvcnRoeVVzZXI7Cn07CmV4cG9ydCB2YXIgY2FuRXhjaGFuZ2VEYW1hZ2VkID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VEYW1hZ2VkKCkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlNCA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpc1RydXN0V29ydGh5VXNlciA9IF9nZXRGaWVsZHNGcm9tU3RvcmU0LmlzVHJ1c3RXb3J0aHlVc2VyLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlNC5yZWFzb247IC8vIFRPRE86IERvIHdlIGhhdmUgdG8gY2hlY2sgaWYgdGhlIGl0ZW0gaXMgaW4gc3RvY2s/PwoKCiAgcmV0dXJuIGlzRXhjaGFuZ2VzRW5hYmxlZCAmJiByZWFzb24ucmVjb21tZW5kYXRpb25fdHlwZSA9PT0gUkVUVVJOX1JFQVNPTl9BQ1RJT04uREFNQUdFRCAmJiBpc1RydXN0V29ydGh5VXNlcjsKfTsKZXhwb3J0IHZhciBjYW5FeGNoYW5nZU90aGVyID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VPdGhlcigpIHsKICB2YXIgX2dldEZpZWxkc0Zyb21TdG9yZTUgPSBnZXRGaWVsZHNGcm9tU3RvcmUoKSwKICAgICAgaXNUcnVzdFdvcnRoeVVzZXIgPSBfZ2V0RmllbGRzRnJvbVN0b3JlNS5pc1RydXN0V29ydGh5VXNlciwKICAgICAgcmVhc29uID0gX2dldEZpZWxkc0Zyb21TdG9yZTUucmVhc29uOwoKICByZXR1cm4gaXNFeGNoYW5nZXNFbmFibGVkICYmIHJlYXNvbi5yZWNvbW1lbmRhdGlvbl90eXBlID09PSBSRVRVUk5fUkVBU09OX0FDVElPTi5PVEhFUiAmJiBpc1RydXN0V29ydGh5VXNlcjsKfTsKLyoKICogR0VUVEVSUwogKi8KLy8gUmV0dXJuIHRoZSBvcHRpb25zIGZvciBlYWNoIHZhcmlhbnQKCmV4cG9ydCB2YXIgZ2V0U2l6ZU9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQgPSBmdW5jdGlvbiBnZXRTaXplT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChpdGVtKSB7CiAgdmFyIHNlbGVjdGVkU2l6ZSA9IGl0ZW0uc2l6ZTsKICB2YXIgc2l6ZXMgPSBpdGVtLmV4Y2hhbmdlVmFyaWFudHMubWFwKGZ1bmN0aW9uICh2YXJpYW50KSB7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YXJpYW50KSwge30sIHsKICAgICAgZGlzYWJsZWQ6ICEodmFyaWFudC5xdWFudGl0eV9pbl9zdG9jayA+IDAgJiYgdmFyaWFudC5jb2xvciA9PT0gaXRlbS5jb2xvciksCiAgICAgIHN1YnRpdGxlOiBzZWxlY3RlZFNpemUgPT09IHZhcmlhbnQuc2l6ZSAmJiB2YXJpYW50LmNvbG9yID09PSBpdGVtLmNvbG9yID8gJ09yaWdpbmFsIFB1cmNoYXNlJyA6ICcnCiAgICB9KTsKICB9KTsKICByZXR1cm4gc29ydFNpemVzKHNpemVzKTsKfTsKZXhwb3J0IHZhciBnZXRQcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24gPSBmdW5jdGlvbiBnZXRQcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24oaXRlbSwgZXhjaGFuZ2VMaXN0KSB7CiAgcmV0dXJuIGV4Y2hhbmdlTGlzdCA9PT0gbnVsbCB8fCBleGNoYW5nZUxpc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4Y2hhbmdlTGlzdC5maW5kKGZ1bmN0aW9uIChleGNoYW5nZWRJdGVtKSB7CiAgICByZXR1cm4gKGV4Y2hhbmdlZEl0ZW0gPT09IG51bGwgfHwgZXhjaGFuZ2VkSXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjaGFuZ2VkSXRlbS5pZGVudGlmaWVyKSA9PT0gKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5pZGVudGlmaWVyKTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRDb2xvck9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQgPSBmdW5jdGlvbiBnZXRDb2xvck9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQoaXRlbSkgewogIHZhciBzZWxlY3RlZFNpemUgPSBpdGVtLnNpemU7CiAgdmFyIGNvbG9ycyA9IGl0ZW0uZXhjaGFuZ2VWYXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHZhcmlhbnQpIHsKICAgIHJldHVybiB2YXJpYW50LnNpemUgPT09IHNlbGVjdGVkU2l6ZTsKICB9KS5tYXAoZnVuY3Rpb24gKHZhcmlhbnQpIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHZhcmlhbnQpLCB7fSwgewogICAgICBkaXNhYmxlZDogISh2YXJpYW50LnF1YW50aXR5X2luX3N0b2NrID4gMCAmJiB2YXJpYW50LnNpemUgPT09IGl0ZW0uc2l6ZSksCiAgICAgIG5hbWU6IHZhcmlhbnQudGl0bGUsCiAgICAgIGlkZW50aWZpZXI6IHZhcmlhbnQuc2t1CiAgICB9KTsKICB9KTsKICByZXR1cm4gW19vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICBkaXNhYmxlZDogdHJ1ZSwKICAgIG5hbWU6IGl0ZW0udGl0bGUsCiAgICBzdWJ0aXRsZTogJ09yaWdpbmFsIFB1cmNoYXNlJwogIH0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNvbG9ycykpOwp9OwpleHBvcnQgdmFyIHNhdmVTZWxlY3RlZEl0ZW1Ub1N0b3JlID0gZnVuY3Rpb24gc2F2ZVNlbGVjdGVkSXRlbVRvU3RvcmUoc2VsZWN0ZWRJdGVtKSB7CiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmU2ID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlNi5pdGVtLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlNi5yZWFzb247CgogIHN0b3JlLmNvbW1pdCgnb3JkZXIvJyArIFVQREFURV9FWENIQU5HRV9MSVNULCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdGVkSXRlbSksIHt9LCB7CiAgICBpZGVudGlmaWVyOiBpdGVtLmlkZW50aWZpZXIsCiAgICBvcmlnaW5hbEl0ZW06IGl0ZW0sCiAgICByZWFzb246IHJlYXNvbgogIH0pKTsKfTsKCnZhciBnZXRGaWVsZHNGcm9tU3RvcmUgPSBmdW5jdGlvbiBnZXRGaWVsZHNGcm9tU3RvcmUoKSB7CiAgdmFyIGV4Y2hhbmdlc0FsbG93ZWQgPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL3BvbGljaWVzJ10uZXhjaGFuZ2VzX2FsbG93ZWQ7CiAgdmFyIGN1cnJlbnRJdGVtSW5kZXggPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL2N1cnJlbnRJdGVtSW5kZXgnXTsKICB2YXIgc2VsZWN0ZWRJdGVtcyA9IHN0b3JlLmdldHRlcnNbJ29yZGVyL3NlbGVjdGVkSXRlbXMnXTsKICB2YXIgaXRlbSA9IHNlbGVjdGVkSXRlbXNbY3VycmVudEl0ZW1JbmRleF07CiAgdmFyIGlzVHJ1c3RXb3J0aHlVc2VyID0gc3RvcmUuZ2V0dGVyc1sndWkvaXNUcnVzdFdvcnRoeVVzZXInXTsKICB2YXIgaXNHaWZ0UmV0dXJuID0gc3RvcmUuZ2V0dGVyc1sndWkvaXNHaWZ0UmV0dXJuJ107CiAgdmFyIHJlYXNvbiA9IHN0b3JlLmdldHRlcnNbJ3JldHVybnMvcmVhc29uJ107CiAgcmV0dXJuIHsKICAgIGV4Y2hhbmdlc0FsbG93ZWQ6IGV4Y2hhbmdlc0FsbG93ZWQsCiAgICBpdGVtOiBpdGVtLAogICAgaXNUcnVzdFdvcnRoeVVzZXI6IGlzVHJ1c3RXb3J0aHlVc2VyLAogICAgaXNHaWZ0UmV0dXJuOiBpc0dpZnRSZXR1cm4sCiAgICByZWFzb246IHJlYXNvbiwKICAgIHNlbGVjdGVkSXRlbXM6IHNlbGVjdGVkSXRlbXMKICB9Owp9OwoKdmFyIHNvcnRTaXplcyA9IGZ1bmN0aW9uIHNvcnRTaXplcyhzaXplcykgewogIC8vIE9yZGVyIHNpemVzIGJlZm9yZSByZXR1cm5pbmcgdGhlbQogIHZhciBzaXplT3JkZXIgPSBbJ1hYWEwnLCAnWFhMJywgJ1hMJywgJ0wnLCAnTScsICdTJywgJ1hTJywgJ1hYUycsICdYWFhTJ107CgogIGlmIChzaXplT3JkZXIuaW5jbHVkZXMoc2l6ZXNbMF0uc2l6ZSkpIHsKICAgIHJldHVybiBzaXplcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBzaXplT3JkZXIuaW5kZXhPZihiLnNpemUpIC0gc2l6ZU9yZGVyLmluZGV4T2YoYS5zaXplKTsKICAgIH0pOwogIH0gZWxzZSBpZiAoTnVtYmVyKHNpemVzWzBdLnNpemUpKSB7CiAgICByZXR1cm4gc2l6ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICByZXR1cm4gTnVtYmVyKGIuc2l6ZSkgLSBOdW1iZXIoYS5zaXplKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gc2l6ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICByZXR1cm4gYi5zaXplIDwgYS5zaXplOwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/exchangesController.js"],"names":["store","CONSTANTS","UPDATE_EXCHANGE_LIST","RETURN_REASON_ACTION","isExchangesEnabled","getFieldsFromStore","exchangesAllowed","isGiftReturn","selectedItems","length","canExchangeSize","item","isTrustWorthyUser","reason","variants","getSizeOptionsForSelectedVariant","hasSizeOptions","filter","v","disabled","recommendation_type","SIZE","canExchangeColor","getColorOptionsForSelectedVariant","hasColorOptions","COLOR","canExchangeDamaged","DAMAGED","canExchangeOther","OTHER","selectedSize","size","sizes","exchangeVariants","map","variant","quantity_in_stock","color","subtitle","sortSizes","getPreviouslySelectedOption","exchangeList","find","exchangedItem","identifier","colors","name","title","sku","saveSelectedItemToStore","selectedItem","commit","originalItem","getters","exchanges_allowed","currentItemIndex","sizeOrder","includes","sort","a","b","indexOf","Number"],"mappings":"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","sourcesContent":["import store from '@/store'\nimport { CONSTANTS } from '@/constants'\nimport { UPDATE_EXCHANGE_LIST } from '@/store/constants'\n\nconst RETURN_REASON_ACTION = CONSTANTS.RETURN_REASON_ACTION\n\nexport const isExchangesEnabled = () => {\n  const {\n    exchangesAllowed,\n    isGiftReturn,\n    selectedItems\n  } = getFieldsFromStore()\n\n  return exchangesAllowed && !isGiftReturn && selectedItems.length === 1\n}\n\n// an item can be exchanged for size if and only if the following is true:\n// 1. the client has exchanges allowed == true\n// 2. at least one of the variants has quantity_in_stock > 0\n// 3. that variant is of the same color as the item\n// 4. not a gift return\n// 5. is a trustworthyuser\n// 6. there is at least one item that is not disabled\n\nexport const canExchangeSize = () => {\n  const { item, isTrustWorthyUser, reason } = getFieldsFromStore()\n\n  const variants = getSizeOptionsForSelectedVariant(item)\n  const hasSizeOptions = variants.filter((v) => !v.disabled).length > 0\n\n  return (\n    isExchangesEnabled &&\n    reason.recommendation_type === RETURN_REASON_ACTION.SIZE &&\n    hasSizeOptions &&\n    isTrustWorthyUser\n  )\n}\n\nexport const canExchangeColor = () => {\n  const { item, isTrustWorthyUser, reason } = getFieldsFromStore()\n\n  const variants = getColorOptionsForSelectedVariant(item)\n  const hasColorOptions = variants.filter((v) => !v.disabled).length > 0\n\n  return (\n    isExchangesEnabled &&\n    reason.recommendation_type === RETURN_REASON_ACTION.COLOR &&\n    hasColorOptions &&\n    isTrustWorthyUser\n  )\n}\nexport const canExchangeDamaged = () => {\n  const {\n    // item,\n    isTrustWorthyUser,\n    reason\n  } = getFieldsFromStore()\n\n  // TODO: Do we have to check if the item is in stock??\n  return (\n    isExchangesEnabled &&\n    reason.recommendation_type === RETURN_REASON_ACTION.DAMAGED &&\n    isTrustWorthyUser\n  )\n}\nexport const canExchangeOther = () => {\n  const {\n    // item,\n    isTrustWorthyUser,\n    reason\n  } = getFieldsFromStore()\n\n  return (\n    isExchangesEnabled &&\n    reason.recommendation_type === RETURN_REASON_ACTION.OTHER &&\n    isTrustWorthyUser\n  )\n}\n\n/*\n * GETTERS\n */\n\n// Return the options for each variant\nexport const getSizeOptionsForSelectedVariant = (item) => {\n  const selectedSize = item.size\n  const sizes = item.exchangeVariants.map((variant) => {\n    return {\n      ...variant,\n      disabled: !(\n        variant.quantity_in_stock > 0 && variant.color === item.color\n      ),\n      subtitle: selectedSize === variant.size && variant.color === item.color ? 'Original Purchase' : ''\n    }\n  })\n\n  return sortSizes(sizes)\n}\n\nexport const getPreviouslySelectedOption = (item, exchangeList) => {\n  return exchangeList?.find(\n    (exchangedItem) => exchangedItem?.identifier === item?.identifier\n  )\n}\n\nexport const getColorOptionsForSelectedVariant = (item) => {\n  const selectedSize = item.size\n  const colors = item.exchangeVariants\n    .filter((variant) => variant.size === selectedSize)\n    .map((variant) => {\n      return {\n        ...variant,\n        disabled: !(\n          variant.quantity_in_stock > 0 && variant.size === item.size\n        ),\n        name: variant.title,\n        identifier: variant.sku\n      }\n    })\n  return [\n    {\n      ...item,\n      disabled: true,\n      name: item.title,\n      subtitle: 'Original Purchase'\n    },\n    ...colors\n  ]\n}\n\nexport const saveSelectedItemToStore = (selectedItem) => {\n  const { item, reason } = getFieldsFromStore()\n  store.commit('order/' + UPDATE_EXCHANGE_LIST, {\n    ...selectedItem,\n    identifier: item.identifier,\n    originalItem: item,\n    reason: reason\n  })\n}\n\nconst getFieldsFromStore = () => {\n  const { exchanges_allowed: exchangesAllowed } = store.getters[\n    'returns/policies'\n  ]\n  const currentItemIndex = store.getters['returns/currentItemIndex']\n  const selectedItems = store.getters['order/selectedItems']\n  const item = selectedItems[currentItemIndex]\n  const isTrustWorthyUser = store.getters['ui/isTrustWorthyUser']\n  const isGiftReturn = store.getters['ui/isGiftReturn']\n  const reason = store.getters['returns/reason']\n\n  return {\n    exchangesAllowed,\n    item,\n    isTrustWorthyUser,\n    isGiftReturn,\n    reason,\n    selectedItems\n  }\n}\n\nconst sortSizes = (sizes) => {\n  // Order sizes before returning them\n  const sizeOrder = ['XXXL', 'XXL', 'XL', 'L', 'M', 'S', 'XS', 'XXS', 'XXXS']\n\n  if (sizeOrder.includes(sizes[0].size)) {\n    return sizes.sort((a, b) => {\n      return sizeOrder.indexOf(b.size) - sizeOrder.indexOf(a.size)\n    })\n  } else if (Number(sizes[0].size)) {\n    return sizes.sort((a, b) => Number(b.size) - Number(a.size))\n  } else {\n    return sizes.sort((a, b) => b.size < a.size)\n  }\n}\n"]}]}