{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/Asset/fintify/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/Asset/fintify/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/Asset/fintify/src/store/modules/returns/actions.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/Asset/fintify/src/store/modules/returns/actions.js","mtime":1665582724815},{"path":"/Users/naveenmuthyala/Documents/Projects/Asset/fintify/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/Asset/fintify/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/Asset/fintify/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL25hdmVlbm11dGh5YWxhL0RvY3VtZW50cy9Qcm9qZWN0cy9Bc3NldC9maW50aWZ5L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvQXNzZXQvZmludGlmeS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfYXN5bmNJdGVyYXRvciBmcm9tICIvVXNlcnMvbmF2ZWVubXV0aHlhbGEvRG9jdW1lbnRzL1Byb2plY3RzL0Fzc2V0L2ZpbnRpZnkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jSXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0IGdvb2dsZU1hcHNTZXJ2aWNlIGZyb20gJ0AvY29tbW9uL2dvb2dsZU1hcHMuc2VydmljZSc7CmltcG9ydCB7IHRvUmVndWxhclRpbWUsIGlzU3RvcmVXaXRoaW5EaXN0YW5jZSwgZ2V0TG9va3VwS2V5cywgZGF5T2ZXZWVrQXNTdHJpbmcgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyB2YWxpZFN0b3JlTmFtZSB9IGZyb20gJ0AvY29udHJvbGxlcnMvUmV0dXJuTWV0aG9kc0NvbnRyb2xsZXIuanMnOwppbXBvcnQgeyBjaGVja01hcHNQb2xpY3kgfSBmcm9tICdAL2NvbnRyb2xsZXJzL01hcENvbnRyb2xsZXIuanMnOwppbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICdAL2NvbnN0YW50cy9pbmRleC5qcyc7IC8vIGluIEhITU0gZm9ybWF0Cgp2YXIgZm9ybWF0dGVkVGltZSA9IGZ1bmN0aW9uIGZvcm1hdHRlZFRpbWUoaG91cnMsIG1pbnV0ZXMpIHsKICByZXR1cm4gcGFyc2VJbnQoIiIuY29uY2F0KGhvdXJzKS5jb25jYXQobWludXRlcyA8IDEwID8gJzAnICsgbWludXRlcyA6IG1pbnV0ZXMpKTsKfTsKCnZhciBzbGVlcCA9IGZ1bmN0aW9uIHNsZWVwKG1pbGxpc2Vjb25kcykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZSwgbWlsbGlzZWNvbmRzKTsKICB9KTsKfTsKCnZhciBHT09HTEVfTUFQX0FQSV9DQUNIRSA9IHt9Owp2YXIgR09PR0xFX01BUF9BUElfUElEX0NBQ0hFID0ge307Cgp2YXIgZ2V0V2Vla2x5UmFuZ2UgPSBmdW5jdGlvbiBnZXRXZWVrbHlSYW5nZShwbGFjZSkgewogIHZhciBfcGxhY2Ukb3BlbmluZ19ob3VycywgX3BsYWNlJG9wZW5pbmdfaG91cnMkLCBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmcsIF93ZWVrbHlSYW5nZSRkYXRlUmFuZzIsIF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMsIF93ZWVrbHlSYW5nZSR0aW1lUmFuZywgX3dlZWtseVJhbmdlJHRpbWVSYW5nMiwgX3dlZWtseVJhbmdlJHRpbWVSYW5nMywgX3dlZWtseVJhbmdlJHRpbWVSYW5nNDsKCiAgdmFyIGZvcm1hdHRlZFdlZWtseVJhbmdlID0gewogICAgZGF0ZVJhbmdlOiAnJywKICAgIHRpbWVSYW5nZTogJycKICB9OwogIHZhciB3ZWVrbHlSYW5nZSA9IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzJCA9IF9wbGFjZSRvcGVuaW5nX2hvdXJzLnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMkLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBkYXkpIHsKICAgIHZhciBfZGF5JG9wZW4sIF9hY2MkZGF0ZVJhbmdlLCBfZGF5JG9wZW4zLCBfYWNjJGRhdGVSYW5nZTIsIF9kYXkkb3BlbjUsIF9hY2MkdGltZVJhbmdlLCBfZGF5JGNsb3NlLCBfYWNjJHRpbWVSYW5nZTMsIF9hY2MkdGltZVJhbmdlNDsKCiAgICAvLyBpZiBlYXJsaWVzdCBmb3VuZCBvcGVuIGRheSwgc2V0IGFzIHN0YXJ0CiAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW4gPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW4uZGF5KSA8PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkZGF0ZVJhbmdlID0gYWNjLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyRkYXRlUmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkZGF0ZVJhbmdlLnN0YXJ0KSkgewogICAgICB2YXIgX2RheSRvcGVuMjsKCiAgICAgIGFjYy5kYXRlUmFuZ2Uuc3RhcnQgPSBkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuMiA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW4yLmRheTsKICAgIH0gLy8gaWYgbGF0ZXN0IGZvdW5kIG9wZW4gZGF5LCBzZXQgYXMgZW5kCgoKICAgIGlmICgoZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjMgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuMy5kYXkpID49IChhY2MgPT09IG51bGwgfHwgYWNjID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FjYyRkYXRlUmFuZ2UyID0gYWNjLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyRkYXRlUmFuZ2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjJGRhdGVSYW5nZTIuZW5kKSkgewogICAgICB2YXIgX2RheSRvcGVuNDsKCiAgICAgIGFjYy5kYXRlUmFuZ2UuZW5kID0gZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjQgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuNC5kYXk7CiAgICB9IC8vIGNoZWNrIGlmIGN1cnJlbnQgZGF5IG9wZW4gaXMgbGF0ZXIgdGhhbiBzdG9yZWQKCgogICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuNSA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW41ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW41LmhvdXJzKSA+PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkdGltZVJhbmdlID0gYWNjLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyR0aW1lUmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkdGltZVJhbmdlLnN0YXJ0SG91cikpIHsKICAgICAgdmFyIF9kYXkkb3BlbjYsIF9hY2MkdGltZVJhbmdlMiwgX2RheSRvcGVuODsKCiAgICAgIGlmICgoZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjYgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuNi5taW51dGVzKSA+PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkdGltZVJhbmdlMiA9IGFjYy50aW1lUmFuZ2UpID09PSBudWxsIHx8IF9hY2MkdGltZVJhbmdlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyR0aW1lUmFuZ2UyLnN0YXJ0TWludXRlKSkgewogICAgICAgIHZhciBfZGF5JG9wZW43OwoKICAgICAgICBhY2MudGltZVJhbmdlLnN0YXJ0TWludXRlID0gZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjcgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuNy5taW51dGVzOwogICAgICB9CgogICAgICBhY2MudGltZVJhbmdlLnN0YXJ0SG91ciA9IGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW44ID0gZGF5Lm9wZW4pID09PSBudWxsIHx8IF9kYXkkb3BlbjggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkb3BlbjguaG91cnM7CiAgICB9IC8vIGNoZWNrIGlmIGN1cnJlbnQgZGF5IGNsb3NlIGlzIGVhcmxpZXIgdGhhbiBzdG9yZWQKCgogICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRjbG9zZSA9IGRheS5jbG9zZSkgPT09IG51bGwgfHwgX2RheSRjbG9zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRjbG9zZS5ob3VycykgPD0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJHRpbWVSYW5nZTMgPSBhY2MudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJHRpbWVSYW5nZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkdGltZVJhbmdlMy5lbmRIb3VyKSB8fCAhKGFjYyAhPT0gbnVsbCAmJiBhY2MgIT09IHZvaWQgMCAmJiAoX2FjYyR0aW1lUmFuZ2U0ID0gYWNjLnRpbWVSYW5nZSkgIT09IG51bGwgJiYgX2FjYyR0aW1lUmFuZ2U0ICE9PSB2b2lkIDAgJiYgX2FjYyR0aW1lUmFuZ2U0LmVuZEhvdXIpKSB7CiAgICAgIHZhciBfZGF5JGNsb3NlMiwgX2FjYyR0aW1lUmFuZ2U1LCBfYWNjJHRpbWVSYW5nZTYsIF9kYXkkY2xvc2UzOwoKICAgICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRjbG9zZTIgPSBkYXkuY2xvc2UpID09PSBudWxsIHx8IF9kYXkkY2xvc2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JGNsb3NlMi5taW51dGVzKSA8PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkdGltZVJhbmdlNSA9IGFjYy50aW1lUmFuZ2UpID09PSBudWxsIHx8IF9hY2MkdGltZVJhbmdlNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyR0aW1lUmFuZ2U1LmVuZE1pbnV0ZSkgfHwgIShhY2MgIT09IG51bGwgJiYgYWNjICE9PSB2b2lkIDAgJiYgKF9hY2MkdGltZVJhbmdlNiA9IGFjYy50aW1lUmFuZ2UpICE9PSBudWxsICYmIF9hY2MkdGltZVJhbmdlNiAhPT0gdm9pZCAwICYmIF9hY2MkdGltZVJhbmdlNi5lbmRNaW51dGUpKSB7CiAgICAgICAgdmFyIF9kYXkkb3Blbjk7CgogICAgICAgIGFjYy50aW1lUmFuZ2UuZW5kTWludXRlID0gZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjkgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuOS5taW51dGVzOwogICAgICB9CgogICAgICBhY2MudGltZVJhbmdlLmVuZEhvdXIgPSBkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRjbG9zZTMgPSBkYXkuY2xvc2UpID09PSBudWxsIHx8IF9kYXkkY2xvc2UzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JGNsb3NlMy5ob3VyczsKICAgIH0KCiAgICByZXR1cm4gYWNjOwogIH0sIHsKICAgIGRhdGVSYW5nZTogewogICAgICBzdGFydDogJycsCiAgICAgIGVuZDogJycKICAgIH0sCiAgICB0aW1lUmFuZ2U6IHsKICAgICAgc3RhcnRIb3VyOiAnJywKICAgICAgc3RhcnRNaW51dGU6ICcnLAogICAgICBlbmRIb3VyOiAnJywKICAgICAgZW5kTWludXRlOiAnJwogICAgfQogIH0pOyAvLyByZWZvcm1hdCBmb3IgaHVtYW4tcmVhZGFibGUKCiAgZm9ybWF0dGVkV2Vla2x5UmFuZ2UuZGF0ZVJhbmdlID0gIiIuY29uY2F0KGRheU9mV2Vla0FzU3RyaW5nKFsod2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkZGF0ZVJhbmcgPSB3ZWVrbHlSYW5nZS5kYXRlUmFuZ2UpID09PSBudWxsIHx8IF93ZWVrbHlSYW5nZSRkYXRlUmFuZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJGRhdGVSYW5nLnN0YXJ0KSA9PT0gMCA/IDEgOiB3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSRkYXRlUmFuZzIgPSB3ZWVrbHlSYW5nZS5kYXRlUmFuZ2UpID09PSBudWxsIHx8IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzIuc3RhcnRdKS5zbGljZSgwLCAzKSwgIiAtICIpLmNvbmNhdChkYXlPZldlZWtBc1N0cmluZyhbd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkZGF0ZVJhbmczID0gd2Vla2x5UmFuZ2UuZGF0ZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmczLmVuZF0pLnNsaWNlKDAsIDMpKTsKICBmb3JtYXR0ZWRXZWVrbHlSYW5nZS50aW1lUmFuZ2UgPSAiIi5jb25jYXQodG9SZWd1bGFyVGltZSh7CiAgICBkYXlJbmRleDogJycsCiAgICBob3Vyczogd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmcgPSB3ZWVrbHlSYW5nZS50aW1lUmFuZ2UpID09PSBudWxsIHx8IF93ZWVrbHlSYW5nZSR0aW1lUmFuZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJHRpbWVSYW5nLnN0YXJ0SG91ciwKICAgIG1pbnV0ZXM6IHdlZWtseVJhbmdlID09PSBudWxsIHx8IHdlZWtseVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dlZWtseVJhbmdlJHRpbWVSYW5nMiA9IHdlZWtseVJhbmdlLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJHRpbWVSYW5nMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJHRpbWVSYW5nMi5zdGFydE1pbnV0ZQogIH0pLCAiXG4gIC0gIikuY29uY2F0KHRvUmVndWxhclRpbWUoewogICAgaG91cnM6IHdlZWtseVJhbmdlID09PSBudWxsIHx8IHdlZWtseVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dlZWtseVJhbmdlJHRpbWVSYW5nMyA9IHdlZWtseVJhbmdlLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJHRpbWVSYW5nMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJHRpbWVSYW5nMy5lbmRIb3VyLAogICAgbWludXRlczogKHdlZWtseVJhbmdlID09PSBudWxsIHx8IHdlZWtseVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dlZWtseVJhbmdlJHRpbWVSYW5nNCA9IHdlZWtseVJhbmdlLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJHRpbWVSYW5nNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJHRpbWVSYW5nNC5lbmRNaW51dGUpIHx8IDAKICB9KSk7CiAgcmV0dXJuIGZvcm1hdHRlZFdlZWtseVJhbmdlOwp9OwoKdmFyIGdldEZvcm1hdHRlZFN0b3JlVGltZSA9IGZ1bmN0aW9uIGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkgewogIHZhciBfcGxhY2Ukb3BlbmluZ19ob3VyczIsIF9wbGFjZSRvcGVuaW5nX2hvdXJzMzsKCiAgdmFyIGNsb3NpbmdIb3VycyA9IG51bGw7CiAgdmFyIG9wZW5pbmdIb3VycyA9IG51bGw7CiAgdmFyIG9wZW5pbmdNaW51dGVzID0gbnVsbDsKICB2YXIgY2xvc2luZ01pbnV0ZXMgPSBudWxsOwogIHZhciBkYXlJbmRleCA9ICcnOwogIHZhciBjdXJyZW50RGF5ID0gbmV3IERhdGUoKS5nZXREYXkoKTsKICB2YXIgY3VycmVudFRpbWUgPSBmb3JtYXR0ZWRUaW1lKG5ldyBEYXRlKCkuZ2V0SG91cnMoKSwgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkpOwogIHZhciB0b2RheXNQZXJpb2RBcnIgPSAoX3BsYWNlJG9wZW5pbmdfaG91cnMyID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMzID0gX3BsYWNlJG9wZW5pbmdfaG91cnMyLnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMzLmZpbHRlcihmdW5jdGlvbiAocmVxZERheSkgewogICAgdmFyIF9yZXFkRGF5JGNsb3NlOwoKICAgIHJldHVybiAocmVxZERheSA9PT0gbnVsbCB8fCByZXFkRGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3JlcWREYXkkY2xvc2UgPSByZXFkRGF5LmNsb3NlKSA9PT0gbnVsbCB8fCBfcmVxZERheSRjbG9zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcWREYXkkY2xvc2UuZGF5KSA9PT0gY3VycmVudERheTsKICB9KTsgLy8gdG9kYXlzUGVyaW9kIGFycmF5IGNhbiBiZSBvZiBhbnkgbGVuZ3RoCgogIGlmICh0b2RheXNQZXJpb2RBcnIpIHsKICAgIGlmICghdG9kYXlzUGVyaW9kQXJyLmxlbmd0aCkgewogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChkYXksIGNvdW50KSB7CiAgICAgICAgdmFyIF9wbGFjZSRvcGVuaW5nX2hvdXJzNCwgX3BsYWNlJG9wZW5pbmdfaG91cnM1OwoKICAgICAgICB2YXIgZGF5UGVyaW9kQXJyID0gKF9wbGFjZSRvcGVuaW5nX2hvdXJzNCA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzNSA9IF9wbGFjZSRvcGVuaW5nX2hvdXJzNC5wZXJpb2RzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZSRvcGVuaW5nX2hvdXJzNS5maWx0ZXIoZnVuY3Rpb24gKHJlcWREYXkpIHsKICAgICAgICAgIHZhciBfcmVxZERheSRjbG9zZTI7CgogICAgICAgICAgcmV0dXJuIChyZXFkRGF5ID09PSBudWxsIHx8IHJlcWREYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVxZERheSRjbG9zZTIgPSByZXFkRGF5LmNsb3NlKSA9PT0gbnVsbCB8fCBfcmVxZERheSRjbG9zZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXFkRGF5JGNsb3NlMi5kYXkpID09PSBkYXk7CiAgICAgICAgfSk7CgogICAgICAgIGlmICghZGF5UGVyaW9kQXJyLmxlbmd0aCkgewogICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF5UGVyaW9kQXJyJCwgX2RheVBlcmlvZEFyciQkb3BlbiwgX2RheVBlcmlvZEFyciQyLCBfZGF5UGVyaW9kQXJyJDIkb3BlbjsKCiAgICAgICAgICBkYXlJbmRleCA9IE1hdGguYWJzKGRheSAtIGN1cnJlbnREYXkpID4gMSA/IGRheSA6ICcnOyAvLyBzaG93IGRheSBvZiB0aGUgd2VlayBvbmx5IHdoZW4gaXRzIG5vdCB0aGUgbmV4dCBkYXkKCiAgICAgICAgICBvcGVuaW5nSG91cnMgPSAoX2RheVBlcmlvZEFyciQgPSBkYXlQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQkb3BlbiA9IF9kYXlQZXJpb2RBcnIkLm9wZW4pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkJG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkJG9wZW4uaG91cnM7CiAgICAgICAgICBvcGVuaW5nTWludXRlcyA9IChfZGF5UGVyaW9kQXJyJDIgPSBkYXlQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXlQZXJpb2RBcnIkMiRvcGVuID0gX2RheVBlcmlvZEFyciQyLm9wZW4pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkMiRvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5UGVyaW9kQXJyJDIkb3Blbi5taW51dGVzOwogICAgICAgICAgcmV0dXJuICJicmVhayI7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgLy8gaG9saWRheQogICAgICBmb3IgKHZhciBkYXkgPSAoY3VycmVudERheSArIDEpICUgNywgY291bnQgPSAwOyBjb3VudCA8IDY7IGRheSA9IChkYXkgKyAxKSAlIDcsIGNvdW50KyspIHsKICAgICAgICB2YXIgX3JldCA9IF9sb29wKGRheSwgY291bnQpOwoKICAgICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgaWYgKF9yZXQgPT09ICJicmVhayIpIGJyZWFrOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHRvZGF5c1BlcmlvZEFyci5sZW5ndGggPT09IDEpIHsKICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkLCBfdG9kYXlzUGVyaW9kQXJyJCRjbG8sIF90b2RheXNQZXJpb2RBcnIkMiwgX3RvZGF5c1BlcmlvZEFyciQyJGNsLCBfdG9kYXlzUGVyaW9kQXJyJDMsIF90b2RheXNQZXJpb2RBcnIkMyRvcCwgX3RvZGF5c1BlcmlvZEFyciQ0LCBfdG9kYXlzUGVyaW9kQXJyJDQkb3A7CgogICAgICAvLyBvbmx5IG9uZSBjbG9zaW5nIGFuZCBvcGVuaW5nIHRpbWUgZm9yIGEgZGF5CiAgICAgIGNsb3NpbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJCA9IHRvZGF5c1BlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJCRjbG8gPSBfdG9kYXlzUGVyaW9kQXJyJC5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQkY2xvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJCRjbG8uaG91cnM7CiAgICAgIGNsb3NpbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkMiA9IHRvZGF5c1BlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciQyJGNsID0gX3RvZGF5c1BlcmlvZEFyciQyLmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDIkY2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkMiRjbC5taW51dGVzOwogICAgICBvcGVuaW5nSG91cnMgPSAoX3RvZGF5c1BlcmlvZEFyciQzID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDMkb3AgPSBfdG9kYXlzUGVyaW9kQXJyJDMub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQzJG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDMkb3AuaG91cnM7CiAgICAgIG9wZW5pbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkNCA9IHRvZGF5c1BlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciQ0JG9wID0gX3RvZGF5c1BlcmlvZEFyciQ0Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkNCRvcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciQ0JG9wLm1pbnV0ZXM7CiAgICB9IGVsc2UgewogICAgICAvLyBzdG9yZSBvcGVuIGluIGJyZWFrcyBpbiBhIGRheQogICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdG9kYXlzUGVyaW9kQXJyLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIHZhciBfdG9kYXlzUGVyaW9kQXJyJGluZGUsIF90b2RheXNQZXJpb2RBcnIkaW5kZTIsIF90b2RheXNQZXJpb2RBcnIkaW5kZTMsIF90b2RheXNQZXJpb2RBcnIkaW5kZTQsIF90b2RheXNQZXJpb2RBcnIkaW5kZTEzLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTUsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE2LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNywgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTgsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE5LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMDsKCiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZm9ybWF0dGVkVGltZSgoX3RvZGF5c1BlcmlvZEFyciRpbmRlID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZS5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyLmhvdXJzLCAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMyA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGU0ID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMy5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGU0Lm1pbnV0ZXMpIC8vIGNsb3NlZDogYmVmb3JlIHN0b3JlIG9wZW5pbmcKICAgICAgICApIHsKICAgICAgICAgIHZhciBfdG9kYXlzUGVyaW9kQXJyJGluZGU1LCBfdG9kYXlzUGVyaW9kQXJyJGluZGU2LCBfdG9kYXlzUGVyaW9kQXJyJGluZGU3LCBfdG9kYXlzUGVyaW9kQXJyJGluZGU4LCBfdG9kYXlzUGVyaW9kQXJyJGluZGU5LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTEsIF90b2RheXNQZXJpb2RBcnIkaW5kZTEyOwoKICAgICAgICAgIG9wZW5pbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGU1ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTYgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGU1Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTYuaG91cnM7CiAgICAgICAgICBvcGVuaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGU3ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTggPSBfdG9kYXlzUGVyaW9kQXJyJGluZGU3Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTgubWludXRlczsKICAgICAgICAgIGNsb3NpbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGU5ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTEwID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlOS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTEwLmhvdXJzOwogICAgICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTEgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTEyID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMTEuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMi5taW51dGVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGltZSA+PSBmb3JtYXR0ZWRUaW1lKChfdG9kYXlzUGVyaW9kQXJyJGluZGUxMyA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTQgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMy5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTQuaG91cnMsIChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTYgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNS5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTYubWludXRlcykgJiYgY3VycmVudFRpbWUgPCBmb3JtYXR0ZWRUaW1lKChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNyA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTggPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNy5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTE4LmhvdXJzLCAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTkgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTIwID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMTkuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMC5taW51dGVzKSkgewogICAgICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkaW5kZTIxLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMiwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI0LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjYsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI3LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyODsKCiAgICAgICAgICAvLyBzdG9yZSBpcyBvcGVuCiAgICAgICAgICBjbG9zaW5nSG91cnMgPSAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjEgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTIyID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMjEuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMi5ob3VyczsKICAgICAgICAgIGNsb3NpbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTIzID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyNCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTIzLmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMjQubWludXRlczsKICAgICAgICAgIG9wZW5pbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyNSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjYgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNS5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMjYuaG91cnM7CiAgICAgICAgICBvcGVuaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyNyA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjggPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNy5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMjgubWludXRlczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9kYXksIF9jb3VudCkgewogICAgICAgICAgICB2YXIgX3BsYWNlJG9wZW5pbmdfaG91cnM2LCBfcGxhY2Ukb3BlbmluZ19ob3Vyczc7CgogICAgICAgICAgICB2YXIgZGF5UGVyaW9kQXJyID0gKF9wbGFjZSRvcGVuaW5nX2hvdXJzNiA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzNyA9IF9wbGFjZSRvcGVuaW5nX2hvdXJzNi5wZXJpb2RzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZSRvcGVuaW5nX2hvdXJzNy5maWx0ZXIoZnVuY3Rpb24gKHJlcWREYXkpIHsKICAgICAgICAgICAgICB2YXIgX3JlcWREYXkkY2xvc2UzOwoKICAgICAgICAgICAgICByZXR1cm4gKHJlcWREYXkgPT09IG51bGwgfHwgcmVxZERheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZXFkRGF5JGNsb3NlMyA9IHJlcWREYXkuY2xvc2UpID09PSBudWxsIHx8IF9yZXFkRGF5JGNsb3NlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcWREYXkkY2xvc2UzLmRheSkgPT09IF9kYXk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCFkYXlQZXJpb2RBcnIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9kYXlQZXJpb2RBcnIkMywgX2RheVBlcmlvZEFyciQzJG9wZW4sIF9kYXlQZXJpb2RBcnIkNCwgX2RheVBlcmlvZEFyciQ0JG9wZW4sIF90b2RheXNQZXJpb2RBcnIkNSwgX3RvZGF5c1BlcmlvZEFyciQ1JGNsLCBfdG9kYXlzUGVyaW9kQXJyJDYsIF90b2RheXNQZXJpb2RBcnIkNiRjbDsKCiAgICAgICAgICAgICAgZGF5SW5kZXggPSBNYXRoLmFicyhfZGF5IC0gY3VycmVudERheSkgPiAxID8gX2RheSA6ICcnOwogICAgICAgICAgICAgIG9wZW5pbmdIb3VycyA9IChfZGF5UGVyaW9kQXJyJDMgPSBkYXlQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXlQZXJpb2RBcnIkMyRvcGVuID0gX2RheVBlcmlvZEFyciQzLm9wZW4pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkMyRvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5UGVyaW9kQXJyJDMkb3Blbi5ob3VyczsKICAgICAgICAgICAgICBvcGVuaW5nTWludXRlcyA9IChfZGF5UGVyaW9kQXJyJDQgPSBkYXlQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXlQZXJpb2RBcnIkNCRvcGVuID0gX2RheVBlcmlvZEFyciQ0Lm9wZW4pID09PSBudWxsIHx8IF9kYXlQZXJpb2RBcnIkNCRvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5UGVyaW9kQXJyJDQkb3Blbi5taW51dGVzOwogICAgICAgICAgICAgIGNsb3NpbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJDUgPSB0b2RheXNQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkNSRjbCA9IF90b2RheXNQZXJpb2RBcnIkNS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ1JGNsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDUkY2wuaG91cnM7CiAgICAgICAgICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciQ2ID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDYkY2wgPSBfdG9kYXlzUGVyaW9kQXJyJDYuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkNiRjbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciQ2JGNsLm1pbnV0ZXM7CiAgICAgICAgICAgICAgcmV0dXJuICJicmVhayI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgLy8gY2xvc2VkOiBhZnRlciBzdG9yZSBjbG9zaW5nLiBXZSBuZWVkIG5leHQgYWN0aXZlIGRheSdzIG9wZW5pbmdIb3VycwogICAgICAgICAgZm9yICh2YXIgX2RheSA9IChjdXJyZW50RGF5ICsgMSkgJSA3LCBfY291bnQgPSAwOyBfY291bnQgPCA2OyBfZGF5ID0gKF9kYXkgKyAxKSAlIDcsIF9jb3VudCsrKSB7CiAgICAgICAgICAgIHZhciBfcmV0MiA9IF9sb29wMihfZGF5LCBfY291bnQpOwoKICAgICAgICAgICAgaWYgKF9yZXQyID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICAgICAgaWYgKF9yZXQyID09PSAiYnJlYWsiKSBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB7CiAgICBjbG9zaW5nVGltZTogdG9SZWd1bGFyVGltZSh7CiAgICAgIGRheUluZGV4OiBkYXlJbmRleCwKICAgICAgaG91cnM6IGNsb3NpbmdIb3VycywKICAgICAgbWludXRlczogY2xvc2luZ01pbnV0ZXMKICAgIH0pIHx8ICdOL0EnLAogICAgb3BlbmluZ1RpbWU6IHRvUmVndWxhclRpbWUoewogICAgICBkYXlJbmRleDogZGF5SW5kZXgsCiAgICAgIGhvdXJzOiBvcGVuaW5nSG91cnMsCiAgICAgIG1pbnV0ZXM6IG9wZW5pbmdNaW51dGVzCiAgICB9KSB8fCAnTi9BJwogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgZmV0Y2hBZGRyZXNzSW5mbzogZnVuY3Rpb24gZmV0Y2hBZGRyZXNzSW5mbyhfcmVmLCBfcmVmMikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIHNoaXBwaW5nQWRkcmVzcywgcmV0dXJuTWV0aG9kcywgaXNSZXR1cm5NZXRob2RDb21taXRlZCwgdXBkYXRlZE1ldGhvZHM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzID0gX3JlZjIuc2hpcHBpbmdBZGRyZXNzLCByZXR1cm5NZXRob2RzID0gX3JlZjIucmV0dXJuTWV0aG9kczsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgICAgICAgICByZXR1cm5NZXRob2RzOiByZXR1cm5NZXRob2RzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaXNSZXR1cm5NZXRob2RDb21taXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgIHVwZGF0ZWRNZXRob2RzID0gW107CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA1OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmV0dXJuTWV0aG9kcy5tYXAoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfc2hpcHBpbmdBZGRyZXNzJHppcF87CgogICAgICAgICAgICAgICAgICB2YXIgdHlwZSwgZGlzdGFuY2VUaHJlc2hvbGQsIG5hbWUsIF9zaGlwcGluZ0FkZHJlc3MkemlwXzIsIHN0cmVldDEsIHN0YXRlLCB6aXBDb2RlLCBjaXR5LCBsb29rdXBLZXksIGtleXMsIHJNZXRob2RzLCBwbGFjZXMsIHZhbGlkUGxhY2VzLCBvcGVyYXRpb25hbFN0b3JlcywgaW5kZXgsIHJlc3VsdCwgcGxhY2VJZCwgcGxhY2UsIGRpc3RhbmNlLCBfcGxhY2Ukb3BlbmluZ19ob3VyczgsIF9wbGFjZSRvcGVuaW5nX2hvdXJzOSwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMCwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMSwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMiwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMzsKCiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gbWV0aG9kLnR5cGUsIGRpc3RhbmNlVGhyZXNob2xkID0gbWV0aG9kLmRpc3RhbmNlVGhyZXNob2xkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSBDT05TVEFOVFMuUkVUVVJOX01FVEhPRFMuTUFJTF9CQUNLKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZhdWx0IHRvbGVyYW5jZSAtIGFsd2F5cyBzdXJmYWNlIG1haWxiYWNrIG9wdGlvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkTWV0aG9kcy5wdXNoKF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBtZXRob2QgPT09IG51bGwgfHwgbWV0aG9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRob2QuY3VzdG9tZXJfZmFjaW5nX2NhcnJpZXI7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc2hpcHBpbmdBZGRyZXNzID09PSBudWxsIHx8IHNoaXBwaW5nQWRkcmVzcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zaGlwcGluZ0FkZHJlc3MkemlwXyA9IHNoaXBwaW5nQWRkcmVzcy56aXBfY29kZSkgPT09IG51bGwgfHwgX3NoaXBwaW5nQWRkcmVzcyR6aXBfID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2hpcHBpbmdBZGRyZXNzJHppcF8ubGVuZ3RoKSA+IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcy56aXBfY29kZSA9IHNoaXBwaW5nQWRkcmVzcyA9PT0gbnVsbCB8fCBzaGlwcGluZ0FkZHJlc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfc2hpcHBpbmdBZGRyZXNzJHppcF8yID0gc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlKSA9PT0gbnVsbCB8fCBfc2hpcHBpbmdBZGRyZXNzJHppcF8yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc2hpcHBpbmdBZGRyZXNzJHppcF8yLnN1YnN0cmluZygwLCA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldDEgPSBzaGlwcGluZ0FkZHJlc3Muc3RyZWV0MSwgc3RhdGUgPSBzaGlwcGluZ0FkZHJlc3Muc3RhdGUsIHppcENvZGUgPSBzaGlwcGluZ0FkZHJlc3MuemlwX2NvZGUsIGNpdHkgPSBzaGlwcGluZ0FkZHJlc3MuY2l0eTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb29rdXBLZXkgPSAiIi5jb25jYXQoc3RhdGUsICJfIikuY29uY2F0KHppcENvZGUsICJfIikuY29uY2F0KGNpdHksICJfIikuY29uY2F0KG5hbWUsICJfIikuY29uY2F0KHR5cGUsICJfaW5mbyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUdPT0dMRV9NQVBfQVBJX0NBQ0hFW2xvb2t1cEtleV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cyA9IGdldExvb2t1cEtleXMoT2JqZWN0LmtleXMoR09PR0xFX01BUF9BUElfQ0FDSEUpLCBsb29rdXBLZXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJNZXRob2RzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEdPT0dMRV9NQVBfQVBJX0NBQ0hFW2tleV0gJiYgR09PR0xFX01BUF9BUElfQ0FDSEVba2V5XS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJNZXRob2RzLnB1c2goR09PR0xFX01BUF9BUElfQ0FDSEVba2V5XVswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVNZXRob2RzJywgck1ldGhvZHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV0dXJuTWV0aG9kQ29tbWl0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIEdPT0dMRV9NQVBfQVBJX0NBQ0hFW2xvb2t1cEtleV0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldFBsYWNlcyhzaGlwcGluZ0FkZHJlc3MsIG5hbWUsIHR5cGUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwbGFjZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldFBsYWNlcyhzaGlwcGluZ0FkZHJlc3MsIG5hbWUsIHR5cGUsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwbGFjZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRQbGFjZXMgPSBwbGFjZXMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkU3RvcmVOYW1lKHBsYWNlLm5hbWUsIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh2YWxpZFBsYWNlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0UGxhY2VzKHNoaXBwaW5nQWRkcmVzcywgbmFtZSwgdHlwZSwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsYWNlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFBsYWNlcyA9IHBsYWNlcy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRTdG9yZU5hbWUocGxhY2UubmFtZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHZhbGlkUGxhY2VzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbmFsU3RvcmVzID0gdmFsaWRQbGFjZXMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1c2luZXNzU3RhdHVzID0gX3JlZjQuYnVzaW5lc3Nfc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFidXNpbmVzc1N0YXR1cyA/IHRydWUgOiBidXNpbmVzc1N0YXR1cyA9PT0gJ09QRVJBVElPTkFMJzsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEob3BlcmF0aW9uYWxTdG9yZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCBvcGVyYXRpb25hbFN0b3Jlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9wZXJhdGlvbmFsU3RvcmVzW2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUlkID0gcmVzdWx0LnBsYWNlX2lkOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGV0YWlscyhwbGFjZUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGlzdGFuY2UoIiIuY29uY2F0KHN0cmVldDEsICIsICIpLmNvbmNhdChjaXR5LCAiLCAiKS5jb25jYXQoc3RhdGUsICIgIikuY29uY2F0KHppcENvZGUpLCBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3RvcmVXaXRoaW5EaXN0YW5jZShkaXN0YW5jZSA9PT0gbnVsbCB8fCBkaXN0YW5jZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGlzdGFuY2UuZGlzdGFuY2UsIGRpc3RhbmNlVGhyZXNob2xkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJjb250aW51ZSIsIDU1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XS5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpLCBkaXN0YW5jZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQaG9uZU51bWJlcjogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmZvcm1hdHRlZF9waG9uZV9udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuaW5nSG91cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzOCA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM4LmlzT3BlbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5X3RleHQ6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM5ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3Vyczkud2Vla2RheV90ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJpb2RzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTAgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczEwLnBlcmlvZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5Q2xvc2luZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkuY2xvc2luZ1RpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZE1ldGhvZHMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSwgZGlzdGFuY2UpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGhvbmVOdW1iZXI6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFjZS5mb3JtYXR0ZWRfcGhvbmVfbnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmluZ0hvdXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3BlbjogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczExID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMxMS5pc09wZW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2RheV90ZXh0OiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTIgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczEyLndlZWtkYXlfdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyaW9kczogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczEzID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMxMy5wZXJpb2RzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RheUNsb3NpbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLmNsb3NpbmdUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RheU9wZW5pbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLm9wZW5pbmdUaW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgNTgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTg6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDUpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFkZHJlc3MgSW5mbycsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDIudDAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgaWYgKCFpc1JldHVybk1ldGhvZENvbW1pdGVkKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZWRNZXRob2RzOiB1cGRhdGVkTWV0aG9kcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZU1ldGhvZHMnLCB1cGRhdGVkTWV0aG9kcyk7CiAgICAgICAgICAgICAgfSAvLyBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSkKCgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNSwgMTBdXSk7CiAgICB9KSkoKTsKICB9LAogIGZldGNoTmVhcmJ5Q2FycmllcnM6IGZ1bmN0aW9uIGZldGNoTmVhcmJ5Q2FycmllcnMoX3JlZjUsIF9yZWY2KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbW1pdCwgY2Fycmllciwgc2hpcHBpbmdBZGRyZXNzLCB0eXBlLCBkaXN0YW5jZVRocmVzaG9sZCwgbmFtZSwgc3RyZWV0MSwgc3RhdGUsIHppcENvZGUsIGNpdHksIHBsYWNlcywgcmVzdWx0cywgY2FycmllcnMsIF9pdGVyYXRvckFicnVwdENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgcmVzdWx0LCBwbGFjZUlkLCBwbGFjZSwgZGlzdGFuY2UsIGNhcnJpZXJBbHJlYWR5UmVjb3JkZWQsIF9wbGFjZTIsIF9wbGFjZTMsIF9wbGFjZTQsIF9wbGFjZTQkb3BlbmluZ19ob3VycywgX3BsYWNlNSwgX3BsYWNlNSRvcGVuaW5nX2hvdXJzLCBfcGxhY2U2LCBfcGxhY2U2JG9wZW5pbmdfaG91cnM7CgogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgICAgICAgICBjYXJyaWVyID0gX3JlZjYuY2Fycmllciwgc2hpcHBpbmdBZGRyZXNzID0gX3JlZjYuc2hpcHBpbmdBZGRyZXNzOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgICAgICAgIGNhcnJpZXI6IGNhcnJpZXIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgICAgICB0eXBlID0gY2Fycmllci50eXBlLCBkaXN0YW5jZVRocmVzaG9sZCA9IGNhcnJpZXIuZGlzdGFuY2VUaHJlc2hvbGQ7CiAgICAgICAgICAgICAgbmFtZSA9IGNhcnJpZXIgPT09IG51bGwgfHwgY2FycmllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2Fycmllci5jdXN0b21lcl9mYWNpbmdfY2FycmllcjsKICAgICAgICAgICAgICBzdHJlZXQxID0gc2hpcHBpbmdBZGRyZXNzLnN0cmVldDEsIHN0YXRlID0gc2hpcHBpbmdBZGRyZXNzLnN0YXRlLCB6aXBDb2RlID0gc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlLCBjaXR5ID0gc2hpcHBpbmdBZGRyZXNzLmNpdHk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldFBsYWNlcyhzaGlwcGluZ0FkZHJlc3MsIG5hbWUsIHR5cGUpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBwbGFjZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICByZXN1bHRzID0gcGxhY2VzLmZpbHRlcihmdW5jdGlvbiAoX3JlZjcpIHsKICAgICAgICAgICAgICAgIHZhciBidXNpbmVzc1N0YXR1cyA9IF9yZWY3LmJ1c2luZXNzX3N0YXR1czsKICAgICAgICAgICAgICAgIHJldHVybiAhYnVzaW5lc3NTdGF0dXMgPyB0cnVlIDogYnVzaW5lc3NTdGF0dXMgPT09ICdPUEVSQVRJT05BTCc7CiAgICAgICAgICAgICAgfSk7IC8vIE9ubHkgY2FsY3VsYXRlIGRpc3RhbmNlIGZvciBhIG1heCBvZiB0ZW4gcmVzdWx0cwoKICAgICAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAxMCkgewogICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuc2xpY2UoMCwgMTApOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FycmllcnMgPSBbXTsKICAgICAgICAgICAgICBfaXRlcmF0b3JBYnJ1cHRDb21wbGV0aW9uID0gZmFsc2U7CiAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE2OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9hc3luY0l0ZXJhdG9yKHJlc3VsdHMpOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIwOwogICAgICAgICAgICAgIHJldHVybiBfaXRlcmF0b3IubmV4dCgpOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBpZiAoIShfaXRlcmF0b3JBYnJ1cHRDb21wbGV0aW9uID0gIShfc3RlcCA9IF9jb250ZXh0My5zZW50KS5kb25lKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0MTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVzdWx0ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgcGxhY2VJZCA9IHJlc3VsdC5wbGFjZV9pZDsKICAgICAgICAgICAgICBwbGFjZSA9IEdPT0dMRV9NQVBfQVBJX1BJRF9DQUNIRVtwbGFjZUlkXTsKCiAgICAgICAgICAgICAgaWYgKHBsYWNlKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI3OwogICAgICAgICAgICAgIHJldHVybiBzbGVlcCgyMDApOwoKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI5OwogICAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXREZXRhaWxzKHBsYWNlSWQpOwoKICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICBwbGFjZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIEdPT0dMRV9NQVBfQVBJX1BJRF9DQUNIRVtwbGFjZUlkXSA9IHBsYWNlOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgcmV0dXJuIHNsZWVwKDIwMCk7CgogICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldERpc3RhbmNlKCIiLmNvbmNhdChzdHJlZXQxLCAiLCAiKS5jb25jYXQoY2l0eSwgIiwgIikuY29uY2F0KHN0YXRlLCAiICIpLmNvbmNhdCh6aXBDb2RlKSwgcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MpOwoKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICBkaXN0YW5jZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIGNhcnJpZXJBbHJlYWR5UmVjb3JkZWQgPSBjYXJyaWVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGNhcnJpZXIpIHsKICAgICAgICAgICAgICAgIHZhciBfcGxhY2U7CgogICAgICAgICAgICAgICAgcmV0dXJuIChjYXJyaWVyID09PSBudWxsIHx8IGNhcnJpZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhcnJpZXIuZm9ybWF0dGVkQWRkcmVzcykgPT09ICgoX3BsYWNlID0gcGxhY2UpID09PSBudWxsIHx8IF9wbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlLmZvcm1hdHRlZF9hZGRyZXNzKTsKICAgICAgICAgICAgICB9KSAhPT0gLTE7CgogICAgICAgICAgICAgIGlmIChpc1N0b3JlV2l0aGluRGlzdGFuY2UoZGlzdGFuY2UuZGlzdGFuY2UsIGRpc3RhbmNlVGhyZXNob2xkKSAmJiB2YWxpZFN0b3JlTmFtZShwbGFjZS5uYW1lLCB0eXBlKSAmJiAhY2FycmllckFscmVhZHlSZWNvcmRlZCkgewogICAgICAgICAgICAgICAgY2FycmllcnMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY2FycmllciksIGRpc3RhbmNlKSwge30sIHsKICAgICAgICAgICAgICAgICAgbmFtZTogcGxhY2UubmFtZSwKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGhvbmVOdW1iZXI6IChfcGxhY2UyID0gcGxhY2UpID09PSBudWxsIHx8IF9wbGFjZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZTIuZm9ybWF0dGVkX3Bob25lX251bWJlciwKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogKF9wbGFjZTMgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlMy5mb3JtYXR0ZWRfYWRkcmVzcywKICAgICAgICAgICAgICAgICAgaWNvbjogcmVzdWx0Lmljb24sCiAgICAgICAgICAgICAgICAgIG9wZW5pbmdIb3VyczogewogICAgICAgICAgICAgICAgICAgIGlzT3BlbjogKF9wbGFjZTQgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZTQkb3BlbmluZ19ob3VycyA9IF9wbGFjZTQub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlNCRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2U0JG9wZW5pbmdfaG91cnMuaXNPcGVuKCksCiAgICAgICAgICAgICAgICAgICAgd2Vla2x5UmFuZ2U6IGNoZWNrTWFwc1BvbGljeSgpID8gZ2V0V2Vla2x5UmFuZ2UocGxhY2UpIDogJycsCiAgICAgICAgICAgICAgICAgICAgd2Vla2RheV90ZXh0OiAoX3BsYWNlNSA9IHBsYWNlKSA9PT0gbnVsbCB8fCBfcGxhY2U1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlNSRvcGVuaW5nX2hvdXJzID0gX3BsYWNlNS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2U1JG9wZW5pbmdfaG91cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZTUkb3BlbmluZ19ob3Vycy53ZWVrZGF5X3RleHQsCiAgICAgICAgICAgICAgICAgICAgcGVyaW9kczogKF9wbGFjZTYgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZTYkb3BlbmluZ19ob3VycyA9IF9wbGFjZTYub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlNiRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2U2JG9wZW5pbmdfaG91cnMucGVyaW9kcywKICAgICAgICAgICAgICAgICAgICB0b2RheUNsb3NpbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLmNsb3NpbmdUaW1lLAogICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDM7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDE2KTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDMudDA7CgogICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDc7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA0ODsKCiAgICAgICAgICAgICAgaWYgKCEoX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgIHJldHVybiBfaXRlcmF0b3IucmV0dXJuKCk7CgogICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTI7CgogICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg1Mik7CgogICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDQ3KTsKCiAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgY2FycmllcnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuICthLmRpc3RhbmNlLnNwbGl0KCcgJylbMF0gLSArYi5kaXN0YW5jZS5zcGxpdCgnICcpWzBdOwogICAgICAgICAgICAgIH0pLnNsaWNlKDAsIDMpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0TmVhcmJ5Q2FycmllcnMnLCBjYXJyaWVycyk7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjg7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNjI7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQxID0gX2NvbnRleHQzWyJjYXRjaCJdKDcpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG5lYXJieSBsb2NhdGlvbnMnLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQzLnQxCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2NzsKICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoNTAwMCk7CgogICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdyZXR1cm5zL2ZldGNoTmVhcmJ5Q2FycmllcnMnLCB7CiAgICAgICAgICAgICAgICBjYXJyaWVyOiBjYXJyaWVyLAogICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s3LCA2Ml0sIFsxNiwgNDMsIDQ3LCA1N10sIFs0OCwsIDUyLCA1Nl1dKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/Asset/fintify/src/store/modules/returns/actions.js"],"names":["googleMapsService","toRegularTime","isStoreWithinDistance","getLookupKeys","dayOfWeekAsString","store","validStoreName","checkMapsPolicy","CONSTANTS","formattedTime","hours","minutes","parseInt","sleep","milliseconds","Promise","resolve","setTimeout","GOOGLE_MAP_API_CACHE","GOOGLE_MAP_API_PID_CACHE","getWeeklyRange","place","formattedWeeklyRange","dateRange","timeRange","weeklyRange","opening_hours","periods","reduce","acc","day","open","start","end","startHour","startMinute","close","endHour","endMinute","slice","dayIndex","getFormattedStoreTime","closingHours","openingHours","openingMinutes","closingMinutes","currentDay","Date","getDay","currentTime","getHours","getMinutes","todaysPeriodArr","filter","reqdDay","length","count","dayPeriodArr","Math","abs","index","closingTime","openingTime","fetchAddressInfo","commit","shippingAddress","returnMethods","console","log","isReturnMethodCommited","updatedMethods","all","map","method","type","distanceThreshold","RETURN_METHODS","MAIL_BACK","push","name","customer_facing_carrier","zip_code","substring","street1","state","zipCode","city","lookupKey","keys","Object","rMethods","key","getPlaces","places","validPlaces","operationalStores","businessStatus","business_status","result","placeId","place_id","getDetails","getDistance","formatted_address","distance","formattedPhoneNumber","formatted_phone_number","formattedAddress","isOpen","weekday_text","todayClosingTime","todayOpeningTime","error","fetchNearbyCarriers","carrier","results","carriers","carrierAlreadyRecorded","findIndex","icon","sort","a","b","split","dispatch"],"mappings":"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","sourcesContent":["import googleMapsService from '@/common/googleMaps.service'\nimport { toRegularTime, isStoreWithinDistance, getLookupKeys, dayOfWeekAsString } from '@/utils'\nimport store from '@/store'\nimport { validStoreName } from '@/controllers/ReturnMethodsController.js'\nimport { checkMapsPolicy } from '@/controllers/MapController.js'\nimport { CONSTANTS } from '@/constants/index.js'\n\n// in HHMM format\nconst formattedTime = (hours, minutes) => {\n  return parseInt(`${hours}${minutes < 10 ? '0' + minutes : minutes}`)\n}\n\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\nconst GOOGLE_MAP_API_CACHE = {}\nconst GOOGLE_MAP_API_PID_CACHE = {}\n\nconst getWeeklyRange = (place) => {\n  const formattedWeeklyRange = { dateRange: '', timeRange: '' }\n\n  const weeklyRange = place?.opening_hours?.periods?.reduce((acc, day) => {\n    // if earliest found open day, set as start\n    if (day?.open?.day <= acc?.dateRange?.start) {\n      acc.dateRange.start = day?.open?.day\n    }\n    // if latest found open day, set as end\n    if (day?.open?.day >= acc?.dateRange?.end) {\n      acc.dateRange.end = day?.open?.day\n    }\n    // check if current day open is later than stored\n    if (day?.open?.hours >= acc?.timeRange?.startHour) {\n      if (day?.open?.minutes >= acc?.timeRange?.startMinute) {\n        acc.timeRange.startMinute = day?.open?.minutes\n      }\n      acc.timeRange.startHour = day?.open?.hours\n    }\n    // check if current day close is earlier than stored\n    if (day?.close?.hours <= acc?.timeRange?.endHour || !acc?.timeRange?.endHour) {\n      if (day?.close?.minutes <= acc?.timeRange?.endMinute || !acc?.timeRange?.endMinute) {\n        acc.timeRange.endMinute = day?.open?.minutes\n      }\n      acc.timeRange.endHour = day?.close?.hours\n    }\n    return acc\n  }, { dateRange: { start: '', end: '' }, timeRange: { startHour: '', startMinute: '', endHour: '', endMinute: '' } })\n\n  // reformat for human-readable\n  formattedWeeklyRange.dateRange = `${dayOfWeekAsString([weeklyRange?.dateRange?.start === 0 ? 1 : weeklyRange?.dateRange?.start]).slice(0, 3)} - ${dayOfWeekAsString([weeklyRange?.dateRange?.end]).slice(0, 3)}`\n\n  formattedWeeklyRange.timeRange = `${toRegularTime({ dayIndex: '', hours: weeklyRange?.timeRange?.startHour, minutes: weeklyRange?.timeRange?.startMinute })}\n  - ${toRegularTime({ hours: weeklyRange?.timeRange?.endHour, minutes: weeklyRange?.timeRange?.endMinute || 0 })}`\n\n  return formattedWeeklyRange\n}\n\nconst getFormattedStoreTime = (place) => {\n  let closingHours = null\n  let openingHours = null\n  let openingMinutes = null\n  let closingMinutes = null\n  let dayIndex = ''\n\n  const currentDay = new Date().getDay()\n  const currentTime = formattedTime(new Date().getHours(), new Date().getMinutes())\n  const todaysPeriodArr = place.opening_hours?.periods?.filter(\n    (reqdDay) => reqdDay?.close?.day === currentDay\n  )\n  // todaysPeriod array can be of any length\n\n  if (todaysPeriodArr) {\n    if (!todaysPeriodArr.length) { // holiday\n      for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n        const dayPeriodArr = place.opening_hours?.periods?.filter(\n          (reqdDay) => reqdDay?.close?.day === day\n        )\n        if (!dayPeriodArr.length) {\n          continue\n        } else {\n          dayIndex = Math.abs(day - currentDay) > 1 ? day : '' // show day of the week only when its not the next day\n          openingHours = dayPeriodArr[0]?.open?.hours\n          openingMinutes = dayPeriodArr[0]?.open?.minutes\n          break\n        }\n      }\n    } else if (todaysPeriodArr.length === 1) {\n    // only one closing and opening time for a day\n      closingHours = todaysPeriodArr[0]?.close?.hours\n      closingMinutes = todaysPeriodArr[0]?.close?.minutes\n      openingHours = todaysPeriodArr[0]?.open?.hours\n      openingMinutes = todaysPeriodArr[0]?.open?.minutes\n    } else {\n    // store open in breaks in a day\n      for (let index = 0; index < todaysPeriodArr.length; index++) {\n        if (currentTime < formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes\n        ) // closed: before store opening\n        ) {\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          break\n        } else if (currentTime >= formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes) && currentTime < formattedTime(todaysPeriodArr[index]?.close?.hours, todaysPeriodArr[index]?.close?.minutes)) { // store is open\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          break\n        } else {\n        // closed: after store closing. We need next active day's openingHours\n          for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n            const dayPeriodArr = place.opening_hours?.periods?.filter(\n              (reqdDay) => reqdDay?.close?.day === day\n            )\n            if (!dayPeriodArr.length) {\n              continue\n            } else {\n              dayIndex = Math.abs(day - currentDay) > 1 ? day : ''\n              openingHours = dayPeriodArr[0]?.open?.hours\n              openingMinutes = dayPeriodArr[0]?.open?.minutes\n              closingHours = todaysPeriodArr[0]?.close?.hours\n              closingMinutes = todaysPeriodArr[0]?.close?.minutes\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  return {\n    closingTime: toRegularTime({ dayIndex, hours: closingHours, minutes: closingMinutes }) || 'N/A',\n    openingTime: toRegularTime({ dayIndex, hours: openingHours, minutes: openingMinutes }) || 'N/A'\n  }\n}\n\nexport default {\n  async fetchAddressInfo ({ commit }, { shippingAddress, returnMethods }) {\n    console.log({ returnMethods })\n    var isReturnMethodCommited = false\n    const updatedMethods = []\n\n    try {\n      await Promise.all(\n        returnMethods.map(async (method) => {\n          const { type, distanceThreshold } = method\n          if (type === CONSTANTS.RETURN_METHODS.MAIL_BACK) { // fault tolerance - always surface mailback options\n            updatedMethods.push({\n              ...method\n            })\n            return\n          }\n          const name = method?.customer_facing_carrier\n          if (shippingAddress?.zip_code?.length > 5) {\n            shippingAddress.zip_code = shippingAddress?.zip_code?.substring(0, 5)\n          }\n          const { street1, state, zip_code: zipCode, city } = shippingAddress\n          const lookupKey = `${state}_${zipCode}_${city}_${name}_${type}_info`\n\n          if (GOOGLE_MAP_API_CACHE[lookupKey]) {\n            const keys = getLookupKeys(Object.keys(GOOGLE_MAP_API_CACHE), lookupKey)\n            var rMethods = []\n            keys.map(key => { if (GOOGLE_MAP_API_CACHE[key] && GOOGLE_MAP_API_CACHE[key].length > 0) { rMethods.push(GOOGLE_MAP_API_CACHE[key][0]) } })\n            commit('updateMethods', rMethods)\n            isReturnMethodCommited = true\n            return GOOGLE_MAP_API_CACHE[lookupKey]\n          }\n\n          // STEP 1: Get places for the specified zipcode, city and state\n          // STEP 2: Ensure the place name has specified names (storeNames) as mentioned in the policy\n          // STEP 3: Filter only OPERATIONAL stores. PERMANENTLY_CLOSED stores are eliminated\n          // STEP 4: Pick up the first operational, valid store (To be changed)\n\n          let places = await googleMapsService.getPlaces(shippingAddress, name, type)\n          if (places.length === 0) {\n            places = await googleMapsService.getPlaces(shippingAddress, name, type, true)\n            if (places.length === 0) {\n              return {\n                ...method\n              }\n            }\n          }\n\n          let validPlaces = places.filter((place) => validStoreName(place.name, type))\n          if (validPlaces.length === 0) {\n            places = await googleMapsService.getPlaces(shippingAddress, name, type, true)\n            if (places.length === 0) {\n              return {\n                ...method\n              }\n            }\n            validPlaces = places.filter((place) => validStoreName(place.name, type))\n            if (validPlaces.length === 0) {\n              return {\n                ...method\n              }\n            }\n          }\n\n          const operationalStores = validPlaces.filter(\n            ({ business_status: businessStatus }) =>\n              !businessStatus ? true : businessStatus === 'OPERATIONAL'\n          )\n          if (operationalStores.length === 0) {\n            return {\n              ...method\n            }\n          }\n\n          GOOGLE_MAP_API_CACHE[lookupKey] = []\n\n          for (let index = 0; index < operationalStores.length; index++) {\n            const result = operationalStores[index]\n\n            const { place_id: placeId } = result\n\n            const place = await googleMapsService.getDetails(placeId)\n\n            const distance = await googleMapsService.getDistance(\n            `${street1}, ${city}, ${state} ${zipCode}`,\n            place.formatted_address\n            )\n\n            if (!isStoreWithinDistance(distance?.distance, distanceThreshold)) {\n              continue\n            } else {\n              GOOGLE_MAP_API_CACHE[lookupKey].push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              updatedMethods.push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              break\n            }\n          }\n        })\n      )\n    } catch (error) {\n      console.error('Error fetching address Info', { error })\n    }\n\n    if (!isReturnMethodCommited) {\n      console.log({ updatedMethods })\n      commit('updateMethods', updatedMethods)\n    }\n    // commit('setLoading', false)\n  },\n  async fetchNearbyCarriers ({ commit }, { carrier, shippingAddress }) {\n    console.log({ carrier })\n\n    commit('setLoading', true)\n    const { type, distanceThreshold } = carrier\n    const name = carrier?.customer_facing_carrier\n    const { street1, state, zip_code: zipCode, city } = shippingAddress\n    try {\n      const places = await googleMapsService.getPlaces(shippingAddress, name, type)\n\n      let results = places\n        .filter(\n          ({ business_status: businessStatus }) =>\n            !businessStatus ? true : businessStatus === 'OPERATIONAL'\n        )\n      // Only calculate distance for a max of ten results\n      if (results.length > 10) {\n        results = results.slice(0, 10)\n      }\n\n      const carriers = []\n      for await (const result of results) {\n        const { place_id: placeId } = result\n\n        var place = GOOGLE_MAP_API_PID_CACHE[placeId]\n\n        if (!place) {\n          await sleep(200)\n          place = await googleMapsService.getDetails(placeId)\n          GOOGLE_MAP_API_PID_CACHE[placeId] = place\n\n          await sleep(200)\n        }\n        const distance = await googleMapsService.getDistance(\n          `${street1}, ${city}, ${state} ${zipCode}`,\n          place.formatted_address\n        )\n\n        const carrierAlreadyRecorded = carriers.findIndex(carrier => carrier?.formattedAddress === place?.formatted_address) !== -1\n\n        if (isStoreWithinDistance(distance.distance, distanceThreshold) && validStoreName(place.name, type) && !carrierAlreadyRecorded) {\n          carriers.push({\n            ...carrier,\n            ...distance,\n            name: place.name,\n            formattedPhoneNumber: place?.formatted_phone_number,\n            formattedAddress: place?.formatted_address,\n            icon: result.icon,\n            openingHours: {\n              isOpen: place?.opening_hours?.isOpen(),\n              weeklyRange: checkMapsPolicy() ? getWeeklyRange(place) : '',\n              weekday_text: place?.opening_hours?.weekday_text,\n              periods: place?.opening_hours?.periods,\n              todayClosingTime: getFormattedStoreTime(place).closingTime,\n              todayOpeningTime: getFormattedStoreTime(place).openingTime\n            }\n          })\n        }\n      }\n\n      carriers.sort(\n        (a, b) => +a.distance.split(' ')[0] - +b.distance.split(' ')[0]\n      ).slice(0, 3)\n\n      commit('setNearbyCarriers', carriers)\n      commit('setLoading', false)\n    } catch (error) {\n      console.error('Error fetching nearby locations', { error })\n      await sleep(5000)\n      store.dispatch('returns/fetchNearbyCarriers', {\n        carrier: carrier,\n        shippingAddress: shippingAddress\n      })\n    }\n  }\n}\n"]}]}