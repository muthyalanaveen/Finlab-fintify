{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js","mtime":1658934857291},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL25hdmVlbm11dGh5YWxhL0RvY3VtZW50cy9Qcm9qZWN0cy9yZXR1cm5zX3BvcnRhbF91aS9yZXR1cm5zX3BvcnRhbF91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbmF2ZWVubXV0aHlhbGEvRG9jdW1lbnRzL1Byb2plY3RzL3JldHVybnNfcG9ydGFsX3VpL3JldHVybnNfcG9ydGFsX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9hc3luY0l0ZXJhdG9yIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvcmV0dXJuc19wb3J0YWxfdWkvcmV0dXJuc19wb3J0YWxfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jSXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgZ29vZ2xlTWFwc1NlcnZpY2UgZnJvbSAnQC9jb21tb24vZ29vZ2xlTWFwcy5zZXJ2aWNlJzsKaW1wb3J0IHsgdG9SZWd1bGFyVGltZSwgaXNTdG9yZVdpdGhpbkRpc3RhbmNlLCBnZXRMb29rdXBLZXlzLCBkYXlPZldlZWtBc1N0cmluZyB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IHZhbGlkU3RvcmVOYW1lIH0gZnJvbSAnQC9jb250cm9sbGVycy9SZXR1cm5NZXRob2RzQ29udHJvbGxlci5qcyc7CmltcG9ydCB7IGNoZWNrTWFwc1BvbGljeSB9IGZyb20gJ0AvY29udHJvbGxlcnMvTWFwQ29udHJvbGxlci5qcyc7CmltcG9ydCB7IENPTlNUQU5UUyB9IGZyb20gJ0AvY29uc3RhbnRzL2luZGV4LmpzJzsgLy8gaW4gSEhNTSBmb3JtYXQKCnZhciBmb3JtYXR0ZWRUaW1lID0gZnVuY3Rpb24gZm9ybWF0dGVkVGltZShob3VycywgbWludXRlcykgewogIHJldHVybiBwYXJzZUludCgiIi5jb25jYXQoaG91cnMpLmNvbmNhdChtaW51dGVzIDwgMTAgPyAnMCcgKyBtaW51dGVzIDogbWludXRlcykpOwp9OwoKdmFyIHNsZWVwID0gZnVuY3Rpb24gc2xlZXAobWlsbGlzZWNvbmRzKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCBtaWxsaXNlY29uZHMpOwogIH0pOwp9OwoKdmFyIEdPT0dMRV9NQVBfQVBJX0NBQ0hFID0ge307CnZhciBHT09HTEVfTUFQX0FQSV9QSURfQ0FDSEUgPSB7fTsKdmFyIEdPT0dMRV9NQVBfQVBJX0RJU1RfQ0FDSEUgPSB7fTsKCnZhciBnZXRXZWVrbHlSYW5nZSA9IGZ1bmN0aW9uIGdldFdlZWtseVJhbmdlKHBsYWNlKSB7CiAgdmFyIF9wbGFjZSRvcGVuaW5nX2hvdXJzLCBfcGxhY2Ukb3BlbmluZ19ob3VycyQsIF93ZWVrbHlSYW5nZSRkYXRlUmFuZywgX3dlZWtseVJhbmdlJGRhdGVSYW5nMiwgX3dlZWtseVJhbmdlJGRhdGVSYW5nMywgX3dlZWtseVJhbmdlJHRpbWVSYW5nLCBfd2Vla2x5UmFuZ2UkdGltZVJhbmcyLCBfd2Vla2x5UmFuZ2UkdGltZVJhbmczLCBfd2Vla2x5UmFuZ2UkdGltZVJhbmc0OwoKICB2YXIgZm9ybWF0dGVkV2Vla2x5UmFuZ2UgPSB7CiAgICBkYXRlUmFuZ2U6ICcnLAogICAgdGltZVJhbmdlOiAnJwogIH07CiAgdmFyIHdlZWtseVJhbmdlID0gcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VycyA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMkID0gX3BsYWNlJG9wZW5pbmdfaG91cnMucGVyaW9kcykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VycyQucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGRheSkgewogICAgdmFyIF9kYXkkb3BlbiwgX2FjYyRkYXRlUmFuZ2UsIF9kYXkkb3BlbjMsIF9hY2MkZGF0ZVJhbmdlMiwgX2RheSRvcGVuNSwgX2FjYyR0aW1lUmFuZ2UsIF9kYXkkY2xvc2UsIF9hY2MkdGltZVJhbmdlMywgX2FjYyR0aW1lUmFuZ2U0OwoKICAgIC8vIGlmIGVhcmxpZXN0IGZvdW5kIG9wZW4gZGF5LCBzZXQgYXMgc3RhcnQKICAgIGlmICgoZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbiA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkb3Blbi5kYXkpIDw9IChhY2MgPT09IG51bGwgfHwgYWNjID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FjYyRkYXRlUmFuZ2UgPSBhY2MuZGF0ZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJGRhdGVSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyRkYXRlUmFuZ2Uuc3RhcnQpKSB7CiAgICAgIHZhciBfZGF5JG9wZW4yOwoKICAgICAgYWNjLmRhdGVSYW5nZS5zdGFydCA9IGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW4yID0gZGF5Lm9wZW4pID09PSBudWxsIHx8IF9kYXkkb3BlbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkb3BlbjIuZGF5OwogICAgfSAvLyBpZiBsYXRlc3QgZm91bmQgb3BlbiBkYXksIHNldCBhcyBlbmQKCgogICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuMyA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW4zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW4zLmRheSkgPj0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJGRhdGVSYW5nZTIgPSBhY2MuZGF0ZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJGRhdGVSYW5nZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkZGF0ZVJhbmdlMi5lbmQpKSB7CiAgICAgIHZhciBfZGF5JG9wZW40OwoKICAgICAgYWNjLmRhdGVSYW5nZS5lbmQgPSBkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuNCA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW40ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW40LmRheTsKICAgIH0gLy8gY2hlY2sgaWYgY3VycmVudCBkYXkgb3BlbiBpcyBsYXRlciB0aGFuIHN0b3JlZAoKCiAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW41ID0gZGF5Lm9wZW4pID09PSBudWxsIHx8IF9kYXkkb3BlbjUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkb3BlbjUuaG91cnMpID49IChhY2MgPT09IG51bGwgfHwgYWNjID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FjYyR0aW1lUmFuZ2UgPSBhY2MudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJHRpbWVSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyR0aW1lUmFuZ2Uuc3RhcnRIb3VyKSkgewogICAgICB2YXIgX2RheSRvcGVuNiwgX2FjYyR0aW1lUmFuZ2UyLCBfZGF5JG9wZW44OwoKICAgICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuNiA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW42ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW42Lm1pbnV0ZXMpID49IChhY2MgPT09IG51bGwgfHwgYWNjID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FjYyR0aW1lUmFuZ2UyID0gYWNjLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyR0aW1lUmFuZ2UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjJHRpbWVSYW5nZTIuc3RhcnRNaW51dGUpKSB7CiAgICAgICAgdmFyIF9kYXkkb3Blbjc7CgogICAgICAgIGFjYy50aW1lUmFuZ2Uuc3RhcnRNaW51dGUgPSBkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuNyA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW43ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW43Lm1pbnV0ZXM7CiAgICAgIH0KCiAgICAgIGFjYy50aW1lUmFuZ2Uuc3RhcnRIb3VyID0gZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjggPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuOC5ob3VyczsKICAgIH0gLy8gY2hlY2sgaWYgY3VycmVudCBkYXkgY2xvc2UgaXMgZWFybGllciB0aGFuIHN0b3JlZAoKCiAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JGNsb3NlID0gZGF5LmNsb3NlKSA9PT0gbnVsbCB8fCBfZGF5JGNsb3NlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JGNsb3NlLmhvdXJzKSA8PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkdGltZVJhbmdlMyA9IGFjYy50aW1lUmFuZ2UpID09PSBudWxsIHx8IF9hY2MkdGltZVJhbmdlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyR0aW1lUmFuZ2UzLmVuZEhvdXIpIHx8ICEoYWNjICE9PSBudWxsICYmIGFjYyAhPT0gdm9pZCAwICYmIChfYWNjJHRpbWVSYW5nZTQgPSBhY2MudGltZVJhbmdlKSAhPT0gbnVsbCAmJiBfYWNjJHRpbWVSYW5nZTQgIT09IHZvaWQgMCAmJiBfYWNjJHRpbWVSYW5nZTQuZW5kSG91cikpIHsKICAgICAgdmFyIF9kYXkkY2xvc2UyLCBfYWNjJHRpbWVSYW5nZTUsIF9hY2MkdGltZVJhbmdlNiwgX2RheSRjbG9zZTM7CgogICAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JGNsb3NlMiA9IGRheS5jbG9zZSkgPT09IG51bGwgfHwgX2RheSRjbG9zZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkY2xvc2UyLm1pbnV0ZXMpIDw9IChhY2MgPT09IG51bGwgfHwgYWNjID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2FjYyR0aW1lUmFuZ2U1ID0gYWNjLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyR0aW1lUmFuZ2U1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjJHRpbWVSYW5nZTUuZW5kTWludXRlKSB8fCAhKGFjYyAhPT0gbnVsbCAmJiBhY2MgIT09IHZvaWQgMCAmJiAoX2FjYyR0aW1lUmFuZ2U2ID0gYWNjLnRpbWVSYW5nZSkgIT09IG51bGwgJiYgX2FjYyR0aW1lUmFuZ2U2ICE9PSB2b2lkIDAgJiYgX2FjYyR0aW1lUmFuZ2U2LmVuZE1pbnV0ZSkpIHsKICAgICAgICB2YXIgX2RheSRvcGVuOTsKCiAgICAgICAgYWNjLnRpbWVSYW5nZS5lbmRNaW51dGUgPSBkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuOSA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW45ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW45Lm1pbnV0ZXM7CiAgICAgIH0KCiAgICAgIGFjYy50aW1lUmFuZ2UuZW5kSG91ciA9IGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JGNsb3NlMyA9IGRheS5jbG9zZSkgPT09IG51bGwgfHwgX2RheSRjbG9zZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkY2xvc2UzLmhvdXJzOwogICAgfQoKICAgIHJldHVybiBhY2M7CiAgfSwgewogICAgZGF0ZVJhbmdlOiB7CiAgICAgIHN0YXJ0OiAnJywKICAgICAgZW5kOiAnJwogICAgfSwKICAgIHRpbWVSYW5nZTogewogICAgICBzdGFydEhvdXI6ICcnLAogICAgICBzdGFydE1pbnV0ZTogJycsCiAgICAgIGVuZEhvdXI6ICcnLAogICAgICBlbmRNaW51dGU6ICcnCiAgICB9CiAgfSk7IC8vIHJlZm9ybWF0IGZvciBodW1hbi1yZWFkYWJsZQoKICBmb3JtYXR0ZWRXZWVrbHlSYW5nZS5kYXRlUmFuZ2UgPSAiIi5jb25jYXQoZGF5T2ZXZWVrQXNTdHJpbmcoWyh3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSRkYXRlUmFuZyA9IHdlZWtseVJhbmdlLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJGRhdGVSYW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmcuc3RhcnQpID09PSAwID8gMSA6IHdlZWtseVJhbmdlID09PSBudWxsIHx8IHdlZWtseVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dlZWtseVJhbmdlJGRhdGVSYW5nMiA9IHdlZWtseVJhbmdlLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJGRhdGVSYW5nMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJGRhdGVSYW5nMi5zdGFydF0pLnNsaWNlKDAsIDMpLCAiIC0gIikuY29uY2F0KGRheU9mV2Vla0FzU3RyaW5nKFt3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMgPSB3ZWVrbHlSYW5nZS5kYXRlUmFuZ2UpID09PSBudWxsIHx8IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMuZW5kXSkuc2xpY2UoMCwgMykpOwogIGZvcm1hdHRlZFdlZWtseVJhbmdlLnRpbWVSYW5nZSA9ICIiLmNvbmNhdCh0b1JlZ3VsYXJUaW1lKHsKICAgIGRheUluZGV4OiAnJywKICAgIGhvdXJzOiB3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSR0aW1lUmFuZyA9IHdlZWtseVJhbmdlLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJHRpbWVSYW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmcuc3RhcnRIb3VyLAogICAgbWludXRlczogd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmcyID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmcyLnN0YXJ0TWludXRlCiAgfSksICJcbiAgLSAiKS5jb25jYXQodG9SZWd1bGFyVGltZSh7CiAgICBob3Vyczogd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmczID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmczLmVuZEhvdXIsCiAgICBtaW51dGVzOiAod2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmc0ID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmc0LmVuZE1pbnV0ZSkgfHwgMAogIH0pKTsKICByZXR1cm4gZm9ybWF0dGVkV2Vla2x5UmFuZ2U7Cn07Cgp2YXIgZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lID0gZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lKHBsYWNlKSB7CiAgdmFyIF9wbGFjZSRvcGVuaW5nX2hvdXJzMiwgX3BsYWNlJG9wZW5pbmdfaG91cnMzOwoKICB2YXIgY2xvc2luZ0hvdXJzID0gbnVsbDsKICB2YXIgb3BlbmluZ0hvdXJzID0gbnVsbDsKICB2YXIgb3BlbmluZ01pbnV0ZXMgPSBudWxsOwogIHZhciBjbG9zaW5nTWludXRlcyA9IG51bGw7CiAgdmFyIGRheUluZGV4ID0gJyc7CiAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSgpLmdldERheSgpOwogIHZhciBjdXJyZW50VGltZSA9IGZvcm1hdHRlZFRpbWUobmV3IERhdGUoKS5nZXRIb3VycygpLCBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKSk7CiAgdmFyIHRvZGF5c1BlcmlvZEFyciA9IChfcGxhY2Ukb3BlbmluZ19ob3VyczIgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczMgPSBfcGxhY2Ukb3BlbmluZ19ob3VyczIucGVyaW9kcykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczMuZmlsdGVyKGZ1bmN0aW9uIChyZXFkRGF5KSB7CiAgICB2YXIgX3JlcWREYXkkY2xvc2U7CgogICAgcmV0dXJuIChyZXFkRGF5ID09PSBudWxsIHx8IHJlcWREYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVxZERheSRjbG9zZSA9IHJlcWREYXkuY2xvc2UpID09PSBudWxsIHx8IF9yZXFkRGF5JGNsb3NlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxZERheSRjbG9zZS5kYXkpID09PSBjdXJyZW50RGF5OwogIH0pOyAvLyB0b2RheXNQZXJpb2QgYXJyYXkgY2FuIGJlIG9mIGFueSBsZW5ndGgKCiAgaWYgKHRvZGF5c1BlcmlvZEFycikgewogICAgaWYgKCF0b2RheXNQZXJpb2RBcnIubGVuZ3RoKSB7CiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGRheSwgY291bnQpIHsKICAgICAgICB2YXIgX3BsYWNlJG9wZW5pbmdfaG91cnM0LCBfcGxhY2Ukb3BlbmluZ19ob3VyczU7CgogICAgICAgIHZhciBkYXlQZXJpb2RBcnIgPSAoX3BsYWNlJG9wZW5pbmdfaG91cnM0ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM1ID0gX3BsYWNlJG9wZW5pbmdfaG91cnM0LnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM1LmZpbHRlcihmdW5jdGlvbiAocmVxZERheSkgewogICAgICAgICAgdmFyIF9yZXFkRGF5JGNsb3NlMjsKCiAgICAgICAgICByZXR1cm4gKHJlcWREYXkgPT09IG51bGwgfHwgcmVxZERheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZXFkRGF5JGNsb3NlMiA9IHJlcWREYXkuY2xvc2UpID09PSBudWxsIHx8IF9yZXFkRGF5JGNsb3NlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcWREYXkkY2xvc2UyLmRheSkgPT09IGRheTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFkYXlQZXJpb2RBcnIubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9kYXlQZXJpb2RBcnIkLCBfZGF5UGVyaW9kQXJyJCRvcGVuLCBfZGF5UGVyaW9kQXJyJDIsIF9kYXlQZXJpb2RBcnIkMiRvcGVuOwoKICAgICAgICAgIGRheUluZGV4ID0gTWF0aC5hYnMoZGF5IC0gY3VycmVudERheSkgPiAxID8gZGF5IDogJyc7IC8vIHNob3cgZGF5IG9mIHRoZSB3ZWVrIG9ubHkgd2hlbiBpdHMgbm90IHRoZSBuZXh0IGRheQoKICAgICAgICAgIG9wZW5pbmdIb3VycyA9IChfZGF5UGVyaW9kQXJyJCA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5UGVyaW9kQXJyJCRvcGVuID0gX2RheVBlcmlvZEFyciQub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQkb3BlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheVBlcmlvZEFyciQkb3Blbi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF9kYXlQZXJpb2RBcnIkMiA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQyJG9wZW4gPSBfZGF5UGVyaW9kQXJyJDIub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQyJG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkMiRvcGVuLm1pbnV0ZXM7CiAgICAgICAgICByZXR1cm4gImJyZWFrIjsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyBob2xpZGF5CiAgICAgIGZvciAodmFyIGRheSA9IChjdXJyZW50RGF5ICsgMSkgJSA3LCBjb3VudCA9IDA7IGNvdW50IDwgNjsgZGF5ID0gKGRheSArIDEpICUgNywgY291bnQrKykgewogICAgICAgIHZhciBfcmV0ID0gX2xvb3AoZGF5LCBjb3VudCk7CgogICAgICAgIGlmIChfcmV0ID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICBpZiAoX3JldCA9PT0gImJyZWFrIikgYnJlYWs7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodG9kYXlzUGVyaW9kQXJyLmxlbmd0aCA9PT0gMSkgewogICAgICB2YXIgX3RvZGF5c1BlcmlvZEFyciQsIF90b2RheXNQZXJpb2RBcnIkJGNsbywgX3RvZGF5c1BlcmlvZEFyciQyLCBfdG9kYXlzUGVyaW9kQXJyJDIkY2wsIF90b2RheXNQZXJpb2RBcnIkMywgX3RvZGF5c1BlcmlvZEFyciQzJG9wLCBfdG9kYXlzUGVyaW9kQXJyJDQsIF90b2RheXNQZXJpb2RBcnIkNCRvcDsKCiAgICAgIC8vIG9ubHkgb25lIGNsb3NpbmcgYW5kIG9wZW5pbmcgdGltZSBmb3IgYSBkYXkKICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkJGNsbyA9IF90b2RheXNQZXJpb2RBcnIkLmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJCRjbG8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkJGNsby5ob3VyczsKICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciQyID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDIkY2wgPSBfdG9kYXlzUGVyaW9kQXJyJDIuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkMiRjbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciQyJGNsLm1pbnV0ZXM7CiAgICAgIG9wZW5pbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJDMgPSB0b2RheXNQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkMyRvcCA9IF90b2RheXNQZXJpb2RBcnIkMy5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDMkb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkMyRvcC5ob3VyczsKICAgICAgb3BlbmluZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciQ0ID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDQkb3AgPSBfdG9kYXlzUGVyaW9kQXJyJDQub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ0JG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDQkb3AubWludXRlczsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHN0b3JlIG9wZW4gaW4gYnJlYWtzIGluIGEgZGF5CiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0b2RheXNQZXJpb2RBcnIubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkaW5kZSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMiwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMywgX3RvZGF5c1BlcmlvZEFyciRpbmRlNCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTMsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE0LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTYsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE3LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTksIF90b2RheXNQZXJpb2RBcnIkaW5kZTIwOwoKICAgICAgICBpZiAoY3VycmVudFRpbWUgPCBmb3JtYXR0ZWRUaW1lKChfdG9kYXlzUGVyaW9kQXJyJGluZGUgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIuaG91cnMsIChfdG9kYXlzUGVyaW9kQXJyJGluZGUzID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTQgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUzLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTQubWludXRlcykgLy8gY2xvc2VkOiBiZWZvcmUgc3RvcmUgb3BlbmluZwogICAgICAgICkgewogICAgICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkaW5kZTUsIF90b2RheXNQZXJpb2RBcnIkaW5kZTYsIF90b2RheXNQZXJpb2RBcnIkaW5kZTcsIF90b2RheXNQZXJpb2RBcnIkaW5kZTgsIF90b2RheXNQZXJpb2RBcnIkaW5kZTksIF90b2RheXNQZXJpb2RBcnIkaW5kZTEwLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTI7CgogICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTUgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTUub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlNi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTcgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTcub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlOC5taW51dGVzOwogICAgICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTkgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTAgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGU5LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTAuaG91cnM7CiAgICAgICAgICBjbG9zaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxMSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTExID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTIgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTEyLm1pbnV0ZXM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUaW1lID49IGZvcm1hdHRlZFRpbWUoKF90b2RheXNQZXJpb2RBcnIkaW5kZTEzID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTEzLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNC5ob3VycywgKF90b2RheXNQZXJpb2RBcnIkaW5kZTE1ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTE1Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNi5taW51dGVzKSAmJiBjdXJyZW50VGltZSA8IGZvcm1hdHRlZFRpbWUoKF90b2RheXNQZXJpb2RBcnIkaW5kZTE3ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTE3LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTguaG91cnMsIChfdG9kYXlzUGVyaW9kQXJyJGluZGUxOSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjAgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIwLm1pbnV0ZXMpKSB7CiAgICAgICAgICB2YXIgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjEsIF90b2RheXNQZXJpb2RBcnIkaW5kZTIyLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMywgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjQsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI1LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNiwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjcsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI4OwoKICAgICAgICAgIC8vIHN0b3JlIGlzIG9wZW4KICAgICAgICAgIGNsb3NpbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyMSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIxID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjIgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIyLmhvdXJzOwogICAgICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTI0ID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNC5taW51dGVzOwogICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTI1ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTI1Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTI3ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTI3Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyOC5taW51dGVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2RheSwgX2NvdW50KSB7CiAgICAgICAgICAgIHZhciBfcGxhY2Ukb3BlbmluZ19ob3VyczYsIF9wbGFjZSRvcGVuaW5nX2hvdXJzNzsKCiAgICAgICAgICAgIHZhciBkYXlQZXJpb2RBcnIgPSAoX3BsYWNlJG9wZW5pbmdfaG91cnM2ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM3ID0gX3BsYWNlJG9wZW5pbmdfaG91cnM2LnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM3LmZpbHRlcihmdW5jdGlvbiAocmVxZERheSkgewogICAgICAgICAgICAgIHZhciBfcmVxZERheSRjbG9zZTM7CgogICAgICAgICAgICAgIHJldHVybiAocmVxZERheSA9PT0gbnVsbCB8fCByZXFkRGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3JlcWREYXkkY2xvc2UzID0gcmVxZERheS5jbG9zZSkgPT09IG51bGwgfHwgX3JlcWREYXkkY2xvc2UzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxZERheSRjbG9zZTMuZGF5KSA9PT0gX2RheTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIWRheVBlcmlvZEFyci5sZW5ndGgpIHsKICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgX2RheVBlcmlvZEFyciQzLCBfZGF5UGVyaW9kQXJyJDMkb3BlbiwgX2RheVBlcmlvZEFyciQ0LCBfZGF5UGVyaW9kQXJyJDQkb3BlbiwgX3RvZGF5c1BlcmlvZEFyciQ1LCBfdG9kYXlzUGVyaW9kQXJyJDUkY2wsIF90b2RheXNQZXJpb2RBcnIkNiwgX3RvZGF5c1BlcmlvZEFyciQ2JGNsOwoKICAgICAgICAgICAgICBkYXlJbmRleCA9IE1hdGguYWJzKF9kYXkgLSBjdXJyZW50RGF5KSA+IDEgPyBfZGF5IDogJyc7CiAgICAgICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF9kYXlQZXJpb2RBcnIkMyA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQzJG9wZW4gPSBfZGF5UGVyaW9kQXJyJDMub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQzJG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkMyRvcGVuLmhvdXJzOwogICAgICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF9kYXlQZXJpb2RBcnIkNCA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQ0JG9wZW4gPSBfZGF5UGVyaW9kQXJyJDQub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQ0JG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkNCRvcGVuLm1pbnV0ZXM7CiAgICAgICAgICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkNSA9IHRvZGF5c1BlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciQ1JGNsID0gX3RvZGF5c1BlcmlvZEFyciQ1LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDUkY2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkNSRjbC5ob3VyczsKICAgICAgICAgICAgICBjbG9zaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJDYgPSB0b2RheXNQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkNiRjbCA9IF90b2RheXNQZXJpb2RBcnIkNi5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ2JGNsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDYkY2wubWludXRlczsKICAgICAgICAgICAgICByZXR1cm4gImJyZWFrIjsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICAvLyBjbG9zZWQ6IGFmdGVyIHN0b3JlIGNsb3NpbmcuIFdlIG5lZWQgbmV4dCBhY3RpdmUgZGF5J3Mgb3BlbmluZ0hvdXJzCiAgICAgICAgICBmb3IgKHZhciBfZGF5ID0gKGN1cnJlbnREYXkgKyAxKSAlIDcsIF9jb3VudCA9IDA7IF9jb3VudCA8IDY7IF9kYXkgPSAoX2RheSArIDEpICUgNywgX2NvdW50KyspIHsKICAgICAgICAgICAgdmFyIF9yZXQyID0gX2xvb3AyKF9kYXksIF9jb3VudCk7CgogICAgICAgICAgICBpZiAoX3JldDIgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoX3JldDIgPT09ICJicmVhayIpIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIGNsb3NpbmdUaW1lOiB0b1JlZ3VsYXJUaW1lKHsKICAgICAgZGF5SW5kZXg6IGRheUluZGV4LAogICAgICBob3VyczogY2xvc2luZ0hvdXJzLAogICAgICBtaW51dGVzOiBjbG9zaW5nTWludXRlcwogICAgfSkgfHwgJ04vQScsCiAgICBvcGVuaW5nVGltZTogdG9SZWd1bGFyVGltZSh7CiAgICAgIGRheUluZGV4OiBkYXlJbmRleCwKICAgICAgaG91cnM6IG9wZW5pbmdIb3VycywKICAgICAgbWludXRlczogb3BlbmluZ01pbnV0ZXMKICAgIH0pIHx8ICdOL0EnCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBmZXRjaEFkZHJlc3NJbmZvOiBmdW5jdGlvbiBmZXRjaEFkZHJlc3NJbmZvKF9yZWYsIF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgc2hpcHBpbmdBZGRyZXNzLCByZXR1cm5NZXRob2RzLCBpc1JldHVybk1ldGhvZENvbW1pdGVkLCB1cGRhdGVkTWV0aG9kczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MgPSBfcmVmMi5zaGlwcGluZ0FkZHJlc3MsIHJldHVybk1ldGhvZHMgPSBfcmVmMi5yZXR1cm5NZXRob2RzOwogICAgICAgICAgICAgIGlzUmV0dXJuTWV0aG9kQ29tbWl0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB1cGRhdGVkTWV0aG9kcyA9IFtdOyAvLyBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKQoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXR1cm5NZXRob2RzLm1hcCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9zaGlwcGluZ0FkZHJlc3MkemlwXzsKCiAgICAgICAgICAgICAgICAgIHZhciB0eXBlLCBkaXN0YW5jZVRocmVzaG9sZCwgbmFtZSwgX3NoaXBwaW5nQWRkcmVzcyR6aXBfMiwgc3RyZWV0MSwgc3RhdGUsIHppcENvZGUsIGNpdHksIGxvb2t1cEtleSwga2V5cywgck1ldGhvZHMsIHBsYWNlcywgdmFsaWRQbGFjZXMsIG9wZXJhdGlvbmFsU3RvcmVzLCBpbmRleCwgcmVzdWx0LCBwbGFjZUlkLCBwbGFjZSwgZGlzdGFuY2UsIF9wbGFjZSRvcGVuaW5nX2hvdXJzOCwgX3BsYWNlJG9wZW5pbmdfaG91cnM5LCBfcGxhY2Ukb3BlbmluZ19ob3VyczEwLCBfcGxhY2Ukb3BlbmluZ19ob3VyczExLCBfcGxhY2Ukb3BlbmluZ19ob3VyczEyLCBfcGxhY2Ukb3BlbmluZ19ob3VyczEzOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBtZXRob2QudHlwZSwgZGlzdGFuY2VUaHJlc2hvbGQgPSBtZXRob2QuZGlzdGFuY2VUaHJlc2hvbGQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGUgPT09IENPTlNUQU5UUy5SRVRVUk5fTUVUSE9EUy5NQUlMX0JBQ0spKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmF1bHQgdG9sZXJhbmNlIC0gYWx3YXlzIHN1cmZhY2UgbWFpbGJhY2sgb3B0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRNZXRob2RzLnB1c2goX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1ldGhvZCA9PT0gbnVsbCB8fCBtZXRob2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1ldGhvZC5jdXN0b21lcl9mYWNpbmdfY2FycmllcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzaGlwcGluZ0FkZHJlc3MgPT09IG51bGwgfHwgc2hpcHBpbmdBZGRyZXNzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NoaXBwaW5nQWRkcmVzcyR6aXBfID0gc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlKSA9PT0gbnVsbCB8fCBfc2hpcHBpbmdBZGRyZXNzJHppcF8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zaGlwcGluZ0FkZHJlc3MkemlwXy5sZW5ndGgpID4gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlID0gc2hpcHBpbmdBZGRyZXNzID09PSBudWxsIHx8IHNoaXBwaW5nQWRkcmVzcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zaGlwcGluZ0FkZHJlc3MkemlwXzIgPSBzaGlwcGluZ0FkZHJlc3MuemlwX2NvZGUpID09PSBudWxsIHx8IF9zaGlwcGluZ0FkZHJlc3MkemlwXzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zaGlwcGluZ0FkZHJlc3MkemlwXzIuc3Vic3RyaW5nKDAsIDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWV0MSA9IHNoaXBwaW5nQWRkcmVzcy5zdHJlZXQxLCBzdGF0ZSA9IHNoaXBwaW5nQWRkcmVzcy5zdGF0ZSwgemlwQ29kZSA9IHNoaXBwaW5nQWRkcmVzcy56aXBfY29kZSwgY2l0eSA9IHNoaXBwaW5nQWRkcmVzcy5jaXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cEtleSA9ICIiLmNvbmNhdChzdGF0ZSwgIl8iKS5jb25jYXQoemlwQ29kZSwgIl8iKS5jb25jYXQoY2l0eSwgIl8iKS5jb25jYXQobmFtZSwgIl8iKS5jb25jYXQodHlwZSwgIl9pbmZvIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0gZ2V0TG9va3VwS2V5cyhPYmplY3Qua2V5cyhHT09HTEVfTUFQX0FQSV9DQUNIRSksIGxvb2t1cEtleSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgck1ldGhvZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoR09PR0xFX01BUF9BUElfQ0FDSEVba2V5XSAmJiBHT09HTEVfTUFQX0FQSV9DQUNIRVtrZXldLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgck1ldGhvZHMucHVzaChHT09HTEVfTUFQX0FQSV9DQUNIRVtrZXldWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZU1ldGhvZHMnLCByTWV0aG9kcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXR1cm5NZXRob2RDb21taXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0UGxhY2VzKHNoaXBwaW5nQWRkcmVzcywgbmFtZSwgdHlwZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsYWNlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0UGxhY2VzKHNoaXBwaW5nQWRkcmVzcywgbmFtZSwgdHlwZSwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsYWNlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFBsYWNlcyA9IHBsYWNlcy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRTdG9yZU5hbWUocGxhY2UubmFtZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHZhbGlkUGxhY2VzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXRQbGFjZXMoc2hpcHBpbmdBZGRyZXNzLCBuYW1lLCB0eXBlLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGxhY2VzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkUGxhY2VzID0gcGxhY2VzLmZpbHRlcihmdW5jdGlvbiAocGxhY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZFN0b3JlTmFtZShwbGFjZS5uYW1lLCB0eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodmFsaWRQbGFjZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uYWxTdG9yZXMgPSB2YWxpZFBsYWNlcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVzaW5lc3NTdGF0dXMgPSBfcmVmNC5idXNpbmVzc19zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWJ1c2luZXNzU3RhdHVzID8gdHJ1ZSA6IGJ1c2luZXNzU3RhdHVzID09PSAnT1BFUkFUSU9OQUwnOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvcGVyYXRpb25hbFN0b3Jlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgICAgICAgICAgICBHT09HTEVfTUFQX0FQSV9DQUNIRVtsb29rdXBLZXldID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpbmRleCA8IG9wZXJhdGlvbmFsU3RvcmVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1ODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gb3BlcmF0aW9uYWxTdG9yZXNbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlSWQgPSByZXN1bHQucGxhY2VfaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ0OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXREZXRhaWxzKHBsYWNlSWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ3OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXREaXN0YW5jZSgiIi5jb25jYXQoc3RyZWV0MSwgIiwgIikuY29uY2F0KGNpdHksICIsICIpLmNvbmNhdChzdGF0ZSwgIiAiKS5jb25jYXQoemlwQ29kZSksIHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdG9yZVdpdGhpbkRpc3RhbmNlKGRpc3RhbmNlID09PSBudWxsIHx8IGRpc3RhbmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkaXN0YW5jZS5kaXN0YW5jZSwgZGlzdGFuY2VUaHJlc2hvbGQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImNvbnRpbnVlIiwgNTUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICBHT09HTEVfTUFQX0FQSV9DQUNIRVtsb29rdXBLZXldLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCksIGRpc3RhbmNlKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBob25lTnVtYmVyOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhY2UuZm9ybWF0dGVkX3Bob25lX251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5pbmdIb3VyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09wZW46IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM4ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczguaXNPcGVuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtkYXlfdGV4dDogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczkgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZSRvcGVuaW5nX2hvdXJzOS53ZWVrZGF5X3RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZHM6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMxMCA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzMTAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZSRvcGVuaW5nX2hvdXJzMTAucGVyaW9kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kYXlDbG9zaW5nVGltZTogZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lKHBsYWNlKS5jbG9zaW5nVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kYXlPcGVuaW5nVGltZTogZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lKHBsYWNlKS5vcGVuaW5nVGltZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkTWV0aG9kcy5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpLCBkaXN0YW5jZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQaG9uZU51bWJlcjogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmZvcm1hdHRlZF9waG9uZV9udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuaW5nSG91cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTEgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczExLmlzT3BlbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5X3RleHQ6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMxMiA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZSRvcGVuaW5nX2hvdXJzMTIud2Vla2RheV90ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJpb2RzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTMgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczEzLnBlcmlvZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5Q2xvc2luZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkuY2xvc2luZ1RpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCA1OCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSgpKSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFkZHJlc3MgSW5mbycsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDIudDAKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgaWYgKCFpc1JldHVybk1ldGhvZENvbW1pdGVkKSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZU1ldGhvZHMnLCB1cGRhdGVkTWV0aG9kcyk7CiAgICAgICAgICAgICAgfSAvLyBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSkKCgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbNCwgOV1dKTsKICAgIH0pKSgpOwogIH0sCiAgZmV0Y2hOZWFyYnlDYXJyaWVyczogZnVuY3Rpb24gZmV0Y2hOZWFyYnlDYXJyaWVycyhfcmVmNSwgX3JlZjYpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgY29tbWl0LCBjYXJyaWVyLCBzaGlwcGluZ0FkZHJlc3MsIHR5cGUsIGRpc3RhbmNlVGhyZXNob2xkLCBuYW1lLCBzdHJlZXQxLCBzdGF0ZSwgemlwQ29kZSwgY2l0eSwgcGxhY2VzLCByZXN1bHRzLCBjYXJyaWVycywgX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiwgX2RpZEl0ZXJhdG9yRXJyb3IsIF9pdGVyYXRvckVycm9yLCBfaXRlcmF0b3IsIF9zdGVwLCByZXN1bHQsIHBsYWNlSWQsIHBsYWNlLCBkaXN0YW5jZSwgX3BsYWNlLCBfcGxhY2UyLCBfcGxhY2UzLCBfcGxhY2UzJG9wZW5pbmdfaG91cnMsIF9wbGFjZTQsIF9wbGFjZTQkb3BlbmluZ19ob3VycywgX3BsYWNlNSwgX3BsYWNlNSRvcGVuaW5nX2hvdXJzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICAgICAgICAgICAgY2FycmllciA9IF9yZWY2LmNhcnJpZXIsIHNoaXBwaW5nQWRkcmVzcyA9IF9yZWY2LnNoaXBwaW5nQWRkcmVzczsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKTsKICAgICAgICAgICAgICB0eXBlID0gY2Fycmllci50eXBlLCBkaXN0YW5jZVRocmVzaG9sZCA9IGNhcnJpZXIuZGlzdGFuY2VUaHJlc2hvbGQ7CiAgICAgICAgICAgICAgbmFtZSA9IGNhcnJpZXIgPT09IG51bGwgfHwgY2FycmllciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2Fycmllci5jdXN0b21lcl9mYWNpbmdfY2FycmllcjsKICAgICAgICAgICAgICBzdHJlZXQxID0gc2hpcHBpbmdBZGRyZXNzLnN0cmVldDEsIHN0YXRlID0gc2hpcHBpbmdBZGRyZXNzLnN0YXRlLCB6aXBDb2RlID0gc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlLCBjaXR5ID0gc2hpcHBpbmdBZGRyZXNzLmNpdHk7IC8vIGNvbnN0IGxvb2t1cEtleSA9IGAke3N0YXRlfV8ke3ppcENvZGV9XyR7Y2l0eX1fJHtuYW1lfV8ke3R5cGV9X25lYXJieWAKCiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0UGxhY2VzKHNoaXBwaW5nQWRkcmVzcywgbmFtZSwgdHlwZSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcGxhY2VzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgcmVzdWx0cyA9IHBsYWNlcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWY3KSB7CiAgICAgICAgICAgICAgICB2YXIgYnVzaW5lc3NTdGF0dXMgPSBfcmVmNy5idXNpbmVzc19zdGF0dXM7CiAgICAgICAgICAgICAgICByZXR1cm4gIWJ1c2luZXNzU3RhdHVzID8gdHJ1ZSA6IGJ1c2luZXNzU3RhdHVzID09PSAnT1BFUkFUSU9OQUwnOwogICAgICAgICAgICAgIH0pOyAvLyBPbmx5IGNhbGN1bGF0ZSBkaXN0YW5jZSBmb3IgYSBtYXggb2YgdGVuIHJlc3VsdHMKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMTApIHsKICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLnNsaWNlKDAsIDEwKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhcnJpZXJzID0gW107CiAgICAgICAgICAgICAgX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNTsKICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfYXN5bmNJdGVyYXRvcihyZXN1bHRzKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICByZXR1cm4gX2l0ZXJhdG9yLm5leHQoKTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgaWYgKCEoX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiA9ICEoX3N0ZXAgPSBfY29udGV4dDMuc2VudCkuZG9uZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJlc3VsdCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgIHBsYWNlSWQgPSByZXN1bHQucGxhY2VfaWQ7CiAgICAgICAgICAgICAgcGxhY2UgPSBHT09HTEVfTUFQX0FQSV9QSURfQ0FDSEVbcGxhY2VJZF07CiAgICAgICAgICAgICAgZGlzdGFuY2UgPSBHT09HTEVfTUFQX0FQSV9ESVNUX0NBQ0hFW3BsYWNlSWRdOwoKICAgICAgICAgICAgICBpZiAoISghcGxhY2UgfHwgIWRpc3RhbmNlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNzsKICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoMjAwKTsKCiAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOTsKICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGV0YWlscyhwbGFjZUlkKTsKCiAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgcGxhY2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBHT09HTEVfTUFQX0FQSV9QSURfQ0FDSEVbcGxhY2VJZF0gPSBwbGFjZTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMzOwogICAgICAgICAgICAgIHJldHVybiBzbGVlcCgyMDApOwoKICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM1OwogICAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXREaXN0YW5jZSgiIi5jb25jYXQoc3RyZWV0MSwgIiwgIikuY29uY2F0KGNpdHksICIsICIpLmNvbmNhdChzdGF0ZSwgIiAiKS5jb25jYXQoemlwQ29kZSksIHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzKTsKCiAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgZGlzdGFuY2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBHT09HTEVfTUFQX0FQSV9ESVNUX0NBQ0hFW3BsYWNlSWRdID0gZGlzdGFuY2U7CgogICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgIGlmIChpc1N0b3JlV2l0aGluRGlzdGFuY2UoZGlzdGFuY2UuZGlzdGFuY2UsIGRpc3RhbmNlVGhyZXNob2xkKSAmJiB2YWxpZFN0b3JlTmFtZShwbGFjZS5uYW1lLCB0eXBlKSkgewogICAgICAgICAgICAgICAgY2FycmllcnMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY2FycmllciksIGRpc3RhbmNlKSwge30sIHsKICAgICAgICAgICAgICAgICAgbmFtZTogcGxhY2UubmFtZSwKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGhvbmVOdW1iZXI6IChfcGxhY2UgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2UuZm9ybWF0dGVkX3Bob25lX251bWJlciwKICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogKF9wbGFjZTIgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlMi5mb3JtYXR0ZWRfYWRkcmVzcywKICAgICAgICAgICAgICAgICAgaWNvbjogcmVzdWx0Lmljb24sCiAgICAgICAgICAgICAgICAgIG9wZW5pbmdIb3VyczogewogICAgICAgICAgICAgICAgICAgIGlzT3BlbjogKF9wbGFjZTMgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZTMkb3BlbmluZ19ob3VycyA9IF9wbGFjZTMub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlMyRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2UzJG9wZW5pbmdfaG91cnMuaXNPcGVuKCksCiAgICAgICAgICAgICAgICAgICAgd2Vla2x5UmFuZ2U6IGNoZWNrTWFwc1BvbGljeSgpID8gZ2V0V2Vla2x5UmFuZ2UocGxhY2UpIDogJycsCiAgICAgICAgICAgICAgICAgICAgd2Vla2RheV90ZXh0OiAoX3BsYWNlNCA9IHBsYWNlKSA9PT0gbnVsbCB8fCBfcGxhY2U0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlNCRvcGVuaW5nX2hvdXJzID0gX3BsYWNlNC5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2U0JG9wZW5pbmdfaG91cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZTQkb3BlbmluZ19ob3Vycy53ZWVrZGF5X3RleHQsCiAgICAgICAgICAgICAgICAgICAgcGVyaW9kczogKF9wbGFjZTUgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZTUkb3BlbmluZ19ob3VycyA9IF9wbGFjZTUub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlNSRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2U1JG9wZW5pbmdfaG91cnMucGVyaW9kcywKICAgICAgICAgICAgICAgICAgICB0b2RheUNsb3NpbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLmNsb3NpbmdUaW1lLAogICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDM7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDE1KTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDMudDA7CgogICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDc7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA0ODsKCiAgICAgICAgICAgICAgaWYgKCEoX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgIHJldHVybiBfaXRlcmF0b3IucmV0dXJuKCk7CgogICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTI7CgogICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg1Mik7CgogICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDQ3KTsKCiAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgY2FycmllcnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuICthLmRpc3RhbmNlLnNwbGl0KCcgJylbMF0gLSArYi5kaXN0YW5jZS5zcGxpdCgnICcpWzBdOwogICAgICAgICAgICAgIH0pLnNsaWNlKDAsIDMpOyAvLyBHT09HTEVfTUFQX0FQSV9DQUNIRVtsb29rdXBLZXldID0gY2FycmllcnMKCiAgICAgICAgICAgICAgY29tbWl0KCdzZXROZWFyYnlDYXJyaWVycycsIGNhcnJpZXJzKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2ODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA2MjsKICAgICAgICAgICAgICBfY29udGV4dDMudDEgPSBfY29udGV4dDNbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbmVhcmJ5IGxvY2F0aW9ucycsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDMudDEKICAgICAgICAgICAgICB9KTsgLy8gZGVsZXRlIEdPT0dMRV9NQVBfQVBJX0NBQ0hFW2xvb2t1cEtleV0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2NzsKICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoNTAwMCk7CgogICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdyZXR1cm5zL2ZldGNoTmVhcmJ5Q2FycmllcnMnLCB7CiAgICAgICAgICAgICAgICBjYXJyaWVyOiBjYXJyaWVyLAogICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s2LCA2Ml0sIFsxNSwgNDMsIDQ3LCA1N10sIFs0OCwsIDUyLCA1Nl1dKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js"],"names":["googleMapsService","toRegularTime","isStoreWithinDistance","getLookupKeys","dayOfWeekAsString","store","validStoreName","checkMapsPolicy","CONSTANTS","formattedTime","hours","minutes","parseInt","sleep","milliseconds","Promise","resolve","setTimeout","GOOGLE_MAP_API_CACHE","GOOGLE_MAP_API_PID_CACHE","GOOGLE_MAP_API_DIST_CACHE","getWeeklyRange","place","formattedWeeklyRange","dateRange","timeRange","weeklyRange","opening_hours","periods","reduce","acc","day","open","start","end","startHour","startMinute","close","endHour","endMinute","slice","dayIndex","getFormattedStoreTime","closingHours","openingHours","openingMinutes","closingMinutes","currentDay","Date","getDay","currentTime","getHours","getMinutes","todaysPeriodArr","filter","reqdDay","length","count","dayPeriodArr","Math","abs","index","closingTime","openingTime","fetchAddressInfo","commit","shippingAddress","returnMethods","isReturnMethodCommited","updatedMethods","all","map","method","type","distanceThreshold","RETURN_METHODS","MAIL_BACK","push","name","customer_facing_carrier","zip_code","substring","street1","state","zipCode","city","lookupKey","keys","Object","rMethods","key","getPlaces","places","validPlaces","operationalStores","businessStatus","business_status","result","placeId","place_id","getDetails","getDistance","formatted_address","distance","formattedPhoneNumber","formatted_phone_number","formattedAddress","isOpen","weekday_text","todayClosingTime","todayOpeningTime","console","error","fetchNearbyCarriers","carrier","results","carriers","icon","sort","a","b","split","dispatch"],"mappings":"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","sourcesContent":["import googleMapsService from '@/common/googleMaps.service'\nimport { toRegularTime, isStoreWithinDistance, getLookupKeys, dayOfWeekAsString } from '@/utils'\nimport store from '@/store'\nimport { validStoreName } from '@/controllers/ReturnMethodsController.js'\nimport { checkMapsPolicy } from '@/controllers/MapController.js'\nimport { CONSTANTS } from '@/constants/index.js'\n\n// in HHMM format\nconst formattedTime = (hours, minutes) => {\n  return parseInt(`${hours}${minutes < 10 ? '0' + minutes : minutes}`)\n}\n\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\nconst GOOGLE_MAP_API_CACHE = {}\nconst GOOGLE_MAP_API_PID_CACHE = {}\nconst GOOGLE_MAP_API_DIST_CACHE = {}\n\nconst getWeeklyRange = (place) => {\n  const formattedWeeklyRange = { dateRange: '', timeRange: '' }\n\n  const weeklyRange = place?.opening_hours?.periods?.reduce((acc, day) => {\n    // if earliest found open day, set as start\n    if (day?.open?.day <= acc?.dateRange?.start) {\n      acc.dateRange.start = day?.open?.day\n    }\n    // if latest found open day, set as end\n    if (day?.open?.day >= acc?.dateRange?.end) {\n      acc.dateRange.end = day?.open?.day\n    }\n    // check if current day open is later than stored\n    if (day?.open?.hours >= acc?.timeRange?.startHour) {\n      if (day?.open?.minutes >= acc?.timeRange?.startMinute) {\n        acc.timeRange.startMinute = day?.open?.minutes\n      }\n      acc.timeRange.startHour = day?.open?.hours\n    }\n    // check if current day close is earlier than stored\n    if (day?.close?.hours <= acc?.timeRange?.endHour || !acc?.timeRange?.endHour) {\n      if (day?.close?.minutes <= acc?.timeRange?.endMinute || !acc?.timeRange?.endMinute) {\n        acc.timeRange.endMinute = day?.open?.minutes\n      }\n      acc.timeRange.endHour = day?.close?.hours\n    }\n    return acc\n  }, { dateRange: { start: '', end: '' }, timeRange: { startHour: '', startMinute: '', endHour: '', endMinute: '' } })\n\n  // reformat for human-readable\n  formattedWeeklyRange.dateRange = `${dayOfWeekAsString([weeklyRange?.dateRange?.start === 0 ? 1 : weeklyRange?.dateRange?.start]).slice(0, 3)} - ${dayOfWeekAsString([weeklyRange?.dateRange?.end]).slice(0, 3)}`\n\n  formattedWeeklyRange.timeRange = `${toRegularTime({ dayIndex: '', hours: weeklyRange?.timeRange?.startHour, minutes: weeklyRange?.timeRange?.startMinute })}\n  - ${toRegularTime({ hours: weeklyRange?.timeRange?.endHour, minutes: weeklyRange?.timeRange?.endMinute || 0 })}`\n\n  return formattedWeeklyRange\n}\n\nconst getFormattedStoreTime = (place) => {\n  let closingHours = null\n  let openingHours = null\n  let openingMinutes = null\n  let closingMinutes = null\n  let dayIndex = ''\n\n  const currentDay = new Date().getDay()\n  const currentTime = formattedTime(new Date().getHours(), new Date().getMinutes())\n  const todaysPeriodArr = place.opening_hours?.periods?.filter(\n    (reqdDay) => reqdDay?.close?.day === currentDay\n  )\n  // todaysPeriod array can be of any length\n\n  if (todaysPeriodArr) {\n    if (!todaysPeriodArr.length) { // holiday\n      for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n        const dayPeriodArr = place.opening_hours?.periods?.filter(\n          (reqdDay) => reqdDay?.close?.day === day\n        )\n        if (!dayPeriodArr.length) {\n          continue\n        } else {\n          dayIndex = Math.abs(day - currentDay) > 1 ? day : '' // show day of the week only when its not the next day\n          openingHours = dayPeriodArr[0]?.open?.hours\n          openingMinutes = dayPeriodArr[0]?.open?.minutes\n          break\n        }\n      }\n    } else if (todaysPeriodArr.length === 1) {\n    // only one closing and opening time for a day\n      closingHours = todaysPeriodArr[0]?.close?.hours\n      closingMinutes = todaysPeriodArr[0]?.close?.minutes\n      openingHours = todaysPeriodArr[0]?.open?.hours\n      openingMinutes = todaysPeriodArr[0]?.open?.minutes\n    } else {\n    // store open in breaks in a day\n      for (let index = 0; index < todaysPeriodArr.length; index++) {\n        if (currentTime < formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes\n        ) // closed: before store opening\n        ) {\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          break\n        } else if (currentTime >= formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes) && currentTime < formattedTime(todaysPeriodArr[index]?.close?.hours, todaysPeriodArr[index]?.close?.minutes)) { // store is open\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          break\n        } else {\n        // closed: after store closing. We need next active day's openingHours\n          for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n            const dayPeriodArr = place.opening_hours?.periods?.filter(\n              (reqdDay) => reqdDay?.close?.day === day\n            )\n            if (!dayPeriodArr.length) {\n              continue\n            } else {\n              dayIndex = Math.abs(day - currentDay) > 1 ? day : ''\n              openingHours = dayPeriodArr[0]?.open?.hours\n              openingMinutes = dayPeriodArr[0]?.open?.minutes\n              closingHours = todaysPeriodArr[0]?.close?.hours\n              closingMinutes = todaysPeriodArr[0]?.close?.minutes\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  return {\n    closingTime: toRegularTime({ dayIndex, hours: closingHours, minutes: closingMinutes }) || 'N/A',\n    openingTime: toRegularTime({ dayIndex, hours: openingHours, minutes: openingMinutes }) || 'N/A'\n  }\n}\n\nexport default {\n  async fetchAddressInfo ({ commit }, { shippingAddress, returnMethods }) {\n    var isReturnMethodCommited = false\n    const updatedMethods = []\n    // commit('setLoading', true)\n    try {\n      await Promise.all(\n        returnMethods.map(async (method) => {\n          const { type, distanceThreshold } = method\n          if (type === CONSTANTS.RETURN_METHODS.MAIL_BACK) { // fault tolerance - always surface mailback options\n            updatedMethods.push({\n              ...method\n            })\n            return\n          }\n          const name = method?.customer_facing_carrier\n          if (shippingAddress?.zip_code?.length > 5) {\n            shippingAddress.zip_code = shippingAddress?.zip_code?.substring(0, 5)\n          }\n          const { street1, state, zip_code: zipCode, city } = shippingAddress\n          const lookupKey = `${state}_${zipCode}_${city}_${name}_${type}_info`\n\n          if (GOOGLE_MAP_API_CACHE[lookupKey]) {\n            const keys = getLookupKeys(Object.keys(GOOGLE_MAP_API_CACHE), lookupKey)\n            var rMethods = []\n            keys.map(key => { if (GOOGLE_MAP_API_CACHE[key] && GOOGLE_MAP_API_CACHE[key].length > 0) { rMethods.push(GOOGLE_MAP_API_CACHE[key][0]) } })\n            commit('updateMethods', rMethods)\n            isReturnMethodCommited = true\n            return GOOGLE_MAP_API_CACHE[lookupKey]\n          }\n\n          // STEP 1: Get places for the specified zipcode, city and state\n          // STEP 2: Ensure the place name has specified names (storeNames) as mentioned in the policy\n          // STEP 3: Filter only OPERATIONAL stores. PERMANENTLY_CLOSED stores are eliminated\n          // STEP 4: Pick up the first operational, valid store (To be changed)\n\n          let places = await googleMapsService.getPlaces(shippingAddress, name, type)\n          if (places.length === 0) {\n            places = await googleMapsService.getPlaces(shippingAddress, name, type, true)\n            if (places.length === 0) {\n              return {\n                ...method\n              }\n            }\n          }\n\n          let validPlaces = places.filter((place) => validStoreName(place.name, type))\n          if (validPlaces.length === 0) {\n            places = await googleMapsService.getPlaces(shippingAddress, name, type, true)\n            if (places.length === 0) {\n              return {\n                ...method\n              }\n            }\n            validPlaces = places.filter((place) => validStoreName(place.name, type))\n            if (validPlaces.length === 0) {\n              return {\n                ...method\n              }\n            }\n          }\n\n          const operationalStores = validPlaces.filter(\n            ({ business_status: businessStatus }) =>\n              !businessStatus ? true : businessStatus === 'OPERATIONAL'\n          )\n          if (operationalStores.length === 0) {\n            return {\n              ...method\n            }\n          }\n\n          GOOGLE_MAP_API_CACHE[lookupKey] = []\n\n          for (let index = 0; index < operationalStores.length; index++) {\n            const result = operationalStores[index]\n\n            const { place_id: placeId } = result\n\n            const place = await googleMapsService.getDetails(placeId)\n\n            // TODO: If distance is greater than threshold, then call it again by not specifying the street1\n            const distance = await googleMapsService.getDistance(\n            `${street1}, ${city}, ${state} ${zipCode}`,\n            place.formatted_address\n            )\n\n            if (!isStoreWithinDistance(distance?.distance, distanceThreshold)) {\n              continue\n            } else {\n              GOOGLE_MAP_API_CACHE[lookupKey].push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              updatedMethods.push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              break\n            }\n          }\n        })\n      )\n    } catch (error) {\n      console.error('Error fetching address Info', { error })\n    }\n\n    if (!isReturnMethodCommited) {\n      commit('updateMethods', updatedMethods)\n    }\n    // commit('setLoading', false)\n  },\n  async fetchNearbyCarriers ({ commit }, { carrier, shippingAddress }) {\n    commit('setLoading', true)\n    const { type, distanceThreshold } = carrier\n    const name = carrier?.customer_facing_carrier\n    const { street1, state, zip_code: zipCode, city } = shippingAddress\n    // const lookupKey = `${state}_${zipCode}_${city}_${name}_${type}_nearby`\n    try {\n      // if (GOOGLE_MAP_API_CACHE[lookupKey]) {\n      //   commit('setNearbyCarriers', GOOGLE_MAP_API_CACHE[lookupKey])\n      //   commit('setLoading', false)\n      //   return\n      // }\n      const places = await googleMapsService.getPlaces(shippingAddress, name, type)\n\n      let results = places\n        .filter(\n          ({ business_status: businessStatus }) =>\n            !businessStatus ? true : businessStatus === 'OPERATIONAL'\n        )\n      // Only calculate distance for a max of ten results\n      if (results.length > 10) {\n        results = results.slice(0, 10)\n      }\n\n      const carriers = []\n      for await (const result of results) {\n        const { place_id: placeId } = result\n\n        var place = GOOGLE_MAP_API_PID_CACHE[placeId]\n        var distance = GOOGLE_MAP_API_DIST_CACHE[placeId]\n\n        if (!place || !distance) {\n          await sleep(200)\n          place = await googleMapsService.getDetails(placeId)\n          GOOGLE_MAP_API_PID_CACHE[placeId] = place\n\n          await sleep(200)\n          distance = await googleMapsService.getDistance(\n            `${street1}, ${city}, ${state} ${zipCode}`,\n            place.formatted_address\n          )\n\n          GOOGLE_MAP_API_DIST_CACHE[placeId] = distance\n        }\n\n        if (isStoreWithinDistance(distance.distance, distanceThreshold) && validStoreName(place.name, type)) {\n          carriers.push({\n            ...carrier,\n            ...distance,\n            name: place.name,\n            formattedPhoneNumber: place?.formatted_phone_number,\n            formattedAddress: place?.formatted_address,\n            icon: result.icon,\n            openingHours: {\n              isOpen: place?.opening_hours?.isOpen(),\n              weeklyRange: checkMapsPolicy() ? getWeeklyRange(place) : '',\n              weekday_text: place?.opening_hours?.weekday_text,\n              periods: place?.opening_hours?.periods,\n              todayClosingTime: getFormattedStoreTime(place).closingTime,\n              todayOpeningTime: getFormattedStoreTime(place).openingTime\n            }\n          })\n        }\n      }\n\n      carriers.sort(\n        (a, b) => +a.distance.split(' ')[0] - +b.distance.split(' ')[0]\n      ).slice(0, 3)\n\n      // GOOGLE_MAP_API_CACHE[lookupKey] = carriers\n\n      commit('setNearbyCarriers', carriers)\n      commit('setLoading', false)\n    } catch (error) {\n      console.error('Error fetching nearby locations', { error })\n      // delete GOOGLE_MAP_API_CACHE[lookupKey]\n      await sleep(5000)\n      store.dispatch('returns/fetchNearbyCarriers', {\n        carrier: carrier,\n        shippingAddress: shippingAddress\n      })\n    }\n  }\n}\n"]}]}