{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/mapController.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/mapController.js","mtime":1652291589784},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvcmV0dXJuc19wb3J0YWxfdWkvcmV0dXJuc19wb3J0YWxfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwoKLyogZXNsaW50LWRpc2FibGUgcHJvbWlzZS9wYXJhbS1uYW1lcyAqLwppbXBvcnQgZ29vZ2xlTWFwc1NlcnZpY2UgZnJvbSAnQC9jb21tb24vZ29vZ2xlTWFwcy5zZXJ2aWNlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IHsgQ09OU1RBTlRTIH0gZnJvbSAnQC9jb25zdGFudHMvaW5kZXguanMnOwppbXBvcnQgeyBnZXREaXN0YW5jZVZhbHVlLCBkZWxheSB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgeyByZXR1cm5TaGlwcGluZ09wdGlvbnMgfSBmcm9tICdAL2NvbnRyb2xsZXJzL3JldHVybk1ldGhvZHNDb250cm9sbGVyLmpzJzsKZXhwb3J0IGZ1bmN0aW9uIGdldE5lYXJieVN0b3JlcyhfeCkgewogIHJldHVybiBfZ2V0TmVhcmJ5U3RvcmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8gcmV0dXJucyBlbXB0eSBzdHJpbmcgaWYgbm8gZXhwcmVzcyByZXR1cm5zCgpmdW5jdGlvbiBfZ2V0TmVhcmJ5U3RvcmVzKCkgewogIF9nZXROZWFyYnlTdG9yZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoc2hpcHBpbmdPcHRpb25zKSB7CiAgICB2YXIgc2hpcHBpbmdBZGRyZXNzLCBleHByZXNzUmV0dXJuczsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzID0gc3RvcmUuZ2V0dGVyc1sncmV0dXJucy9nZXRBZGRyZXNzJ107CiAgICAgICAgICAgIGV4cHJlc3NSZXR1cm5zID0gZ2V0RXhwcmVzc1JldHVybnMoc2hpcHBpbmdPcHRpb25zKTsKCiAgICAgICAgICAgIGlmIChleHByZXNzUmV0dXJucykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEV4cHJlc3MgUmV0dXJucyBBdmFpbGFibGUnKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3JldHVybnMvZmV0Y2hOZWFyYnlDYXJyaWVycycsIHsKICAgICAgICAgICAgICBjYXJyaWVyOiBleHByZXNzUmV0dXJucywKICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IHNoaXBwaW5nQWRkcmVzcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfZ2V0TmVhcmJ5U3RvcmVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXRFeHByZXNzUmV0dXJucyhzaGlwcGluZ09wdGlvbnMpIHsKICByZXR1cm4gc2hpcHBpbmdPcHRpb25zLmZpbmQoZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIG9wdGlvbi50eXBlID09PSBDT05TVEFOVFMuUkVUVVJOX01FVEhPRFMuRVhQUkVTU19SRVRVUk5TOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRTaGlwcGluZ0FkZHJlc3MoKSB7CiAgcmV0dXJuIF9nZXRTaGlwcGluZ0FkZHJlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldFNoaXBwaW5nQWRkcmVzcygpIHsKICBfZ2V0U2hpcHBpbmdBZGRyZXNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgIHZhciBzaGlwcGluZ0FkZHJlc3MsIGxhdExuZywgbWFya2VyOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzID0gc3RvcmUuZ2V0dGVyc1sncmV0dXJucy9mb3JtYXR0ZWRTaGlwcGluZ0FkZHJlc3MnXTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0TGF0TG5nKHNoaXBwaW5nQWRkcmVzcyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBsYXRMbmcgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgbWFya2VyID0gewogICAgICAgICAgICAgIGxhdDogbGF0TG5nLmxhdCwKICAgICAgICAgICAgICBsbmc6IGxhdExuZy5sbmcKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLAogICAgICAgICAgICAgIGFkZHJlc3M6IHNoaXBwaW5nQWRkcmVzcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CiAgcmV0dXJuIF9nZXRTaGlwcGluZ0FkZHJlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRm9yRXhwcmVzc0Ryb3BvZmZPcHRpb25zKF94MiwgX3gzKSB7CiAgcmV0dXJuIF9jaGVja0ZvckV4cHJlc3NEcm9wb2ZmT3B0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Ci8qKgogKgogKiBAcGFyYW0geyp9IGdldHRpbmdDb29yZHMKICogQHJldHVybnMgcGxhY2VzVG9Db29yZHMKICovCgpmdW5jdGlvbiBfY2hlY2tGb3JFeHByZXNzRHJvcG9mZk9wdGlvbnMoKSB7CiAgX2NoZWNrRm9yRXhwcmVzc0Ryb3BvZmZPcHRpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhyZXR1cm5NZXRob2RzLCBwb2xpY3lSZXR1cm5NZXRob2RzKSB7CiAgICB2YXIgZXhwcmVzc1JldHVybnNFbmFibGVkLCBfcG9saWN5JHBvbGljeV9yZXR1cm4sIF9wb2xpY3kkZmVhdHVyZV9mbGFncywgcG9saWN5LCBuZWFyYnlDYXJyaWVyczsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBleHByZXNzUmV0dXJuc0VuYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxOwogICAgICAgICAgICBwb2xpY3kgPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL3BvbGljaWVzJ107CiAgICAgICAgICAgIGV4cHJlc3NSZXR1cm5zRW5hYmxlZCA9IHBvbGljeSA9PT0gbnVsbCB8fCBwb2xpY3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcG9saWN5JHBvbGljeV9yZXR1cm4gPSBwb2xpY3kucG9saWN5X3JldHVybl9tZXRob2RzKSA9PT0gbnVsbCB8fCBfcG9saWN5JHBvbGljeV9yZXR1cm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wb2xpY3kkcG9saWN5X3JldHVybi5maW5kKGZ1bmN0aW9uIChtZXRob2QpIHsKICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kLnR5cGUgPT09IENPTlNUQU5UUy5SRVRVUk5fTUVUSE9EUy5FWFBSRVNTX1JFVFVSTlM7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKCEoKF9wb2xpY3kkZmVhdHVyZV9mbGFncyA9IHBvbGljeS5mZWF0dXJlX2ZsYWdzKSAhPT0gbnVsbCAmJiBfcG9saWN5JGZlYXR1cmVfZmxhZ3MgIT09IHZvaWQgMCAmJiBfcG9saWN5JGZlYXR1cmVfZmxhZ3MubWFwX2VuYWJsZWQgJiYgZXhwcmVzc1JldHVybnNFbmFibGVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgcmV0dXJuIGZpbmRBbGxFeHByZXNzUmV0dXJuTG9jYXRpb25zKHJldHVybk1ldGhvZHMsIHBvbGljeVJldHVybk1ldGhvZHMsIGZhbHNlKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIG5lYXJieUNhcnJpZXJzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGV4cHJlc3NSZXR1cm5zRW5hYmxlZCA9IG5lYXJieUNhcnJpZXJzLnBsYWNlc1RvQ29vcmRzLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGV4cHJlc3NSZXR1cm5zRW5hYmxlZCA9IGZhbHNlOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDMudDApOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBleHByZXNzUmV0dXJuc0VuYWJsZWQpOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEsIDE0XV0pOwogIH0pKTsKICByZXR1cm4gX2NoZWNrRm9yRXhwcmVzc0Ryb3BvZmZPcHRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXREcm9wb2ZmTG9jYXRpb25zKF94NCkgewogIHJldHVybiBfZ2V0RHJvcG9mZkxvY2F0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0RHJvcG9mZkxvY2F0aW9ucygpIHsKICBfZ2V0RHJvcG9mZkxvY2F0aW9ucyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoZ2V0dGluZ0Nvb3JkcykgewogICAgdmFyIHBsYWNlcywgbWFya2VycywgaSwgbGF0TG5nLCBtYXJrZXI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBwbGFjZXMgPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL2dldE5lYXJieUNhcnJpZXJzJ107IC8vIGlmIG9ubHkgY2hlY2tpbmcgaWYgbmVhcmJ5IGNhcnJpZXJzIGV4aXN0LCBkb250IGdldCB0aGUgY29vcmRzCgogICAgICAgICAgICBpZiAoZ2V0dGluZ0Nvb3JkcykgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHBsYWNlcyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBtYXJrZXJzID0gW107CiAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgaWYgKCEoaSA8IHBsYWNlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gZGVsYXkoNTAwKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBnb29nbGVNYXBzU2VydmljZS5nZXRMYXRMbmcocGxhY2VzW2ldLmZvcm1hdHRlZEFkZHJlc3MpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGxhdExuZyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICBtYXJrZXIgPSB7CiAgICAgICAgICAgICAgbGF0OiBsYXRMbmcubGF0LAogICAgICAgICAgICAgIGxuZzogbGF0TG5nLmxuZwogICAgICAgICAgICB9OwogICAgICAgICAgICBtYXJrZXJzLnB1c2goewogICAgICAgICAgICAgIGljb246IHBsYWNlc1tpXS5pY29uLAogICAgICAgICAgICAgIHBvc2l0aW9uOiBtYXJrZXIsCiAgICAgICAgICAgICAgYWRkcmVzczogcGxhY2VzW2ldLmZvcm1hdHRlZEFkZHJlc3MsCiAgICAgICAgICAgICAgZGlzdGFuY2U6IHBsYWNlc1tpXS5kaXN0YW5jZSAhPT0gbnVsbCA/IHBsYWNlc1tpXS5kaXN0YW5jZSA6IENPTlNUQU5UUy5VTktOT1dOLAogICAgICAgICAgICAgIGNsb3NpbmdUaW1lOiBwbGFjZXNbaV0ub3BlbmluZ0hvdXJzLnRvZGF5Q2xvc2luZ1RpbWUgIT09IG51bGwgPyBwbGFjZXNbaV0ub3BlbmluZ0hvdXJzLnRvZGF5Q2xvc2luZ1RpbWUgOiBDT05TVEFOVFMuVU5LTk9XTgogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBpKys7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIG1hcmtlcnMpOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CiAgcmV0dXJuIF9nZXREcm9wb2ZmTG9jYXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBmaW5kQWxsRXhwcmVzc1JldHVybkxvY2F0aW9ucyhfeDUsIF94NiwgX3g3KSB7CiAgcmV0dXJuIF9maW5kQWxsRXhwcmVzc1JldHVybkxvY2F0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZmluZEFsbEV4cHJlc3NSZXR1cm5Mb2NhdGlvbnMoKSB7CiAgX2ZpbmRBbGxFeHByZXNzUmV0dXJuTG9jYXRpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShyZXR1cm5NZXRob2RzLCBwb2xpY3lSZXR1cm5NZXRob2RzLCBnZXR0aW5nQ29vcmRzKSB7CiAgICB2YXIgc2hpcHBpbmdBZGRyZXNzLCBwbGFjZXNUb0Nvb3Jkcywgc2hpcHBpbmdPcHRpb25zOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKCFnZXR0aW5nQ29vcmRzKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBnZXRTaGlwcGluZ0FkZHJlc3MoKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcGxhY2VzVG9Db29yZHMgPSBbXTsKICAgICAgICAgICAgc2hpcHBpbmdPcHRpb25zID0gcmV0dXJuU2hpcHBpbmdPcHRpb25zKHJldHVybk1ldGhvZHMsIHBvbGljeVJldHVybk1ldGhvZHMpOwoKICAgICAgICAgICAgaWYgKCEoc2hpcHBpbmdPcHRpb25zICYmIHNoaXBwaW5nT3B0aW9ucy5sZW5ndGggPiAwICYmIGdldEV4cHJlc3NSZXR1cm5zKHNoaXBwaW5nT3B0aW9ucykpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gZ2V0TmVhcmJ5U3RvcmVzKHNoaXBwaW5nT3B0aW9ucyk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gZ2V0RHJvcG9mZkxvY2F0aW9ucyhnZXR0aW5nQ29vcmRzKTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBwbGFjZXNUb0Nvb3JkcyA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MsCiAgICAgICAgICAgICAgcGxhY2VzVG9Db29yZHM6IHBsYWNlc1RvQ29vcmRzCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU1KTsKICB9KSk7CiAgcmV0dXJuIF9maW5kQWxsRXhwcmVzc1JldHVybkxvY2F0aW9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gcmV0dXJuTWV0aG9kc1dpdGhpbkRpc3RhbmNlKGhhc01hcCkgewogIHZhciBwb3RlbnRpYWxSZXR1cm5NZXRob2RzID0gc3RvcmUuZ2V0dGVyc1sncmV0dXJucy9yZXR1cm5NZXRob2RzJ107CgogIGlmIChoYXNNYXApIHsKICAgIHBvdGVudGlhbFJldHVybk1ldGhvZHMgPSBwb3RlbnRpYWxSZXR1cm5NZXRob2RzLmZpbHRlcihmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgIHJldHVybiBtZXRob2QudHlwZSAhPT0gQ09OU1RBTlRTLlJFVFVSTl9NRVRIT0RTLkVYUFJFU1NfUkVUVVJOUzsKICAgIH0pOwogIH0KCiAgcmV0dXJuIHBvdGVudGlhbFJldHVybk1ldGhvZHMuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChtZXRob2QxLCBtZXRob2QyKSB7CiAgICByZXR1cm4gbWV0aG9kMS5yZXR1cm5NZXRob2RSYW5rIC0gbWV0aG9kMi5yZXR1cm5NZXRob2RSYW5rIHx8IGdldERpc3RhbmNlVmFsdWUobWV0aG9kMSA9PT0gbnVsbCB8fCBtZXRob2QxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRob2QxLmRpc3RhbmNlKSAtIGdldERpc3RhbmNlVmFsdWUobWV0aG9kMiA9PT0gbnVsbCB8fCBtZXRob2QyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRob2QyLmRpc3RhbmNlKTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gc2V0U2VsZWN0ZWRSZXR1cm5NZXRob2QoY2FycmllcikgewogIHN0b3JlLmNvbW1pdCgncmV0dXJucy9zZXRTZWxlY3RlZFJldHVybk1ldGhvZCcsIGNhcnJpZXIpOwp9"},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/mapController.js"],"names":["googleMapsService","store","CONSTANTS","getDistanceValue","delay","returnShippingOptions","getNearbyStores","shippingOptions","shippingAddress","getters","expressReturns","getExpressReturns","Error","dispatch","carrier","find","option","type","RETURN_METHODS","EXPRESS_RETURNS","getShippingAddress","getLatLng","latLng","marker","lat","lng","position","address","checkForExpressDropoffOptions","returnMethods","policyReturnMethods","expressReturnsEnabled","policy","policy_return_methods","method","feature_flags","map_enabled","findAllExpressReturnLocations","nearbyCarriers","placesToCoords","length","console","error","getDropoffLocations","gettingCoords","places","markers","i","formattedAddress","push","icon","distance","UNKNOWN","closingTime","openingHours","todayClosingTime","returnMethodsWithinDistance","hasMap","potentialReturnMethods","filter","slice","sort","method1","method2","returnMethodRank","setSelectedReturnMethod","commit"],"mappings":"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","sourcesContent":["/* eslint-disable promise/param-names */\nimport googleMapsService from '@/common/googleMaps.service'\nimport store from '../store'\nimport { CONSTANTS } from '@/constants/index.js'\nimport { getDistanceValue, delay } from '@/utils'\nimport { returnShippingOptions } from '@/controllers/returnMethodsController.js'\n\nexport async function getNearbyStores (shippingOptions) {\n  const shippingAddress = store.getters['returns/getAddress']\n  const expressReturns = getExpressReturns(shippingOptions)\n\n  if (!expressReturns) {\n    throw new Error('No Express Returns Available')\n  }\n\n  await store.dispatch('returns/fetchNearbyCarriers', {\n    carrier: expressReturns,\n    shippingAddress: shippingAddress\n  }) // puts nearby carriers in the store\n}\n\n// returns empty string if no express returns\nexport function getExpressReturns (shippingOptions) {\n  return shippingOptions.find(\n    (option) =>\n      option.type === CONSTANTS.RETURN_METHODS.EXPRESS_RETURNS\n  )\n}\n\nexport async function getShippingAddress () {\n  const shippingAddress = store.getters['returns/formattedShippingAddress']\n  const latLng = await googleMapsService.getLatLng(shippingAddress)\n\n  const marker = {\n    lat: latLng.lat,\n    lng: latLng.lng\n  }\n\n  return { position: marker, address: shippingAddress }\n}\n\nexport async function checkForExpressDropoffOptions (returnMethods, policyReturnMethods) {\n  let expressReturnsEnabled = false\n\n  try {\n    const policy = store.getters['returns/policies']\n\n    expressReturnsEnabled = policy?.policy_return_methods?.find(\n      (method) =>\n        method.type === CONSTANTS.RETURN_METHODS.EXPRESS_RETURNS\n    )\n    if (policy.feature_flags?.map_enabled && expressReturnsEnabled) {\n      const nearbyCarriers = await findAllExpressReturnLocations(returnMethods, policyReturnMethods, false)\n      expressReturnsEnabled = nearbyCarriers.placesToCoords.length > 0\n    } else {\n      expressReturnsEnabled = false\n    }\n  } catch (e) {\n    console.error(e)\n  }\n  return expressReturnsEnabled\n}\n\n/**\n *\n * @param {*} gettingCoords\n * @returns placesToCoords\n */\n\nexport async function getDropoffLocations (gettingCoords) {\n  const places = store.getters['returns/getNearbyCarriers']\n\n  // if only checking if nearby carriers exist, dont get the coords\n  if (!gettingCoords) {\n    return places\n  }\n\n  const markers = []\n\n  for (var i = 0; i < places.length; i++) {\n    await delay(500)\n    const latLng = await googleMapsService.getLatLng(places[i].formattedAddress)\n    const marker = {\n      lat: latLng.lat,\n      lng: latLng.lng\n    }\n    markers.push({ icon: places[i].icon, position: marker, address: places[i].formattedAddress, distance: places[i].distance !== null ? places[i].distance : CONSTANTS.UNKNOWN, closingTime: places[i].openingHours.todayClosingTime !== null ? places[i].openingHours.todayClosingTime : CONSTANTS.UNKNOWN })\n  }\n\n  return markers\n}\n\nexport async function findAllExpressReturnLocations (returnMethods, policyReturnMethods, gettingCoords) {\n  let shippingAddress\n\n  if (gettingCoords) { // dont need shipping address coords for inital map check\n    shippingAddress = await getShippingAddress()\n  }\n\n  let placesToCoords = []\n  const shippingOptions = returnShippingOptions(returnMethods, policyReturnMethods)\n\n  if (shippingOptions && shippingOptions.length > 0 && getExpressReturns(shippingOptions)) { // correct shipping options available\n    await getNearbyStores(shippingOptions)\n    placesToCoords = await getDropoffLocations(gettingCoords)\n  }\n\n  return { shippingAddress: shippingAddress, placesToCoords: placesToCoords }\n}\n\nexport function returnMethodsWithinDistance (hasMap) {\n  let potentialReturnMethods = store.getters['returns/returnMethods']\n\n  if (hasMap) {\n    potentialReturnMethods = potentialReturnMethods.filter(method => method.type !== CONSTANTS.RETURN_METHODS.EXPRESS_RETURNS)\n  }\n  return potentialReturnMethods\n    .slice()\n    .sort(\n      (method1, method2) =>\n        method1.returnMethodRank - method2.returnMethodRank ||\n            getDistanceValue(method1?.distance) -\n              getDistanceValue(method2?.distance)\n    )\n}\n\nexport function setSelectedReturnMethod (carrier) {\n  store.commit(\n    'returns/setSelectedReturnMethod',\n    carrier\n  )\n}\n"]}]}