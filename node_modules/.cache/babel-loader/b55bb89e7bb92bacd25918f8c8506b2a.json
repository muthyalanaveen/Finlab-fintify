{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/ExchangesController.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/ExchangesController.js","mtime":1663867175570},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVXNlcnMvbmF2ZWVubXV0aHlhbGEvRG9jdW1lbnRzL1Byb2plY3RzL3JldHVybnNfcG9ydGFsX3VpL3JldHVybnNfcG9ydGFsX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvcmV0dXJuc19wb3J0YWxfdWkvcmV0dXJuc19wb3J0YWxfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBDT05TVEFOVFMgfSBmcm9tICdAL2NvbnN0YW50cyc7CmltcG9ydCB7IFVQREFURV9FWENIQU5HRV9MSVNUIH0gZnJvbSAnQC9zdG9yZS9jb25zdGFudHMnOwppbXBvcnQgeyBnZXRJc0dpZnQgfSBmcm9tICdAL3N0b3JlL3Nlc3Npb25TdG9yYWdlLmpzJzsKdmFyIFJFVFVSTl9SRUFTT05fQUNUSU9OID0gQ09OU1RBTlRTLlJFVFVSTl9SRUFTT05fQUNUSU9OOwp2YXIgQUNUSU9OX1RZUEUgPSBDT05TVEFOVFMuQUNUSU9OX1RZUEU7CmV4cG9ydCB2YXIgaXNFeGNoYW5nZXNFbmFibGVkID0gZnVuY3Rpb24gaXNFeGNoYW5nZXNFbmFibGVkKCkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGV4Y2hhbmdlc0FsbG93ZWQgPSBfZ2V0RmllbGRzRnJvbVN0b3JlLmV4Y2hhbmdlc0FsbG93ZWQsCiAgICAgIGlzRXhjaGFuZ2VPcmRlciA9IF9nZXRGaWVsZHNGcm9tU3RvcmUuaXNFeGNoYW5nZU9yZGVyOwoKICByZXR1cm4gZXhjaGFuZ2VzQWxsb3dlZCAmJiAhaXNFeGNoYW5nZU9yZGVyICYmIGNhbkV4Y2hhbmdlTXVsdGlwbGUoKTsKfTsKZXhwb3J0IHZhciBjYW5FeGNoYW5nZSA9IGZ1bmN0aW9uIGNhbkV4Y2hhbmdlKHJlY29tbWVuZGF0aW9uVHlwZSkgewogIGlmICghaXNFeGNoYW5nZXNFbmFibGVkKCkpIHJldHVybiBmYWxzZTsKCiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmUyID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMi5pdGVtOwoKICB2YXIgaXNFeGNoYW5nZSA9IGZhbHNlOwoKICBpZiAocmVjb21tZW5kYXRpb25UeXBlLnRvTG93ZXJDYXNlKCkgPT09IFJFVFVSTl9SRUFTT05fQUNUSU9OLlNJWkUudG9Mb3dlckNhc2UoKSkgewogICAgdmFyIHZhcmlhbnRzID0gZ2V0U2l6ZU9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLmNvbG9yKTsKICAgIGlzRXhjaGFuZ2UgPSB2YXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuICF2LmRpc2FibGVkOwogICAgfSkubGVuZ3RoID4gMDsKICB9IGVsc2UgaWYgKHJlY29tbWVuZGF0aW9uVHlwZS50b0xvd2VyQ2FzZSgpID09PSBSRVRVUk5fUkVBU09OX0FDVElPTi5DT0xPUi50b0xvd2VyQ2FzZSgpKSB7CiAgICB2YXIgX3ZhcmlhbnRzID0gZ2V0Q29sb3JPcHRpb25zRm9yU2VsZWN0ZWRWYXJpYW50KGl0ZW0pOwoKICAgIGlzRXhjaGFuZ2UgPSBfdmFyaWFudHMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICAgIHJldHVybiAhdi5kaXNhYmxlZDsKICAgIH0pLmxlbmd0aCA+IDA7CiAgfSBlbHNlIGlmIChyZWNvbW1lbmRhdGlvblR5cGUudG9Mb3dlckNhc2UoKSA9PT0gUkVUVVJOX1JFQVNPTl9BQ1RJT04uREFNQUdFRC50b0xvd2VyQ2FzZSgpKSB7CiAgICB2YXIgdmFyaWFudCA9IGdldFZhcmlhbnRGb3JJdGVtKGl0ZW0pOwogICAgaXNFeGNoYW5nZSA9IHZhcmlhbnQgJiYgdmFyaWFudC5xdWFudGl0eV9pbl9zdG9jayA+IDA7CiAgfSBlbHNlIGlmIChyZWNvbW1lbmRhdGlvblR5cGUudG9Mb3dlckNhc2UoKSA9PT0gUkVUVVJOX1JFQVNPTl9BQ1RJT04uT1RIRVIudG9Mb3dlckNhc2UoKSkgewogICAgdmFyIF92YXJpYW50czIgPSBnZXRDb2xvck9wdGlvbnNGb3JQRFAoKTsKCiAgICBpc0V4Y2hhbmdlID0gX3ZhcmlhbnRzMi5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuICF2LmRpc2FibGVkOwogICAgfSkubGVuZ3RoID4gMDsKICB9CgogIHJldHVybiBpc0V4Y2hhbmdlc0VuYWJsZWQoKSAmJiBpc0V4Y2hhbmdlOwp9OyAvLyBhbiBpdGVtIGNhbiBiZSBleGNoYW5nZWQgZm9yIHNpemUgaWYgYW5kIG9ubHkgaWYgdGhlIGZvbGxvd2luZyBpcyB0cnVlOgovLyAxLiB0aGUgY2xpZW50IGhhcyBleGNoYW5nZXMgYWxsb3dlZCA9PSB0cnVlCi8vIDIuIGF0IGxlYXN0IG9uZSBvZiB0aGUgdmFyaWFudHMgaGFzIHF1YW50aXR5X2luX3N0b2NrID4gMAovLyAzLiB0aGF0IHZhcmlhbnQgaXMgb2YgdGhlIHNhbWUgY29sb3IgYXMgdGhlIGl0ZW0KLy8gNC4gbm90IGEgZ2lmdCByZXR1cm4KLy8gNS4gaXMgYSB0cnVzdHdvcnRoeXVzZXIKLy8gNi4gdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGl0ZW0gdGhhdCBpcyBub3QgZGlzYWJsZWQKCmV4cG9ydCB2YXIgY2FuRXhjaGFuZ2VTaXplID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VTaXplKCkgewogIHZhciBfcmVhc29uJHJlY29tbWVuZGF0aW87CgogIGlmICghaXNFeGNoYW5nZXNFbmFibGVkKCkpIHJldHVybiBmYWxzZTsKCiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmUzID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMy5pdGVtLAogICAgICBpc1RydXN0V29ydGh5VXNlciA9IF9nZXRGaWVsZHNGcm9tU3RvcmUzLmlzVHJ1c3RXb3J0aHlVc2VyLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMy5yZWFzb247CgogIHZhciB2YXJpYW50cyA9IGdldFNpemVPcHRpb25zRm9yU2VsZWN0ZWRWYXJpYW50KGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbS5jb2xvcik7CiAgdmFyIGhhc1NpemVPcHRpb25zID0gdmFyaWFudHMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICByZXR1cm4gIXYuZGlzYWJsZWQ7CiAgfSkubGVuZ3RoID4gMDsKICByZXR1cm4gaXNFeGNoYW5nZXNFbmFibGVkKCkgJiYgKChfcmVhc29uJHJlY29tbWVuZGF0aW8gPSByZWFzb24ucmVjb21tZW5kYXRpb25fdHlwZSkgPT09IG51bGwgfHwgX3JlYXNvbiRyZWNvbW1lbmRhdGlvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVhc29uJHJlY29tbWVuZGF0aW8udG9Mb3dlckNhc2UoKSkgPT09IFJFVFVSTl9SRUFTT05fQUNUSU9OLlNJWkUudG9Mb3dlckNhc2UoKSAmJiBoYXNTaXplT3B0aW9ucyAmJiBpc1RydXN0V29ydGh5VXNlcjsKfTsKZXhwb3J0IHZhciBjYW5FeGNoYW5nZUNvbG9yID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VDb2xvcigpIHsKICB2YXIgX3JlYXNvbiRyZWNvbW1lbmRhdGlvMjsKCiAgaWYgKCFpc0V4Y2hhbmdlc0VuYWJsZWQoKSkgcmV0dXJuIGZhbHNlOwoKICB2YXIgX2dldEZpZWxkc0Zyb21TdG9yZTQgPSBnZXRGaWVsZHNGcm9tU3RvcmUoKSwKICAgICAgaXRlbSA9IF9nZXRGaWVsZHNGcm9tU3RvcmU0Lml0ZW0sCiAgICAgIGlzVHJ1c3RXb3J0aHlVc2VyID0gX2dldEZpZWxkc0Zyb21TdG9yZTQuaXNUcnVzdFdvcnRoeVVzZXIsCiAgICAgIHJlYXNvbiA9IF9nZXRGaWVsZHNGcm9tU3RvcmU0LnJlYXNvbjsKCiAgdmFyIHZhcmlhbnRzID0gZ2V0Q29sb3JPcHRpb25zRm9yU2VsZWN0ZWRWYXJpYW50KGl0ZW0pOwogIHZhciBoYXNDb2xvck9wdGlvbnMgPSB2YXJpYW50cy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgIHJldHVybiAhdi5kaXNhYmxlZDsKICB9KS5sZW5ndGggPiAwOwogIHJldHVybiBpc0V4Y2hhbmdlc0VuYWJsZWQoKSAmJiAoKF9yZWFzb24kcmVjb21tZW5kYXRpbzIgPSByZWFzb24ucmVjb21tZW5kYXRpb25fdHlwZSkgPT09IG51bGwgfHwgX3JlYXNvbiRyZWNvbW1lbmRhdGlvMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlYXNvbiRyZWNvbW1lbmRhdGlvMi50b0xvd2VyQ2FzZSgpKSA9PT0gUkVUVVJOX1JFQVNPTl9BQ1RJT04uQ09MT1IudG9Mb3dlckNhc2UoKSAmJiBoYXNDb2xvck9wdGlvbnMgJiYgaXNUcnVzdFdvcnRoeVVzZXI7Cn07CmV4cG9ydCB2YXIgY2FuRXhjaGFuZ2VEYW1hZ2VkID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VEYW1hZ2VkKCkgewogIHZhciBfcmVhc29uJHJlY29tbWVuZGF0aW8zOwoKICBpZiAoIWlzRXhjaGFuZ2VzRW5hYmxlZCgpKSByZXR1cm4gZmFsc2U7CgogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlNSA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpdGVtID0gX2dldEZpZWxkc0Zyb21TdG9yZTUuaXRlbSwKICAgICAgaXNUcnVzdFdvcnRoeVVzZXIgPSBfZ2V0RmllbGRzRnJvbVN0b3JlNS5pc1RydXN0V29ydGh5VXNlciwKICAgICAgcmVhc29uID0gX2dldEZpZWxkc0Zyb21TdG9yZTUucmVhc29uOwoKICB2YXIgdmFyaWFudCA9IGdldFZhcmlhbnRGb3JJdGVtKGl0ZW0pOwogIHZhciBlbmFibGVkID0gdmFyaWFudCAmJiB2YXJpYW50LnF1YW50aXR5X2luX3N0b2NrID4gMDsKICByZXR1cm4gaXNFeGNoYW5nZXNFbmFibGVkKCkgJiYgKChfcmVhc29uJHJlY29tbWVuZGF0aW8zID0gcmVhc29uLnJlY29tbWVuZGF0aW9uX3R5cGUpID09PSBudWxsIHx8IF9yZWFzb24kcmVjb21tZW5kYXRpbzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZWFzb24kcmVjb21tZW5kYXRpbzMudG9Mb3dlckNhc2UoKSkgPT09IFJFVFVSTl9SRUFTT05fQUNUSU9OLkRBTUFHRUQudG9Mb3dlckNhc2UoKSAmJiBlbmFibGVkICYmIGlzVHJ1c3RXb3J0aHlVc2VyOwp9OwpleHBvcnQgdmFyIGNhbkV4Y2hhbmdlT3RoZXIgPSBmdW5jdGlvbiBjYW5FeGNoYW5nZU90aGVyKCkgewogIHZhciBfcmVhc29uJHJlY29tbWVuZGF0aW80OwoKICBpZiAoIWlzRXhjaGFuZ2VzRW5hYmxlZCgpKSByZXR1cm4gZmFsc2U7CgogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlNiA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpc1RydXN0V29ydGh5VXNlciA9IF9nZXRGaWVsZHNGcm9tU3RvcmU2LmlzVHJ1c3RXb3J0aHlVc2VyLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlNi5yZWFzb247CgogIHZhciB2YXJpYW50cyA9IGdldENvbG9yT3B0aW9uc0ZvclBEUCgpOwogIHZhciBoYXNPcHRpb25zID0gdmFyaWFudHMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICByZXR1cm4gIXYuZGlzYWJsZWQ7CiAgfSkubGVuZ3RoID4gMDsKICByZXR1cm4gaXNFeGNoYW5nZXNFbmFibGVkKCkgJiYgKChfcmVhc29uJHJlY29tbWVuZGF0aW80ID0gcmVhc29uLnJlY29tbWVuZGF0aW9uX3R5cGUpID09PSBudWxsIHx8IF9yZWFzb24kcmVjb21tZW5kYXRpbzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZWFzb24kcmVjb21tZW5kYXRpbzQudG9Mb3dlckNhc2UoKSkgPT09IFJFVFVSTl9SRUFTT05fQUNUSU9OLk9USEVSLnRvTG93ZXJDYXNlKCkgJiYgaGFzT3B0aW9ucyAmJiBpc1RydXN0V29ydGh5VXNlcjsKfTsKZXhwb3J0IHZhciBjYW5FeGNoYW5nZU11bHRpcGxlID0gZnVuY3Rpb24gY2FuRXhjaGFuZ2VNdWx0aXBsZSgpIHsKICB2YXIgX2dldEZpZWxkc0Zyb21TdG9yZTcgPSBnZXRGaWVsZHNGcm9tU3RvcmUoKSwKICAgICAgc2VsZWN0ZWRJdGVtcyA9IF9nZXRGaWVsZHNGcm9tU3RvcmU3LnNlbGVjdGVkSXRlbXMsCiAgICAgIG11bHRpSXRlbUV4Y2hhbmdlRW5hYmxlZCA9IF9nZXRGaWVsZHNGcm9tU3RvcmU3Lm11bHRpSXRlbUV4Y2hhbmdlRW5hYmxlZCwKICAgICAgbXVsdGlMaW5lU2FtZUl0ZW1FeGNoYW5nZUVuYWJsZWQgPSBfZ2V0RmllbGRzRnJvbVN0b3JlNy5tdWx0aUxpbmVTYW1lSXRlbUV4Y2hhbmdlRW5hYmxlZCwKICAgICAgaXRlbSA9IF9nZXRGaWVsZHNGcm9tU3RvcmU3Lml0ZW07CgogIHZhciBoYXNNdWx0aUxpbmUgPSAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtLnF1YW50aXR5KSA+IDE7CgogIGlmIChzZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gMSkgewogICAgLy8gYmFzZSBjYXNlCiAgICByZXR1cm4gaGFzTXVsdGlMaW5lID8gbXVsdGlMaW5lU2FtZUl0ZW1FeGNoYW5nZUVuYWJsZWQgOiB0cnVlOwogIH0KCiAgcmV0dXJuIGhhc011bHRpTGluZSA/IG11bHRpTGluZVNhbWVJdGVtRXhjaGFuZ2VFbmFibGVkICYmIG11bHRpSXRlbUV4Y2hhbmdlRW5hYmxlZCA6IG11bHRpSXRlbUV4Y2hhbmdlRW5hYmxlZDsKfTsKLyoKICogR0VUVEVSUwogKi8KLy8gUmV0dXJuIHRoZSBvcHRpb25zIGZvciBlYWNoIHZhcmlhbnQKCmV4cG9ydCB2YXIgZ2V0U2l6ZU9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQgPSBmdW5jdGlvbiBnZXRTaXplT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChzZWxlY3RlZENvbG9yKSB7CiAgdmFyIF9pdGVtJGV4Y2hhbmdlVmFyaWFudDsKCiAgaWYgKCFzZWxlY3RlZENvbG9yKSByZXR1cm4gW107CgogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlOCA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpdGVtID0gX2dldEZpZWxkc0Zyb21TdG9yZTguaXRlbTsKCiAgdmFyIG9yaWdpbmFsVmFyaWFudEluY2x1ZGVkID0gZmFsc2U7CiAgdmFyIHNpemVzID0gKF9pdGVtJGV4Y2hhbmdlVmFyaWFudCA9IGl0ZW0uZXhjaGFuZ2VWYXJpYW50cykgPT09IG51bGwgfHwgX2l0ZW0kZXhjaGFuZ2VWYXJpYW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRleGNoYW5nZVZhcmlhbnQuZmlsdGVyKGZ1bmN0aW9uICh2YXJpYW50KSB7CiAgICByZXR1cm4gdmFyaWFudC5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBzZWxlY3RlZENvbG9yLnRvTG93ZXJDYXNlKCk7CiAgfSkubWFwKGZ1bmN0aW9uICh2YXJpYW50KSB7CiAgICBpZiAodmFyaWFudC5za3UudG9Mb3dlckNhc2UoKSA9PT0gaXRlbS5za3UudG9Mb3dlckNhc2UoKSkgewogICAgICBvcmlnaW5hbFZhcmlhbnRJbmNsdWRlZCA9IHRydWU7CiAgICB9CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFyaWFudCksIHt9LCB7CiAgICAgIGRpc2FibGVkOiB2YXJpYW50LnNrdS50b0xvd2VyQ2FzZSgpID09PSBpdGVtLnNrdS50b0xvd2VyQ2FzZSgpIHx8IHZhcmlhbnQucXVhbnRpdHlfaW5fc3RvY2sgPD0gMCwKICAgICAgc3VidGl0bGU6IHZhcmlhbnQuc2t1LnRvTG93ZXJDYXNlKCkgPT09IGl0ZW0uc2t1LnRvTG93ZXJDYXNlKCkgPyAnT3JpZ2luYWwgUHVyY2hhc2UnIDogJycKICAgIH0pOwogIH0pOwoKICBpZiAoaXRlbS5jb2xvci50b0xvd2VyQ2FzZSgpID09PSBzZWxlY3RlZENvbG9yLnRvTG93ZXJDYXNlKCkgJiYgIW9yaWdpbmFsVmFyaWFudEluY2x1ZGVkKSB7CiAgICBzaXplcy5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbSksIHt9LCB7CiAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICBzdWJ0aXRsZTogJ09yaWdpbmFsIFB1cmNoYXNlJwogICAgfSkpOwogIH0KCiAgcmV0dXJuIHNpemVzLmxlbmd0aCA+IDAgPyBzb3J0U2l6ZXMoc2l6ZXMpIDogW107Cn07CmV4cG9ydCB2YXIgZ2V0Q29sb3JPcHRpb25zRm9yU2VsZWN0ZWRWYXJpYW50ID0gZnVuY3Rpb24gZ2V0Q29sb3JPcHRpb25zRm9yU2VsZWN0ZWRWYXJpYW50KGl0ZW0pIHsKICB2YXIgX2l0ZW0kZXhjaGFuZ2VWYXJpYW50MjsKCiAgdmFyIG9yaWdpbmFsVmFyaWFudEluY2x1ZGVkID0gZmFsc2U7CiAgdmFyIGNvbG9ycyA9IChfaXRlbSRleGNoYW5nZVZhcmlhbnQyID0gaXRlbS5leGNoYW5nZVZhcmlhbnRzKSA9PT0gbnVsbCB8fCBfaXRlbSRleGNoYW5nZVZhcmlhbnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaXRlbSRleGNoYW5nZVZhcmlhbnQyLmZpbHRlcihmdW5jdGlvbiAodmFyaWFudCkgewogICAgcmV0dXJuIHZhcmlhbnQuc2l6ZS50b0xvd2VyQ2FzZSgpID09PSBpdGVtLnNpemUudG9Mb3dlckNhc2UoKTsKICB9KS5tYXAoZnVuY3Rpb24gKHZhcmlhbnQpIHsKICAgIGlmICh2YXJpYW50LnNrdS50b0xvd2VyQ2FzZSgpID09PSBpdGVtLnNrdS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIG9yaWdpbmFsVmFyaWFudEluY2x1ZGVkID0gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2YXJpYW50KSwge30sIHsKICAgICAgZGlzYWJsZWQ6IHZhcmlhbnQuc2t1LnRvTG93ZXJDYXNlKCkgPT09IGl0ZW0uc2t1LnRvTG93ZXJDYXNlKCkgfHwgdmFyaWFudC5xdWFudGl0eV9pbl9zdG9jayA8PSAwLAogICAgICBuYW1lOiB2YXJpYW50LnRpdGxlLAogICAgICBzdWJ0aXRsZTogdmFyaWFudC5za3UudG9Mb3dlckNhc2UoKSA9PT0gaXRlbS5za3UudG9Mb3dlckNhc2UoKSA/ICdPcmlnaW5hbCBQdXJjaGFzZScgOiAnJwogICAgfSk7CiAgfSk7CgogIGlmICghb3JpZ2luYWxWYXJpYW50SW5jbHVkZWQpIHsKICAgIGNvbG9ycyA9IFtfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGl0ZW0pLCB7fSwgewogICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgbmFtZTogaXRlbS50aXRsZSwKICAgICAgc3VidGl0bGU6ICdPcmlnaW5hbCBQdXJjaGFzZScKICAgIH0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGNvbG9ycykpOwogIH0KCiAgcmV0dXJuIGNvbG9yczsKfTsKZXhwb3J0IHZhciBnZXRDb2xvck9wdGlvbnNGb3JQRFAgPSBmdW5jdGlvbiBnZXRDb2xvck9wdGlvbnNGb3JQRFAoKSB7CiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmU5ID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlOS5pdGVtOyAvLyAxIGdldCBhbGwgY29sb3Igb3B0aW9ucyBhbmQgbWFrZSBkaXNhYmxlZCBieSBkZWZhdWx0CiAgLy8gMiBjaGVjayB0aGUgc2l6ZXMgZm9yIGVhY2ggb3B0aW9uIGFuZCBpZiBhdCBsZWFzdCBvbmUgbm90IGRpc2FibGVkLCBtYWtlIGNvbG9yIGVuYWJsZWQKICAvLyBmaWx0ZXIgb3V0IHRoZSBkaXNhYmxlZCBjb2xvcnMKCgogIHJldHVybiBnZXRDb2xvck9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQoaXRlbSkubWFwKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHZhciBlbmFibGVkID0gZ2V0U2l6ZU9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQob3B0aW9uLmNvbG9yKS5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuICF2LmRpc2FibGVkOwogICAgfSkubGVuZ3RoID4gMDsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG9wdGlvbiksIHt9LCB7CiAgICAgIGRpc2FibGVkOiAhZW5hYmxlZAogICAgfSk7CiAgfSkuZmlsdGVyKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiAhb3B0aW9uLmRpc2FibGVkOwogIH0pOwp9OwpleHBvcnQgdmFyIGdldENvbG9yT3B0aW9uc0ZvckNvbG9yVmlldyA9IGZ1bmN0aW9uIGdldENvbG9yT3B0aW9uc0ZvckNvbG9yVmlldygpIHsKICB2YXIgX2dldEZpZWxkc0Zyb21TdG9yZTEwID0gZ2V0RmllbGRzRnJvbVN0b3JlKCksCiAgICAgIGl0ZW0gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMTAuaXRlbTsKCiAgdmFyIG9wdGlvbnMgPSBnZXRDb2xvck9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQoaXRlbSk7CiAgdmFyIGZpbHRlcmVkID0gb3B0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKG8pIHsKICAgIHJldHVybiAhby5kaXNhYmxlZCB8fCBvLnN1YnRpdGxlLnRvTG93ZXJDYXNlKCkgPT09ICdPcmlnaW5hbCBQdXJjaGFzZScudG9Mb3dlckNhc2UoKTsKICB9KTsKICByZXR1cm4gZmlsdGVyZWQ7Cn07CmV4cG9ydCB2YXIgZ2V0UHJldmlvdXNseVNlbGVjdGVkT3B0aW9uID0gZnVuY3Rpb24gZ2V0UHJldmlvdXNseVNlbGVjdGVkT3B0aW9uKCkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlMTEgPSBnZXRGaWVsZHNGcm9tU3RvcmUoKSwKICAgICAgaXRlbSA9IF9nZXRGaWVsZHNGcm9tU3RvcmUxMS5pdGVtLAogICAgICBleGNoYW5nZUxpc3QgPSBfZ2V0RmllbGRzRnJvbVN0b3JlMTEuZXhjaGFuZ2VMaXN0OwoKICByZXR1cm4gZXhjaGFuZ2VMaXN0ID09PSBudWxsIHx8IGV4Y2hhbmdlTGlzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjaGFuZ2VMaXN0LmZpbmQoZnVuY3Rpb24gKGV4Y2hhbmdlZEl0ZW0pIHsKICAgIHJldHVybiAoZXhjaGFuZ2VkSXRlbSA9PT0gbnVsbCB8fCBleGNoYW5nZWRJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBleGNoYW5nZWRJdGVtLmlkZW50aWZpZXIudG9Mb3dlckNhc2UoKSkgPT09IChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uaWRlbnRpZmllci50b0xvd2VyQ2FzZSgpKTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXREZWZhdWx0VmFsdWUgPSBmdW5jdGlvbiBnZXREZWZhdWx0VmFsdWUoKSB7CiAgdmFyIGFjdGlvblR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IEFDVElPTl9UWVBFLlNJWkU7CiAgdmFyIHNlbGVjdGVkQ29sb3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKCiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmUxMiA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpdGVtID0gX2dldEZpZWxkc0Zyb21TdG9yZTEyLml0ZW07CgogIHZhciBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24gPSBnZXRQcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24oKTsgLy8gIGlmIHRoZSBhY3Rpb250eXBlIGlzIGNvbG9yLCBhbmQgdGhlcmUgaXMgYSBhIHByZXZpb3VzbHkgc2VsZWN0ZWQgb3B0aW9uLAogIC8vIHJldHVybiB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCBjb2xvcgogIC8vIGVsc2UgcmV0dXJuIHVuZGVmaW5kCgogIGlmIChhY3Rpb25UeXBlLnRvTG93ZXJDYXNlKCkgPT09IEFDVElPTl9UWVBFLkNPTE9SLnRvTG93ZXJDYXNlKCkpIHsKICAgIGlmIChwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24gJiYgcHJldmlvdXNseVNlbGVjdGVkT3B0aW9uLnNpemUudG9Mb3dlckNhc2UoKSA9PT0gaXRlbS5zaXplLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgcmV0dXJuIHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgfQoKICB2YXIgaXRlbXMgPSBnZXRTaXplT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChzZWxlY3RlZENvbG9yIHx8IChpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0uY29sb3IpKTsKICB2YXIgb3JpZ2luYWxJdGVtID0gaXRlbXMuZmluZChmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGUuc3VidGl0bGUudG9Mb3dlckNhc2UoKSA9PT0gJ09yaWdpbmFsIFB1cmNoYXNlJy50b0xvd2VyQ2FzZSgpOwogIH0pOyAvLyByZXR1cm4gdGhlIHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbSBieSBkZWZhdWx0IHVubGVzcyB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCBpdGVtIHdhcyBub3Qgb2YgdGhlIHNhbWUgY29sb3IgYXMgdGhlIGRlZmF1bHQgaXRlbQoKICB2YXIgZGVmYXVsdEl0ZW0gPSBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24gfHwgb3JpZ2luYWxJdGVtIHx8IGl0ZW1zWzBdOwoKICBpZiAob3JpZ2luYWxJdGVtICYmIHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbiAmJiBvcmlnaW5hbEl0ZW0uY29sb3IgIT09IChwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24gPT09IG51bGwgfHwgcHJldmlvdXNseVNlbGVjdGVkT3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24uY29sb3IpKSB7CiAgICBkZWZhdWx0SXRlbSA9IG9yaWdpbmFsSXRlbTsKICB9CgogIHJldHVybiBkZWZhdWx0SXRlbTsKfTsKZXhwb3J0IHZhciBzYXZlU2VsZWN0ZWRJdGVtVG9TdG9yZSA9IGZ1bmN0aW9uIHNhdmVTZWxlY3RlZEl0ZW1Ub1N0b3JlKHNlbGVjdGVkSXRlbSkgewogIHZhciBfZ2V0RmllbGRzRnJvbVN0b3JlMTMgPSBnZXRGaWVsZHNGcm9tU3RvcmUoKSwKICAgICAgaXRlbSA9IF9nZXRGaWVsZHNGcm9tU3RvcmUxMy5pdGVtLAogICAgICByZWFzb24gPSBfZ2V0RmllbGRzRnJvbVN0b3JlMTMucmVhc29uOwoKICBzdG9yZS5jb21taXQoJ29yZGVyLycgKyBVUERBVEVfRVhDSEFOR0VfTElTVCwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzZWxlY3RlZEl0ZW0pLCB7fSwgewogICAgaWRlbnRpZmllcjogaXRlbS5pZGVudGlmaWVyLAogICAgb3JpZ2luYWxfaXRlbTogaXRlbSwKICAgIHJlYXNvbjogcmVhc29uLAogICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHkKICB9KSk7Cn07CmV4cG9ydCB2YXIgaGFuZGxlQ29sb3JPclNpemVPcHRpb25TZWxlY3RlZCA9IGZ1bmN0aW9uIGhhbmRsZUNvbG9yT3JTaXplT3B0aW9uU2VsZWN0ZWQoc2VsZWN0ZWRJdGVtLCBhY3Rpb25UeXBlLCBpdGVtLCBzZWxlY3RlZFNpemUsIHNlbGVjdGVkQ29sb3IpIHsKICB2YXIgdmFyaWFudHMgPSBbXTsKCiAgaWYgKGFjdGlvblR5cGUudG9Mb3dlckNhc2UoKSA9PT0gQUNUSU9OX1RZUEUuQ09MT1IudG9Mb3dlckNhc2UoKSkgewogICAgdmFyaWFudHMgPSBnZXRTaXplT3B0aW9uc0ZvclNlbGVjdGVkVmFyaWFudChzZWxlY3RlZENvbG9yKTsKICB9CgogIGlmIChhY3Rpb25UeXBlLnRvTG93ZXJDYXNlKCkgPT09IEFDVElPTl9UWVBFLlNJWkUudG9Mb3dlckNhc2UoKSkgewogICAgdmFyaWFudHMgPSBnZXRDb2xvck9wdGlvbnNGb3JTZWxlY3RlZFZhcmlhbnQoaXRlbSk7CiAgfQoKICB2YXIgb3B0aW9uRm9yU2VsZWN0ZWRTaXplQW5kQ29sb3IgPSB2YXJpYW50cy5maW5kKGZ1bmN0aW9uICh2YXJpYW50KSB7CiAgICByZXR1cm4gdmFyaWFudC5zaXplLnRvTG93ZXJDYXNlKCkgPT09IHNlbGVjdGVkU2l6ZS50b0xvd2VyQ2FzZSgpICYmIHZhcmlhbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gc2VsZWN0ZWRDb2xvci50b0xvd2VyQ2FzZSgpOwogIH0pOwoKICBpZiAob3B0aW9uRm9yU2VsZWN0ZWRTaXplQW5kQ29sb3IgJiYgIW9wdGlvbkZvclNlbGVjdGVkU2l6ZUFuZENvbG9yLmlzRGlzYWJsZWQpIHsKICAgIHNlbGVjdGVkSXRlbSA9IG9wdGlvbkZvclNlbGVjdGVkU2l6ZUFuZENvbG9yOwogICAgc2VsZWN0ZWRTaXplID0gb3B0aW9uRm9yU2VsZWN0ZWRTaXplQW5kQ29sb3Iuc2l6ZTsKICAgIHNlbGVjdGVkQ29sb3IgPSBvcHRpb25Gb3JTZWxlY3RlZFNpemVBbmRDb2xvci5jb2xvcjsKICB9IGVsc2UgewogICAgaWYgKGFjdGlvblR5cGUudG9Mb3dlckNhc2UoKSA9PT0gQUNUSU9OX1RZUEUuQ09MT1IudG9Mb3dlckNhc2UoKSkgewogICAgICBzZWxlY3RlZFNpemUgPSBudWxsOwogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIHNlbGVjdGVkU2l6ZTogc2VsZWN0ZWRTaXplLAogICAgc2VsZWN0ZWRDb2xvcjogc2VsZWN0ZWRDb2xvciwKICAgIHNlbGVjdGVkSXRlbTogc2VsZWN0ZWRJdGVtCiAgfTsKfTsKZXhwb3J0IHZhciBnZXRWYXJpYW50Rm9ySXRlbSA9IGZ1bmN0aW9uIGdldFZhcmlhbnRGb3JJdGVtKGl0ZW0pIHsKICB2YXIgc2l6ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogaXRlbS5zaXplOwogIHZhciBjb2xvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogaXRlbS5jb2xvcjsKICByZXR1cm4gaXRlbS5leGNoYW5nZVZhcmlhbnRzLmZpbmQoZnVuY3Rpb24gKHZhcmlhbnQpIHsKICAgIHJldHVybiB2YXJpYW50LnNpemUudG9Mb3dlckNhc2UoKSA9PT0gc2l6ZS50b0xvd2VyQ2FzZSgpICYmIHZhcmlhbnQuY29sb3IudG9Mb3dlckNhc2UoKSA9PT0gY29sb3IudG9Mb3dlckNhc2UoKTsKICB9KTsKfTsKZXhwb3J0IHZhciBpc1NhbWVWYXJpYW50ID0gZnVuY3Rpb24gaXNTYW1lVmFyaWFudChfcmVmKSB7CiAgdmFyIHNpemUgPSBfcmVmLnNpemUsCiAgICAgIGNvbG9yID0gX3JlZi5jb2xvcjsKCiAgdmFyIF9nZXRGaWVsZHNGcm9tU3RvcmUxNCA9IGdldEZpZWxkc0Zyb21TdG9yZSgpLAogICAgICBpdGVtID0gX2dldEZpZWxkc0Zyb21TdG9yZTE0Lml0ZW07CgogIHJldHVybiBpdGVtLmNvbG9yLnRvTG93ZXJDYXNlKCkgPT09IGNvbG9yLnRvTG93ZXJDYXNlKCkgJiYgaXRlbS5zaXplLnRvTG93ZXJDYXNlKCkgPT09IHNpemUudG9Mb3dlckNhc2UoKTsKfTsKCnZhciBnZXRGaWVsZHNGcm9tU3RvcmUgPSBmdW5jdGlvbiBnZXRGaWVsZHNGcm9tU3RvcmUoKSB7CiAgdmFyIGV4Y2hhbmdlc0FsbG93ZWQgPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL3BvbGljaWVzJ10uZXhjaGFuZ2VzX2FsbG93ZWQ7CiAgdmFyIGN1cnJlbnRJdGVtSW5kZXggPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL2N1cnJlbnRJdGVtSW5kZXgnXTsKICB2YXIgc2VsZWN0ZWRJdGVtcyA9IHN0b3JlLmdldHRlcnNbJ29yZGVyL3NlbGVjdGVkSXRlbXMnXTsKICB2YXIgaXRlbSA9IHNlbGVjdGVkSXRlbXNbY3VycmVudEl0ZW1JbmRleF07CiAgdmFyIGlzR2lmdFJldHVybiA9IGdldElzR2lmdCgpOwogIHZhciByZWFzb24gPSBzdG9yZS5nZXR0ZXJzWydyZXR1cm5zL3JlYXNvbiddOwogIHZhciBleGNoYW5nZUxpc3QgPSBzdG9yZS5nZXR0ZXJzWydvcmRlci9leGNoYW5nZUxpc3QnXTsKICB2YXIgZXhjaGFuZ2VFbGlnaWJpbGl0eSA9IHN0b3JlLmdldHRlcnNbJ2V4Y2hhbmdlL2dldEV4Y2hhbmdlRWxpZ2liaWxpdHknXTsKICB2YXIgbXVsdGlJdGVtRXhjaGFuZ2VFbmFibGVkID0gc3RvcmUuZ2V0dGVyc1sncmV0dXJucy9yZXR1cm5Jc011bHRpSXRlbUV4Y2hhbmdlRW5hYmxlZCddOwogIHZhciBtdWx0aUxpbmVTYW1lSXRlbUV4Y2hhbmdlRW5hYmxlZCA9IHN0b3JlLmdldHRlcnNbJ3JldHVybnMvcmV0dXJuSXNNdWx0aUxpbmVTYW1lSXRlbUV4Y2hhbmdlRW5hYmxlZCddOwogIHZhciBpc1RydXN0V29ydGh5VXNlciA9IGV4Y2hhbmdlRWxpZ2liaWxpdHkgPT09IG51bGwgfHwgZXhjaGFuZ2VFbGlnaWJpbGl0eSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXhjaGFuZ2VFbGlnaWJpbGl0eS5yZXB1cmNoYXNlX21vZGVsX2RlY2lzaW9uOwogIHZhciBpc0V4Y2hhbmdlT3JkZXIgPSBzdG9yZS5nZXR0ZXJzWydvcmRlci9pc0V4Y2hhbmdlT3JkZXInXTsKICByZXR1cm4gewogICAgZXhjaGFuZ2VzQWxsb3dlZDogZXhjaGFuZ2VzQWxsb3dlZCwKICAgIGl0ZW06IGl0ZW0sCiAgICBpc1RydXN0V29ydGh5VXNlcjogaXNUcnVzdFdvcnRoeVVzZXIsCiAgICBpc0dpZnRSZXR1cm46IGlzR2lmdFJldHVybiwKICAgIHJlYXNvbjogcmVhc29uLAogICAgc2VsZWN0ZWRJdGVtczogc2VsZWN0ZWRJdGVtcywKICAgIGV4Y2hhbmdlTGlzdDogZXhjaGFuZ2VMaXN0LAogICAgbXVsdGlMaW5lU2FtZUl0ZW1FeGNoYW5nZUVuYWJsZWQ6IG11bHRpTGluZVNhbWVJdGVtRXhjaGFuZ2VFbmFibGVkLAogICAgbXVsdGlJdGVtRXhjaGFuZ2VFbmFibGVkOiBtdWx0aUl0ZW1FeGNoYW5nZUVuYWJsZWQsCiAgICBpc0V4Y2hhbmdlT3JkZXI6IGlzRXhjaGFuZ2VPcmRlcgogIH07Cn07Cgp2YXIgc29ydFNpemVzID0gZnVuY3Rpb24gc29ydFNpemVzKHNpemVzKSB7CiAgLy8gT3JkZXIgc2l6ZXMgYmVmb3JlIHJldHVybmluZyB0aGVtCiAgdmFyIHNpemVPcmRlciA9IFsnWFhYTCcsICdYWEwnLCAnWEwnLCAnTCcsICdNJywgJ1MnLCAnWFMnLCAnWFhTJywgJ1hYWFMnXTsKCiAgaWYgKHNpemVPcmRlci5pbmNsdWRlcyhzaXplc1swXS5zaXplKSkgewogICAgcmV0dXJuIHNpemVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgcmV0dXJuIHNpemVPcmRlci5pbmRleE9mKGIuc2l6ZSkgLSBzaXplT3JkZXIuaW5kZXhPZihhLnNpemUpOwogICAgfSk7CiAgfSBlbHNlIGlmIChOdW1iZXIoc2l6ZXNbMF0uc2l6ZSkpIHsKICAgIHJldHVybiBzaXplcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBOdW1iZXIoYi5zaXplKSAtIE51bWJlcihhLnNpemUpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBzaXplcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBiLnNpemUgPCBhLnNpemU7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/controllers/ExchangesController.js"],"names":["store","CONSTANTS","UPDATE_EXCHANGE_LIST","getIsGift","RETURN_REASON_ACTION","ACTION_TYPE","isExchangesEnabled","getFieldsFromStore","exchangesAllowed","isExchangeOrder","canExchangeMultiple","canExchange","recommendationType","item","isExchange","toLowerCase","SIZE","variants","getSizeOptionsForSelectedVariant","color","filter","v","disabled","length","COLOR","getColorOptionsForSelectedVariant","DAMAGED","variant","getVariantForItem","quantity_in_stock","OTHER","getColorOptionsForPDP","canExchangeSize","isTrustWorthyUser","reason","hasSizeOptions","recommendation_type","canExchangeColor","hasColorOptions","canExchangeDamaged","enabled","canExchangeOther","hasOptions","selectedItems","multiItemExchangeEnabled","multiLineSameItemExchangeEnabled","hasMultiLine","quantity","selectedColor","originalVariantIncluded","sizes","exchangeVariants","map","sku","subtitle","push","sortSizes","colors","size","name","title","option","getColorOptionsForColorView","options","filtered","o","getPreviouslySelectedOption","exchangeList","find","exchangedItem","identifier","getDefaultValue","actionType","previouslySelectedOption","undefined","items","originalItem","e","defaultItem","saveSelectedItemToStore","selectedItem","commit","original_item","handleColorOrSizeOptionSelected","selectedSize","optionForSelectedSizeAndColor","isDisabled","isSameVariant","getters","exchanges_allowed","currentItemIndex","isGiftReturn","exchangeEligibility","repurchase_model_decision","sizeOrder","includes","sort","a","b","indexOf","Number"],"mappings":"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","sourcesContent":["import store from '@/store'\nimport { CONSTANTS } from '@/constants'\nimport { UPDATE_EXCHANGE_LIST } from '@/store/constants'\nimport { getIsGift } from '@/store/sessionStorage.js'\n\nconst RETURN_REASON_ACTION = CONSTANTS.RETURN_REASON_ACTION\nconst ACTION_TYPE = CONSTANTS.ACTION_TYPE\n\nexport const isExchangesEnabled = () => {\n  const { exchangesAllowed, isExchangeOrder } = getFieldsFromStore()\n\n  return exchangesAllowed && !isExchangeOrder && canExchangeMultiple()\n}\n\nexport const canExchange = (recommendationType) => {\n  if (!isExchangesEnabled()) return false\n\n  const { item } = getFieldsFromStore()\n  var isExchange = false\n\n  if (\n    recommendationType.toLowerCase() === RETURN_REASON_ACTION.SIZE.toLowerCase()\n  ) {\n    const variants = getSizeOptionsForSelectedVariant(item?.color)\n    isExchange = variants.filter((v) => !v.disabled).length > 0\n  } else if (\n    recommendationType.toLowerCase() ===\n    RETURN_REASON_ACTION.COLOR.toLowerCase()\n  ) {\n    const variants = getColorOptionsForSelectedVariant(item)\n    isExchange = variants.filter((v) => !v.disabled).length > 0\n  } else if (\n    recommendationType.toLowerCase() ===\n    RETURN_REASON_ACTION.DAMAGED.toLowerCase()\n  ) {\n    const variant = getVariantForItem(item)\n    isExchange = variant && variant.quantity_in_stock > 0\n  } else if (\n    recommendationType.toLowerCase() ===\n    RETURN_REASON_ACTION.OTHER.toLowerCase()\n  ) {\n    const variants = getColorOptionsForPDP()\n    isExchange = variants.filter((v) => !v.disabled).length > 0\n  }\n\n  return isExchangesEnabled() && isExchange\n}\n// an item can be exchanged for size if and only if the following is true:\n// 1. the client has exchanges allowed == true\n// 2. at least one of the variants has quantity_in_stock > 0\n// 3. that variant is of the same color as the item\n// 4. not a gift return\n// 5. is a trustworthyuser\n// 6. there is at least one item that is not disabled\n\nexport const canExchangeSize = () => {\n  if (!isExchangesEnabled()) return false\n\n  const { item, isTrustWorthyUser, reason } = getFieldsFromStore()\n  const variants = getSizeOptionsForSelectedVariant(item?.color)\n  const hasSizeOptions = variants.filter((v) => !v.disabled).length > 0\n\n  return (\n    isExchangesEnabled() &&\n    reason.recommendation_type?.toLowerCase() ===\n      RETURN_REASON_ACTION.SIZE.toLowerCase() &&\n    hasSizeOptions &&\n    isTrustWorthyUser\n  )\n}\n\nexport const canExchangeColor = () => {\n  if (!isExchangesEnabled()) return false\n\n  const { item, isTrustWorthyUser, reason } = getFieldsFromStore()\n  const variants = getColorOptionsForSelectedVariant(item)\n  const hasColorOptions = variants.filter((v) => !v.disabled).length > 0\n\n  return (\n    isExchangesEnabled() &&\n    reason.recommendation_type?.toLowerCase() ===\n      RETURN_REASON_ACTION.COLOR.toLowerCase() &&\n    hasColorOptions &&\n    isTrustWorthyUser\n  )\n}\nexport const canExchangeDamaged = () => {\n  if (!isExchangesEnabled()) return false\n\n  const { item, isTrustWorthyUser, reason } = getFieldsFromStore()\n  const variant = getVariantForItem(item)\n  const enabled = variant && variant.quantity_in_stock > 0\n\n  return (\n    isExchangesEnabled() &&\n    reason.recommendation_type?.toLowerCase() ===\n      RETURN_REASON_ACTION.DAMAGED.toLowerCase() &&\n    enabled &&\n    isTrustWorthyUser\n  )\n}\nexport const canExchangeOther = () => {\n  if (!isExchangesEnabled()) return false\n\n  const {\n    // item,\n    isTrustWorthyUser,\n    reason\n  } = getFieldsFromStore()\n\n  const variants = getColorOptionsForPDP()\n  const hasOptions = variants.filter((v) => !v.disabled).length > 0\n\n  return (\n    isExchangesEnabled() &&\n    reason.recommendation_type?.toLowerCase() ===\n      RETURN_REASON_ACTION.OTHER.toLowerCase() &&\n    hasOptions &&\n    isTrustWorthyUser\n  )\n}\n\nexport const canExchangeMultiple = () => {\n  const { selectedItems, multiItemExchangeEnabled, multiLineSameItemExchangeEnabled, item } = getFieldsFromStore()\n\n  const hasMultiLine = item?.quantity > 1\n\n  if (selectedItems.length === 1) { // base case\n    return hasMultiLine ? multiLineSameItemExchangeEnabled : true\n  }\n\n  return hasMultiLine ? multiLineSameItemExchangeEnabled && multiItemExchangeEnabled : multiItemExchangeEnabled\n}\n\n/*\n * GETTERS\n */\n\n// Return the options for each variant\nexport const getSizeOptionsForSelectedVariant = (selectedColor) => {\n  if (!selectedColor) return []\n\n  const { item } = getFieldsFromStore()\n  let originalVariantIncluded = false\n\n  const sizes = item.exchangeVariants\n    ?.filter(\n      (variant) => variant.color.toLowerCase() === selectedColor.toLowerCase()\n    )\n    .map((variant) => {\n      if (variant.sku.toLowerCase() === item.sku.toLowerCase()) {\n        originalVariantIncluded = true\n      }\n      return {\n        ...variant,\n        disabled:\n          variant.sku.toLowerCase() === item.sku.toLowerCase() ||\n          variant.quantity_in_stock <= 0,\n        subtitle:\n          variant.sku.toLowerCase() === item.sku.toLowerCase()\n            ? 'Original Purchase'\n            : ''\n      }\n    })\n\n  if (\n    item.color.toLowerCase() === selectedColor.toLowerCase() &&\n    !originalVariantIncluded\n  ) {\n    sizes.push({\n      ...item,\n      disabled: true,\n      subtitle: 'Original Purchase'\n    })\n  }\n\n  return sizes.length > 0 ? sortSizes(sizes) : []\n}\n\nexport const getColorOptionsForSelectedVariant = (item) => {\n  let originalVariantIncluded = false\n  let colors = item.exchangeVariants\n    ?.filter(\n      (variant) => variant.size.toLowerCase() === item.size.toLowerCase()\n    )\n    .map((variant) => {\n      if (variant.sku.toLowerCase() === item.sku.toLowerCase()) {\n        originalVariantIncluded = true\n      }\n      return {\n        ...variant,\n        disabled:\n          variant.sku.toLowerCase() === item.sku.toLowerCase() ||\n          variant.quantity_in_stock <= 0,\n        name: variant.title,\n        subtitle:\n          variant.sku.toLowerCase() === item.sku.toLowerCase()\n            ? 'Original Purchase'\n            : ''\n      }\n    })\n\n  if (!originalVariantIncluded) {\n    colors = [\n      {\n        ...item,\n        disabled: true,\n        name: item.title,\n        subtitle: 'Original Purchase'\n      },\n      ...colors\n    ]\n  }\n  return colors\n}\n\nexport const getColorOptionsForPDP = () => {\n  const { item } = getFieldsFromStore()\n\n  // 1 get all color options and make disabled by default\n  // 2 check the sizes for each option and if at least one not disabled, make color enabled\n  // filter out the disabled colors\n  return getColorOptionsForSelectedVariant(item)\n    .map((option) => {\n      const enabled =\n        getSizeOptionsForSelectedVariant(option.color).filter(\n          (v) => !v.disabled\n        ).length > 0\n\n      return { ...option, disabled: !enabled }\n    })\n    .filter((option) => !option.disabled)\n}\n\nexport const getColorOptionsForColorView = () => {\n  const { item } = getFieldsFromStore()\n\n  const options = getColorOptionsForSelectedVariant(item)\n\n  const filtered = options.filter(\n    (o) =>\n      !o.disabled ||\n      o.subtitle.toLowerCase() === 'Original Purchase'.toLowerCase()\n  )\n\n  return filtered\n}\n\nexport const getPreviouslySelectedOption = () => {\n  const { item, exchangeList } = getFieldsFromStore()\n\n  return exchangeList?.find(\n    (exchangedItem) =>\n      exchangedItem?.identifier.toLowerCase() === item?.identifier.toLowerCase()\n  )\n}\n\nexport const getDefaultValue = (\n  actionType = ACTION_TYPE.SIZE,\n  selectedColor\n) => {\n  const { item } = getFieldsFromStore()\n\n  const previouslySelectedOption = getPreviouslySelectedOption()\n\n  //  if the actiontype is color, and there is a a previously selected option,\n  // return the previously selected color\n  // else return undefind\n  if (actionType.toLowerCase() === ACTION_TYPE.COLOR.toLowerCase()) {\n    if (\n      previouslySelectedOption &&\n      previouslySelectedOption.size.toLowerCase() === item.size.toLowerCase()\n    ) {\n      return previouslySelectedOption\n    } else {\n      return undefined\n    }\n  }\n  const items = getSizeOptionsForSelectedVariant(selectedColor || item?.color)\n\n  const originalItem = items.find(\n    (e) => e.subtitle.toLowerCase() === 'Original Purchase'.toLowerCase()\n  )\n  // return the previously selected item by default unless the previously selected item was not of the same color as the default item\n  let defaultItem = previouslySelectedOption || originalItem || items[0]\n\n  if (\n    originalItem &&\n    previouslySelectedOption &&\n    originalItem.color !== previouslySelectedOption?.color\n  ) {\n    defaultItem = originalItem\n  }\n  return defaultItem\n}\n\nexport const saveSelectedItemToStore = (selectedItem) => {\n  const { item, reason } = getFieldsFromStore()\n  store.commit('order/' + UPDATE_EXCHANGE_LIST, {\n    ...selectedItem,\n    identifier: item.identifier,\n    original_item: item,\n    reason: reason,\n    quantity: item.quantity\n  })\n}\n\nexport const handleColorOrSizeOptionSelected = (\n  selectedItem,\n  actionType,\n  item,\n  selectedSize,\n  selectedColor\n) => {\n  let variants = []\n  if (actionType.toLowerCase() === ACTION_TYPE.COLOR.toLowerCase()) {\n    variants = getSizeOptionsForSelectedVariant(selectedColor)\n  }\n  if (actionType.toLowerCase() === ACTION_TYPE.SIZE.toLowerCase()) {\n    variants = getColorOptionsForSelectedVariant(item)\n  }\n\n  const optionForSelectedSizeAndColor = variants.find(\n    (variant) =>\n      variant.size.toLowerCase() === selectedSize.toLowerCase() &&\n      variant.color.toLowerCase() === selectedColor.toLowerCase()\n  )\n\n  if (\n    optionForSelectedSizeAndColor &&\n    !optionForSelectedSizeAndColor.isDisabled\n  ) {\n    selectedItem = optionForSelectedSizeAndColor\n    selectedSize = optionForSelectedSizeAndColor.size\n    selectedColor = optionForSelectedSizeAndColor.color\n  } else {\n    if (actionType.toLowerCase() === ACTION_TYPE.COLOR.toLowerCase()) {\n      selectedSize = null\n    }\n  }\n\n  return {\n    selectedSize,\n    selectedColor,\n    selectedItem\n  }\n}\n\nexport const getVariantForItem = (\n  item,\n  size = item.size,\n  color = item.color\n) => {\n  return item.exchangeVariants.find(\n    (variant) =>\n      variant.size.toLowerCase() === size.toLowerCase() &&\n      variant.color.toLowerCase() === color.toLowerCase()\n  )\n}\n\nexport const isSameVariant = ({ size, color }) => {\n  const { item } = getFieldsFromStore()\n  return (\n    item.color.toLowerCase() === color.toLowerCase() &&\n    item.size.toLowerCase() === size.toLowerCase()\n  )\n}\n\nconst getFieldsFromStore = () => {\n  const { exchanges_allowed: exchangesAllowed } = store.getters[\n    'returns/policies'\n  ]\n  const currentItemIndex = store.getters['returns/currentItemIndex']\n  const selectedItems = store.getters['order/selectedItems']\n  const item = selectedItems[currentItemIndex]\n  const isGiftReturn = getIsGift()\n  const reason = store.getters['returns/reason']\n  const exchangeList = store.getters['order/exchangeList']\n  const exchangeEligibility = store.getters['exchange/getExchangeEligibility']\n  const multiItemExchangeEnabled = store.getters['returns/returnIsMultiItemExchangeEnabled']\n  const multiLineSameItemExchangeEnabled = store.getters['returns/returnIsMultiLineSameItemExchangeEnabled']\n  const isTrustWorthyUser = exchangeEligibility?.repurchase_model_decision\n  const isExchangeOrder = store.getters['order/isExchangeOrder']\n\n  return {\n    exchangesAllowed,\n    item,\n    isTrustWorthyUser,\n    isGiftReturn,\n    reason,\n    selectedItems,\n    exchangeList,\n    multiLineSameItemExchangeEnabled,\n    multiItemExchangeEnabled,\n    isExchangeOrder\n  }\n}\n\nconst sortSizes = (sizes) => {\n  // Order sizes before returning them\n  const sizeOrder = ['XXXL', 'XXL', 'XL', 'L', 'M', 'S', 'XS', 'XXS', 'XXXS']\n\n  if (sizeOrder.includes(sizes[0].size)) {\n    return sizes.sort((a, b) => {\n      return sizeOrder.indexOf(b.size) - sizeOrder.indexOf(a.size)\n    })\n  } else if (Number(sizes[0].size)) {\n    return sizes.sort((a, b) => Number(b.size) - Number(a.size))\n  } else {\n    return sizes.sort((a, b) => b.size < a.size)\n  }\n}\n"]}]}