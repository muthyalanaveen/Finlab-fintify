{"remainingRequest":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js","dependencies":[{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js","mtime":1653330817100},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/cache-loader/dist/cjs.js","mtime":1649977086874},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/babel-loader/lib/index.js","mtime":1649977089120},{"path":"/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1649977087118}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL25hdmVlbm11dGh5YWxhL0RvY3VtZW50cy9Qcm9qZWN0cy9yZXR1cm5zX3BvcnRhbF91aS9yZXR1cm5zX3BvcnRhbF91aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbmF2ZWVubXV0aHlhbGEvRG9jdW1lbnRzL1Byb2plY3RzL3JldHVybnNfcG9ydGFsX3VpL3JldHVybnNfcG9ydGFsX3VpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9hc3luY0l0ZXJhdG9yIGZyb20gIi9Vc2Vycy9uYXZlZW5tdXRoeWFsYS9Eb2N1bWVudHMvUHJvamVjdHMvcmV0dXJuc19wb3J0YWxfdWkvcmV0dXJuc19wb3J0YWxfdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jSXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgZ29vZ2xlTWFwc1NlcnZpY2UgZnJvbSAnQC9jb21tb24vZ29vZ2xlTWFwcy5zZXJ2aWNlJzsKaW1wb3J0IHsgdG9SZWd1bGFyVGltZSwgaXNTdG9yZVdpdGhpbkRpc3RhbmNlLCBnZXRMb29rdXBLZXlzLCBkYXlPZldlZWtBc1N0cmluZyB9IGZyb20gJ0AvdXRpbHMnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7CmltcG9ydCB7IHZhbGlkU3RvcmVOYW1lIH0gZnJvbSAnQC9jb250cm9sbGVycy9SZXR1cm5NZXRob2RzQ29udHJvbGxlci5qcyc7IC8vIGluIEhITU0gZm9ybWF0Cgp2YXIgZm9ybWF0dGVkVGltZSA9IGZ1bmN0aW9uIGZvcm1hdHRlZFRpbWUoaG91cnMsIG1pbnV0ZXMpIHsKICByZXR1cm4gcGFyc2VJbnQoIiIuY29uY2F0KGhvdXJzKS5jb25jYXQobWludXRlcyA8IDEwID8gJzAnICsgbWludXRlcyA6IG1pbnV0ZXMpKTsKfTsKCnZhciBzbGVlcCA9IGZ1bmN0aW9uIHNsZWVwKG1pbGxpc2Vjb25kcykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZSwgbWlsbGlzZWNvbmRzKTsKICB9KTsKfTsKCnZhciBHT09HTEVfTUFQX0FQSV9DQUNIRSA9IHt9Owp2YXIgR09PR0xFX01BUF9BUElfUElEX0NBQ0hFID0ge307CnZhciBHT09HTEVfTUFQX0FQSV9ESVNUX0NBQ0hFID0ge307Cgp2YXIgZ2V0V2Vla2x5UmFuZ2UgPSBmdW5jdGlvbiBnZXRXZWVrbHlSYW5nZShwbGFjZSkgewogIHZhciBfcGxhY2Ukb3BlbmluZ19ob3VycywgX3BsYWNlJG9wZW5pbmdfaG91cnMkLCBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmcsIF93ZWVrbHlSYW5nZSRkYXRlUmFuZzIsIF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMsIF93ZWVrbHlSYW5nZSR0aW1lUmFuZywgX3dlZWtseVJhbmdlJHRpbWVSYW5nMiwgX3dlZWtseVJhbmdlJHRpbWVSYW5nMywgX3dlZWtseVJhbmdlJHRpbWVSYW5nNDsKCiAgdmFyIGZvcm1hdHRlZFdlZWtseVJhbmdlID0gewogICAgZGF0ZVJhbmdlOiAnJywKICAgIHRpbWVSYW5nZTogJycKICB9OwogIHZhciB3ZWVrbHlSYW5nZSA9IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnMgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzJCA9IF9wbGFjZSRvcGVuaW5nX2hvdXJzLnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMkLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBkYXkpIHsKICAgIHZhciBfZGF5JG9wZW4sIF9hY2MkZGF0ZVJhbmdlLCBfZGF5JG9wZW4yLCBfYWNjJGRhdGVSYW5nZTIsIF9kYXkkb3BlbjMsIF9hY2MkdGltZVJhbmdlLCBfZGF5JGNsb3NlLCBfYWNjJHRpbWVSYW5nZTMsIF9hY2MkdGltZVJhbmdlNDsKCiAgICAvLyBpZiBlYXJsaWVzdCBmb3VuZCBvcGVuIGRheSwgc2V0IGFzIHN0YXJ0CiAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW4gPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW4uZGF5KSA8PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkZGF0ZVJhbmdlID0gYWNjLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX2FjYyRkYXRlUmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkZGF0ZVJhbmdlLnN0YXJ0KSkgewogICAgICBhY2MuZGF0ZVJhbmdlLnN0YXJ0ID0gZGF5Lm9wZW4uZGF5OwogICAgfSAvLyBpZiBsYXRlc3QgZm91bmQgb3BlbiBkYXksIHNldCBhcyBlbmQKCgogICAgaWYgKChkYXkgPT09IG51bGwgfHwgZGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheSRvcGVuMiA9IGRheS5vcGVuKSA9PT0gbnVsbCB8fCBfZGF5JG9wZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JG9wZW4yLmRheSkgPj0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJGRhdGVSYW5nZTIgPSBhY2MuZGF0ZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJGRhdGVSYW5nZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkZGF0ZVJhbmdlMi5lbmQpKSB7CiAgICAgIGFjYy5kYXRlUmFuZ2UuZW5kID0gZGF5Lm9wZW4uZGF5OwogICAgfSAvLyBjaGVjayBpZiBjdXJyZW50IGRheSBvcGVuIGlzIGxhdGVyIHRoYW4gc3RvcmVkCgoKICAgIGlmICgoZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkb3BlbjMgPSBkYXkub3BlbikgPT09IG51bGwgfHwgX2RheSRvcGVuMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRvcGVuMy5ob3VycykgPj0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJHRpbWVSYW5nZSA9IGFjYy50aW1lUmFuZ2UpID09PSBudWxsIHx8IF9hY2MkdGltZVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYWNjJHRpbWVSYW5nZS5zdGFydEhvdXIpKSB7CiAgICAgIHZhciBfZGF5JG9wZW40LCBfYWNjJHRpbWVSYW5nZTI7CgogICAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JG9wZW40ID0gZGF5Lm9wZW4pID09PSBudWxsIHx8IF9kYXkkb3BlbjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXkkb3BlbjQubWludXRlcykgPj0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJHRpbWVSYW5nZTIgPSBhY2MudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJHRpbWVSYW5nZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkdGltZVJhbmdlMi5zdGFydE1pbnV0ZSkpIHsKICAgICAgICBhY2MudGltZVJhbmdlLnN0YXJ0TWludXRlID0gZGF5Lm9wZW4ubWludXRlczsKICAgICAgfQoKICAgICAgYWNjLnRpbWVSYW5nZS5zdGFydEhvdXIgPSBkYXkub3Blbi5ob3VyczsKICAgIH0gLy8gY2hlY2sgaWYgY3VycmVudCBkYXkgY2xvc2UgaXMgZWFybGllciB0aGFuIHN0b3JlZAoKCiAgICBpZiAoKGRheSA9PT0gbnVsbCB8fCBkYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5JGNsb3NlID0gZGF5LmNsb3NlKSA9PT0gbnVsbCB8fCBfZGF5JGNsb3NlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF5JGNsb3NlLmhvdXJzKSA8PSAoYWNjID09PSBudWxsIHx8IGFjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9hY2MkdGltZVJhbmdlMyA9IGFjYy50aW1lUmFuZ2UpID09PSBudWxsIHx8IF9hY2MkdGltZVJhbmdlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FjYyR0aW1lUmFuZ2UzLmVuZEhvdXIpIHx8ICEoYWNjICE9PSBudWxsICYmIGFjYyAhPT0gdm9pZCAwICYmIChfYWNjJHRpbWVSYW5nZTQgPSBhY2MudGltZVJhbmdlKSAhPT0gbnVsbCAmJiBfYWNjJHRpbWVSYW5nZTQgIT09IHZvaWQgMCAmJiBfYWNjJHRpbWVSYW5nZTQuZW5kSG91cikpIHsKICAgICAgdmFyIF9kYXkkY2xvc2UyLCBfYWNjJHRpbWVSYW5nZTUsIF9hY2MkdGltZVJhbmdlNjsKCiAgICAgIGlmICgoZGF5ID09PSBudWxsIHx8IGRheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXkkY2xvc2UyID0gZGF5LmNsb3NlKSA9PT0gbnVsbCB8fCBfZGF5JGNsb3NlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheSRjbG9zZTIubWludXRlcykgPD0gKGFjYyA9PT0gbnVsbCB8fCBhY2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfYWNjJHRpbWVSYW5nZTUgPSBhY2MudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfYWNjJHRpbWVSYW5nZTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hY2MkdGltZVJhbmdlNS5lbmRNaW51dGUpIHx8ICEoYWNjICE9PSBudWxsICYmIGFjYyAhPT0gdm9pZCAwICYmIChfYWNjJHRpbWVSYW5nZTYgPSBhY2MudGltZVJhbmdlKSAhPT0gbnVsbCAmJiBfYWNjJHRpbWVSYW5nZTYgIT09IHZvaWQgMCAmJiBfYWNjJHRpbWVSYW5nZTYuZW5kTWludXRlKSkgewogICAgICAgIGFjYy50aW1lUmFuZ2UuZW5kTWludXRlID0gZGF5Lm9wZW4ubWludXRlczsKICAgICAgfQoKICAgICAgYWNjLnRpbWVSYW5nZS5lbmRIb3VyID0gZGF5LmNsb3NlLmhvdXJzOwogICAgfQoKICAgIHJldHVybiBhY2M7CiAgfSwgewogICAgZGF0ZVJhbmdlOiB7CiAgICAgIHN0YXJ0OiAnJywKICAgICAgZW5kOiAnJwogICAgfSwKICAgIHRpbWVSYW5nZTogewogICAgICBzdGFydEhvdXI6ICcnLAogICAgICBzdGFydE1pbnV0ZTogJycsCiAgICAgIGVuZEhvdXI6ICcnLAogICAgICBlbmRNaW51dGU6ICcnCiAgICB9CiAgfSk7IC8vIHJlZm9ybWF0IGZvciBodW1hbi1yZWFkYWJsZQoKICBmb3JtYXR0ZWRXZWVrbHlSYW5nZS5kYXRlUmFuZ2UgPSAiIi5jb25jYXQoZGF5T2ZXZWVrQXNTdHJpbmcoWyh3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSRkYXRlUmFuZyA9IHdlZWtseVJhbmdlLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJGRhdGVSYW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkZGF0ZVJhbmcuc3RhcnQpID09PSAwID8gMSA6IHdlZWtseVJhbmdlID09PSBudWxsIHx8IHdlZWtseVJhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dlZWtseVJhbmdlJGRhdGVSYW5nMiA9IHdlZWtseVJhbmdlLmRhdGVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJGRhdGVSYW5nMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dlZWtseVJhbmdlJGRhdGVSYW5nMi5zdGFydF0pLnNsaWNlKDAsIDMpLCAiIC0gIikuY29uY2F0KGRheU9mV2Vla0FzU3RyaW5nKFt3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMgPSB3ZWVrbHlSYW5nZS5kYXRlUmFuZ2UpID09PSBudWxsIHx8IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93ZWVrbHlSYW5nZSRkYXRlUmFuZzMuZW5kXSkuc2xpY2UoMCwgMykpOwogIGZvcm1hdHRlZFdlZWtseVJhbmdlLnRpbWVSYW5nZSA9ICIiLmNvbmNhdCh0b1JlZ3VsYXJUaW1lKHsKICAgIGRheUluZGV4OiAnJywKICAgIGhvdXJzOiB3ZWVrbHlSYW5nZSA9PT0gbnVsbCB8fCB3ZWVrbHlSYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF93ZWVrbHlSYW5nZSR0aW1lUmFuZyA9IHdlZWtseVJhbmdlLnRpbWVSYW5nZSkgPT09IG51bGwgfHwgX3dlZWtseVJhbmdlJHRpbWVSYW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmcuc3RhcnRIb3VyLAogICAgbWludXRlczogd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmcyID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmcyLnN0YXJ0TWludXRlCiAgfSksICJcbiAgLSAiKS5jb25jYXQodG9SZWd1bGFyVGltZSh7CiAgICBob3Vyczogd2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmczID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmczLmVuZEhvdXIsCiAgICBtaW51dGVzOiAod2Vla2x5UmFuZ2UgPT09IG51bGwgfHwgd2Vla2x5UmFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfd2Vla2x5UmFuZ2UkdGltZVJhbmc0ID0gd2Vla2x5UmFuZ2UudGltZVJhbmdlKSA9PT0gbnVsbCB8fCBfd2Vla2x5UmFuZ2UkdGltZVJhbmc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfd2Vla2x5UmFuZ2UkdGltZVJhbmc0LmVuZE1pbnV0ZSkgfHwgMAogIH0pKTsKICByZXR1cm4gZm9ybWF0dGVkV2Vla2x5UmFuZ2U7Cn07Cgp2YXIgZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lID0gZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkU3RvcmVUaW1lKHBsYWNlKSB7CiAgdmFyIF9wbGFjZSRvcGVuaW5nX2hvdXJzMiwgX3BsYWNlJG9wZW5pbmdfaG91cnMzOwoKICB2YXIgY2xvc2luZ0hvdXJzID0gbnVsbDsKICB2YXIgb3BlbmluZ0hvdXJzID0gbnVsbDsKICB2YXIgb3BlbmluZ01pbnV0ZXMgPSBudWxsOwogIHZhciBjbG9zaW5nTWludXRlcyA9IG51bGw7CiAgdmFyIGRheUluZGV4ID0gJyc7CiAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSgpLmdldERheSgpOwogIHZhciBjdXJyZW50VGltZSA9IGZvcm1hdHRlZFRpbWUobmV3IERhdGUoKS5nZXRIb3VycygpLCBuZXcgRGF0ZSgpLmdldE1pbnV0ZXMoKSk7CiAgdmFyIHRvZGF5c1BlcmlvZEFyciA9IChfcGxhY2Ukb3BlbmluZ19ob3VyczIgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczMgPSBfcGxhY2Ukb3BlbmluZ19ob3VyczIucGVyaW9kcykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczMuZmlsdGVyKGZ1bmN0aW9uIChyZXFkRGF5KSB7CiAgICB2YXIgX3JlcWREYXkkY2xvc2U7CgogICAgcmV0dXJuIChyZXFkRGF5ID09PSBudWxsIHx8IHJlcWREYXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcmVxZERheSRjbG9zZSA9IHJlcWREYXkuY2xvc2UpID09PSBudWxsIHx8IF9yZXFkRGF5JGNsb3NlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxZERheSRjbG9zZS5kYXkpID09PSBjdXJyZW50RGF5OwogIH0pOyAvLyB0b2RheXNQZXJpb2QgYXJyYXkgY2FuIGJlIG9mIGFueSBsZW5ndGgKCiAgaWYgKHRvZGF5c1BlcmlvZEFycikgewogICAgaWYgKCF0b2RheXNQZXJpb2RBcnIubGVuZ3RoKSB7CiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGRheSwgY291bnQpIHsKICAgICAgICB2YXIgX3BsYWNlJG9wZW5pbmdfaG91cnM0LCBfcGxhY2Ukb3BlbmluZ19ob3VyczU7CgogICAgICAgIHZhciBkYXlQZXJpb2RBcnIgPSAoX3BsYWNlJG9wZW5pbmdfaG91cnM0ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM1ID0gX3BsYWNlJG9wZW5pbmdfaG91cnM0LnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM1LmZpbHRlcihmdW5jdGlvbiAocmVxZERheSkgewogICAgICAgICAgdmFyIF9yZXFkRGF5JGNsb3NlMjsKCiAgICAgICAgICByZXR1cm4gKHJlcWREYXkgPT09IG51bGwgfHwgcmVxZERheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9yZXFkRGF5JGNsb3NlMiA9IHJlcWREYXkuY2xvc2UpID09PSBudWxsIHx8IF9yZXFkRGF5JGNsb3NlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcWREYXkkY2xvc2UyLmRheSkgPT09IGRheTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFkYXlQZXJpb2RBcnIubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9kYXlQZXJpb2RBcnIkLCBfZGF5UGVyaW9kQXJyJCRvcGVuLCBfZGF5UGVyaW9kQXJyJDIsIF9kYXlQZXJpb2RBcnIkMiRvcGVuOwoKICAgICAgICAgIGRheUluZGV4ID0gTWF0aC5hYnMoZGF5IC0gY3VycmVudERheSkgPiAxID8gZGF5IDogJyc7IC8vIHNob3cgZGF5IG9mIHRoZSB3ZWVrIG9ubHkgd2hlbiBpdHMgbm90IHRoZSBuZXh0IGRheQoKICAgICAgICAgIG9wZW5pbmdIb3VycyA9IChfZGF5UGVyaW9kQXJyJCA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF5UGVyaW9kQXJyJCRvcGVuID0gX2RheVBlcmlvZEFyciQub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQkb3BlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RheVBlcmlvZEFyciQkb3Blbi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF9kYXlQZXJpb2RBcnIkMiA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQyJG9wZW4gPSBfZGF5UGVyaW9kQXJyJDIub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQyJG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkMiRvcGVuLm1pbnV0ZXM7CiAgICAgICAgICByZXR1cm4gImJyZWFrIjsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyBob2xpZGF5CiAgICAgIGZvciAodmFyIGRheSA9IChjdXJyZW50RGF5ICsgMSkgJSA3LCBjb3VudCA9IDA7IGNvdW50IDwgNjsgZGF5ID0gKGRheSArIDEpICUgNywgY291bnQrKykgewogICAgICAgIHZhciBfcmV0ID0gX2xvb3AoZGF5LCBjb3VudCk7CgogICAgICAgIGlmIChfcmV0ID09PSAiY29udGludWUiKSBjb250aW51ZTsKICAgICAgICBpZiAoX3JldCA9PT0gImJyZWFrIikgYnJlYWs7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodG9kYXlzUGVyaW9kQXJyLmxlbmd0aCA9PT0gMSkgewogICAgICB2YXIgX3RvZGF5c1BlcmlvZEFyciQsIF90b2RheXNQZXJpb2RBcnIkJGNsbywgX3RvZGF5c1BlcmlvZEFyciQyLCBfdG9kYXlzUGVyaW9kQXJyJDIkY2wsIF90b2RheXNQZXJpb2RBcnIkMywgX3RvZGF5c1BlcmlvZEFyciQzJG9wLCBfdG9kYXlzUGVyaW9kQXJyJDQsIF90b2RheXNQZXJpb2RBcnIkNCRvcDsKCiAgICAgIC8vIG9ubHkgb25lIGNsb3NpbmcgYW5kIG9wZW5pbmcgdGltZSBmb3IgYSBkYXkKICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkJGNsbyA9IF90b2RheXNQZXJpb2RBcnIkLmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJCRjbG8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkJGNsby5ob3VyczsKICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciQyID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDIkY2wgPSBfdG9kYXlzUGVyaW9kQXJyJDIuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkMiRjbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciQyJGNsLm1pbnV0ZXM7CiAgICAgIG9wZW5pbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJDMgPSB0b2RheXNQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkMyRvcCA9IF90b2RheXNQZXJpb2RBcnIkMy5vcGVuKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDMkb3AgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkMyRvcC5ob3VyczsKICAgICAgb3BlbmluZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciQ0ID0gdG9kYXlzUGVyaW9kQXJyWzBdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJDQkb3AgPSBfdG9kYXlzUGVyaW9kQXJyJDQub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ0JG9wID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDQkb3AubWludXRlczsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHN0b3JlIG9wZW4gaW4gYnJlYWtzIGluIGEgZGF5CiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0b2RheXNQZXJpb2RBcnIubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkaW5kZSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMiwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMywgX3RvZGF5c1BlcmlvZEFyciRpbmRlNCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTMsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE0LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTYsIF90b2RheXNQZXJpb2RBcnIkaW5kZTE3LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTksIF90b2RheXNQZXJpb2RBcnIkaW5kZTIwOwoKICAgICAgICBpZiAoY3VycmVudFRpbWUgPCBmb3JtYXR0ZWRUaW1lKChfdG9kYXlzUGVyaW9kQXJyJGluZGUgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIuaG91cnMsIChfdG9kYXlzUGVyaW9kQXJyJGluZGUzID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTQgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUzLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTQubWludXRlcykgLy8gY2xvc2VkOiBiZWZvcmUgc3RvcmUgb3BlbmluZwogICAgICAgICkgewogICAgICAgICAgdmFyIF90b2RheXNQZXJpb2RBcnIkaW5kZTUsIF90b2RheXNQZXJpb2RBcnIkaW5kZTYsIF90b2RheXNQZXJpb2RBcnIkaW5kZTcsIF90b2RheXNQZXJpb2RBcnIkaW5kZTgsIF90b2RheXNQZXJpb2RBcnIkaW5kZTksIF90b2RheXNQZXJpb2RBcnIkaW5kZTEwLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMSwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTI7CgogICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTUgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTUub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlNi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTcgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTcub3BlbikgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlOC5taW51dGVzOwogICAgICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTkgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGU5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTAgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGU5LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTAuaG91cnM7CiAgICAgICAgICBjbG9zaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxMSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTExID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMTIgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxMS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTEyLm1pbnV0ZXM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUaW1lID49IGZvcm1hdHRlZFRpbWUoKF90b2RheXNQZXJpb2RBcnIkaW5kZTEzID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTEzLm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNC5ob3VycywgKF90b2RheXNQZXJpb2RBcnIkaW5kZTE1ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTE1Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUxNi5taW51dGVzKSAmJiBjdXJyZW50VGltZSA8IGZvcm1hdHRlZFRpbWUoKF90b2RheXNQZXJpb2RBcnIkaW5kZTE3ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMTcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTE3LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvZGF5c1BlcmlvZEFyciRpbmRlMTguaG91cnMsIChfdG9kYXlzUGVyaW9kQXJyJGluZGUxOSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTE5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjAgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUxOS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIwLm1pbnV0ZXMpKSB7CiAgICAgICAgICB2YXIgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjEsIF90b2RheXNQZXJpb2RBcnIkaW5kZTIyLCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMywgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjQsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI1LCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNiwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjcsIF90b2RheXNQZXJpb2RBcnIkaW5kZTI4OwoKICAgICAgICAgIC8vIHN0b3JlIGlzIG9wZW4KICAgICAgICAgIGNsb3NpbmdIb3VycyA9IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyMSA9IHRvZGF5c1BlcmlvZEFycltpbmRleF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTIxID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjIgPSBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMS5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkaW5kZTIyLmhvdXJzOwogICAgICAgICAgY2xvc2luZ01pbnV0ZXMgPSAoX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMgPSB0b2RheXNQZXJpb2RBcnJbaW5kZXhdKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJGluZGUyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkaW5kZTI0ID0gX3RvZGF5c1BlcmlvZEFyciRpbmRlMjMuY2xvc2UpID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNC5taW51dGVzOwogICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTI1ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyNiA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTI1Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyNi5ob3VyczsKICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF90b2RheXNQZXJpb2RBcnIkaW5kZTI3ID0gdG9kYXlzUGVyaW9kQXJyW2luZGV4XSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciRpbmRlMjcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdG9kYXlzUGVyaW9kQXJyJGluZGUyOCA9IF90b2RheXNQZXJpb2RBcnIkaW5kZTI3Lm9wZW4pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkaW5kZTI4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJGluZGUyOC5taW51dGVzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2RheSwgX2NvdW50KSB7CiAgICAgICAgICAgIHZhciBfcGxhY2Ukb3BlbmluZ19ob3VyczYsIF9wbGFjZSRvcGVuaW5nX2hvdXJzNzsKCiAgICAgICAgICAgIHZhciBkYXlQZXJpb2RBcnIgPSAoX3BsYWNlJG9wZW5pbmdfaG91cnM2ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM3ID0gX3BsYWNlJG9wZW5pbmdfaG91cnM2LnBlcmlvZHMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM3LmZpbHRlcihmdW5jdGlvbiAocmVxZERheSkgewogICAgICAgICAgICAgIHZhciBfcmVxZERheSRjbG9zZTM7CgogICAgICAgICAgICAgIHJldHVybiAocmVxZERheSA9PT0gbnVsbCB8fCByZXFkRGF5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3JlcWREYXkkY2xvc2UzID0gcmVxZERheS5jbG9zZSkgPT09IG51bGwgfHwgX3JlcWREYXkkY2xvc2UzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxZERheSRjbG9zZTMuZGF5KSA9PT0gX2RheTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoIWRheVBlcmlvZEFyci5sZW5ndGgpIHsKICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgX2RheVBlcmlvZEFyciQzLCBfZGF5UGVyaW9kQXJyJDMkb3BlbiwgX2RheVBlcmlvZEFyciQ0LCBfZGF5UGVyaW9kQXJyJDQkb3BlbiwgX3RvZGF5c1BlcmlvZEFyciQ1LCBfdG9kYXlzUGVyaW9kQXJyJDUkY2wsIF90b2RheXNQZXJpb2RBcnIkNiwgX3RvZGF5c1BlcmlvZEFyciQ2JGNsOwoKICAgICAgICAgICAgICBkYXlJbmRleCA9IE1hdGguYWJzKF9kYXkgLSBjdXJyZW50RGF5KSA+IDEgPyBfZGF5IDogJyc7CiAgICAgICAgICAgICAgb3BlbmluZ0hvdXJzID0gKF9kYXlQZXJpb2RBcnIkMyA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQzJG9wZW4gPSBfZGF5UGVyaW9kQXJyJDMub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQzJG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkMyRvcGVuLmhvdXJzOwogICAgICAgICAgICAgIG9wZW5pbmdNaW51dGVzID0gKF9kYXlQZXJpb2RBcnIkNCA9IGRheVBlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RheVBlcmlvZEFyciQ0JG9wZW4gPSBfZGF5UGVyaW9kQXJyJDQub3BlbikgPT09IG51bGwgfHwgX2RheVBlcmlvZEFyciQ0JG9wZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXlQZXJpb2RBcnIkNCRvcGVuLm1pbnV0ZXM7CiAgICAgICAgICAgICAgY2xvc2luZ0hvdXJzID0gKF90b2RheXNQZXJpb2RBcnIkNSA9IHRvZGF5c1BlcmlvZEFyclswXSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RvZGF5c1BlcmlvZEFyciQ1JGNsID0gX3RvZGF5c1BlcmlvZEFyciQ1LmNsb3NlKSA9PT0gbnVsbCB8fCBfdG9kYXlzUGVyaW9kQXJyJDUkY2wgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90b2RheXNQZXJpb2RBcnIkNSRjbC5ob3VyczsKICAgICAgICAgICAgICBjbG9zaW5nTWludXRlcyA9IChfdG9kYXlzUGVyaW9kQXJyJDYgPSB0b2RheXNQZXJpb2RBcnJbMF0pID09PSBudWxsIHx8IF90b2RheXNQZXJpb2RBcnIkNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF90b2RheXNQZXJpb2RBcnIkNiRjbCA9IF90b2RheXNQZXJpb2RBcnIkNi5jbG9zZSkgPT09IG51bGwgfHwgX3RvZGF5c1BlcmlvZEFyciQ2JGNsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdG9kYXlzUGVyaW9kQXJyJDYkY2wubWludXRlczsKICAgICAgICAgICAgICByZXR1cm4gImJyZWFrIjsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICAvLyBjbG9zZWQ6IGFmdGVyIHN0b3JlIGNsb3NpbmcuIFdlIG5lZWQgbmV4dCBhY3RpdmUgZGF5J3Mgb3BlbmluZ0hvdXJzCiAgICAgICAgICBmb3IgKHZhciBfZGF5ID0gKGN1cnJlbnREYXkgKyAxKSAlIDcsIF9jb3VudCA9IDA7IF9jb3VudCA8IDY7IF9kYXkgPSAoX2RheSArIDEpICUgNywgX2NvdW50KyspIHsKICAgICAgICAgICAgdmFyIF9yZXQyID0gX2xvb3AyKF9kYXksIF9jb3VudCk7CgogICAgICAgICAgICBpZiAoX3JldDIgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoX3JldDIgPT09ICJicmVhayIpIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHsKICAgIGNsb3NpbmdUaW1lOiB0b1JlZ3VsYXJUaW1lKHsKICAgICAgZGF5SW5kZXg6IGRheUluZGV4LAogICAgICBob3VyczogY2xvc2luZ0hvdXJzLAogICAgICBtaW51dGVzOiBjbG9zaW5nTWludXRlcwogICAgfSkgfHwgJ04vQScsCiAgICBvcGVuaW5nVGltZTogdG9SZWd1bGFyVGltZSh7CiAgICAgIGRheUluZGV4OiBkYXlJbmRleCwKICAgICAgaG91cnM6IG9wZW5pbmdIb3VycywKICAgICAgbWludXRlczogb3BlbmluZ01pbnV0ZXMKICAgIH0pIHx8ICdOL0EnCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBmZXRjaEFkZHJlc3NJbmZvOiBmdW5jdGlvbiBmZXRjaEFkZHJlc3NJbmZvKF9yZWYsIF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGNvbW1pdCwgc2hpcHBpbmdBZGRyZXNzLCByZXR1cm5NZXRob2RzLCBpc1JldHVybk1ldGhvZENvbW1pdGVkLCB1cGRhdGVkTWV0aG9kczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MgPSBfcmVmMi5zaGlwcGluZ0FkZHJlc3MsIHJldHVybk1ldGhvZHMgPSBfcmVmMi5yZXR1cm5NZXRob2RzOwogICAgICAgICAgICAgIGlzUmV0dXJuTWV0aG9kQ29tbWl0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB1cGRhdGVkTWV0aG9kcyA9IFtdOyAvLyBjb21taXQoJ3NldExvYWRpbmcnLCB0cnVlKQoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXR1cm5NZXRob2RzLm1hcCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShtZXRob2QpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9zaGlwcGluZ0FkZHJlc3MkemlwXzsKCiAgICAgICAgICAgICAgICAgIHZhciB0eXBlLCBkaXN0YW5jZVRocmVzaG9sZCwgbmFtZSwgX3NoaXBwaW5nQWRkcmVzcyR6aXBfMiwgc3RyZWV0MSwgc3RhdGUsIHppcENvZGUsIGNpdHksIGxvb2t1cEtleSwga2V5cywgck1ldGhvZHMsIHBsYWNlcywgdmFsaWRQbGFjZXMsIG9wZXJhdGlvbmFsU3RvcmVzLCBpbmRleCwgcmVzdWx0LCBwbGFjZUlkLCBwbGFjZSwgZGlzdGFuY2UsIF9wbGFjZSRvcGVuaW5nX2hvdXJzOCwgX3BsYWNlJG9wZW5pbmdfaG91cnM5LCBfcGxhY2Ukb3BlbmluZ19ob3VyczEwLCBfcGxhY2Ukb3BlbmluZ19ob3VyczExLCBfcGxhY2Ukb3BlbmluZ19ob3VyczEyLCBfcGxhY2Ukb3BlbmluZ19ob3VyczEzOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBtZXRob2QudHlwZSwgZGlzdGFuY2VUaHJlc2hvbGQgPSBtZXRob2QuZGlzdGFuY2VUaHJlc2hvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG1ldGhvZCA9PT0gbnVsbCB8fCBtZXRob2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1ldGhvZC5jdXN0b21lcl9mYWNpbmdfY2FycmllcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzaGlwcGluZ0FkZHJlc3MgPT09IG51bGwgfHwgc2hpcHBpbmdBZGRyZXNzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3NoaXBwaW5nQWRkcmVzcyR6aXBfID0gc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlKSA9PT0gbnVsbCB8fCBfc2hpcHBpbmdBZGRyZXNzJHppcF8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zaGlwcGluZ0FkZHJlc3MkemlwXy5sZW5ndGgpID4gNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLnppcF9jb2RlID0gc2hpcHBpbmdBZGRyZXNzID09PSBudWxsIHx8IHNoaXBwaW5nQWRkcmVzcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9zaGlwcGluZ0FkZHJlc3MkemlwXzIgPSBzaGlwcGluZ0FkZHJlc3MuemlwX2NvZGUpID09PSBudWxsIHx8IF9zaGlwcGluZ0FkZHJlc3MkemlwXzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zaGlwcGluZ0FkZHJlc3MkemlwXzIuc3Vic3RyaW5nKDAsIDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWV0MSA9IHNoaXBwaW5nQWRkcmVzcy5zdHJlZXQxLCBzdGF0ZSA9IHNoaXBwaW5nQWRkcmVzcy5zdGF0ZSwgemlwQ29kZSA9IHNoaXBwaW5nQWRkcmVzcy56aXBfY29kZSwgY2l0eSA9IHNoaXBwaW5nQWRkcmVzcy5jaXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cEtleSA9ICIiLmNvbmNhdChzdGF0ZSwgIl8iKS5jb25jYXQoemlwQ29kZSwgIl8iKS5jb25jYXQoY2l0eSwgIl8iKS5jb25jYXQobmFtZSwgIl8iKS5jb25jYXQodHlwZSwgIl9pbmZvIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0gZ2V0TG9va3VwS2V5cyhPYmplY3Qua2V5cyhHT09HTEVfTUFQX0FQSV9DQUNIRSksIGxvb2t1cEtleSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgck1ldGhvZHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoR09PR0xFX01BUF9BUElfQ0FDSEVba2V5XSAmJiBHT09HTEVfTUFQX0FQSV9DQUNIRVtrZXldLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgck1ldGhvZHMucHVzaChHT09HTEVfTUFQX0FQSV9DQUNIRVtrZXldWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZU1ldGhvZHMnLCByTWV0aG9kcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXR1cm5NZXRob2RDb21taXRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0UGxhY2VzKHNoaXBwaW5nQWRkcmVzcywgbmFtZSwgdHlwZSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlcyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBsYWNlcy5sZW5ndGggPT09IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9vYmplY3RTcHJlYWQoe30sIG1ldGhvZCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFBsYWNlcyA9IHBsYWNlcy5maWx0ZXIoZnVuY3Rpb24gKHBsYWNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRTdG9yZU5hbWUocGxhY2UubmFtZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHZhbGlkUGxhY2VzLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbmFsU3RvcmVzID0gdmFsaWRQbGFjZXMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1c2luZXNzU3RhdHVzID0gX3JlZjQuYnVzaW5lc3Nfc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFidXNpbmVzc1N0YXR1cyA/IHRydWUgOiBidXNpbmVzc1N0YXR1cyA9PT0gJ09QRVJBVElPTkFMJzsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEob3BlcmF0aW9uYWxTdG9yZXMubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCBvcGVyYXRpb25hbFN0b3Jlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG9wZXJhdGlvbmFsU3RvcmVzW2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUlkID0gcmVzdWx0LnBsYWNlX2lkOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGV0YWlscyhwbGFjZUlkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGlzdGFuY2UoIiIuY29uY2F0KHN0cmVldDEsICIsICIpLmNvbmNhdChjaXR5LCAiLCAiKS5jb25jYXQoc3RhdGUsICIgIikuY29uY2F0KHppcENvZGUpLCBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcyk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3RvcmVXaXRoaW5EaXN0YW5jZShkaXN0YW5jZSA9PT0gbnVsbCB8fCBkaXN0YW5jZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGlzdGFuY2UuZGlzdGFuY2UsIGRpc3RhbmNlVGhyZXNob2xkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJjb250aW51ZSIsIDQxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfQ0FDSEVbbG9va3VwS2V5XS5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXRob2QpLCBkaXN0YW5jZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQaG9uZU51bWJlcjogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmZvcm1hdHRlZF9waG9uZV9udW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGxhY2UuZm9ybWF0dGVkX2FkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuaW5nSG91cnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzOCA9IHBsYWNlLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZSRvcGVuaW5nX2hvdXJzOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnM4LmlzT3BlbigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5X3RleHQ6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlJG9wZW5pbmdfaG91cnM5ID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnM5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3Vyczkud2Vla2RheV90ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJpb2RzOiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTAgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczEwLnBlcmlvZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlZWtseVJhbmdlOiBnZXRXZWVrbHlSYW5nZShwbGFjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5Q2xvc2luZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkuY2xvc2luZ1RpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZE1ldGhvZHMucHVzaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWV0aG9kKSwgZGlzdGFuY2UpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGhvbmVOdW1iZXI6IHBsYWNlID09PSBudWxsIHx8IHBsYWNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwbGFjZS5mb3JtYXR0ZWRfcGhvbmVfbnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBsYWNlLmZvcm1hdHRlZF9hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmluZ0hvdXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3BlbjogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczExID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMxMS5pc09wZW4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Vla2RheV90ZXh0OiBwbGFjZSA9PT0gbnVsbCB8fCBwbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZSRvcGVuaW5nX2hvdXJzMTIgPSBwbGFjZS5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2Ukb3BlbmluZ19ob3VyczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2Ukb3BlbmluZ19ob3VyczEyLndlZWtkYXlfdGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyaW9kczogcGxhY2UgPT09IG51bGwgfHwgcGxhY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2Ukb3BlbmluZ19ob3VyczEzID0gcGxhY2Uub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlJG9wZW5pbmdfaG91cnMxMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlJG9wZW5pbmdfaG91cnMxMy5wZXJpb2RzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWVrbHlSYW5nZTogZ2V0V2Vla2x5UmFuZ2UocGxhY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RheUNsb3NpbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLmNsb3NpbmdUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RheU9wZW5pbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLm9wZW5pbmdUaW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgNDQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKSkpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhZGRyZXNzIEluZm8nLCB7CiAgICAgICAgICAgICAgICBlcnJvcjogX2NvbnRleHQyLnQwCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGlmICghaXNSZXR1cm5NZXRob2RDb21taXRlZCkgewogICAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVNZXRob2RzJywgdXBkYXRlZE1ldGhvZHMpOwogICAgICAgICAgICAgIH0gLy8gY29tbWl0KCdzZXRMb2FkaW5nJywgZmFsc2UpCgoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzQsIDldXSk7CiAgICB9KSkoKTsKICB9LAogIGZldGNoTmVhcmJ5Q2FycmllcnM6IGZ1bmN0aW9uIGZldGNoTmVhcmJ5Q2FycmllcnMoX3JlZjUsIF9yZWY2KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGNvbW1pdCwgY2Fycmllciwgc2hpcHBpbmdBZGRyZXNzLCB0eXBlLCBkaXN0YW5jZVRocmVzaG9sZCwgbmFtZSwgc3RyZWV0MSwgc3RhdGUsIHppcENvZGUsIGNpdHksIHBsYWNlcywgcmVzdWx0cywgY2FycmllcnMsIF9pdGVyYXRvckFicnVwdENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgcmVzdWx0LCBwbGFjZUlkLCBwbGFjZSwgZGlzdGFuY2UsIF9wbGFjZSwgX3BsYWNlMiwgX3BsYWNlMywgX3BsYWNlMyRvcGVuaW5nX2hvdXJzLCBfcGxhY2U0LCBfcGxhY2U0JG9wZW5pbmdfaG91cnMsIF9wbGFjZTUsIF9wbGFjZTUkb3BlbmluZ19ob3VyczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICAgICAgICAgIGNhcnJpZXIgPSBfcmVmNi5jYXJyaWVyLCBzaGlwcGluZ0FkZHJlc3MgPSBfcmVmNi5zaGlwcGluZ0FkZHJlc3M7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgICAgICAgdHlwZSA9IGNhcnJpZXIudHlwZSwgZGlzdGFuY2VUaHJlc2hvbGQgPSBjYXJyaWVyLmRpc3RhbmNlVGhyZXNob2xkOwogICAgICAgICAgICAgIG5hbWUgPSBjYXJyaWVyID09PSBudWxsIHx8IGNhcnJpZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhcnJpZXIuY3VzdG9tZXJfZmFjaW5nX2NhcnJpZXI7CiAgICAgICAgICAgICAgc3RyZWV0MSA9IHNoaXBwaW5nQWRkcmVzcy5zdHJlZXQxLCBzdGF0ZSA9IHNoaXBwaW5nQWRkcmVzcy5zdGF0ZSwgemlwQ29kZSA9IHNoaXBwaW5nQWRkcmVzcy56aXBfY29kZSwgY2l0eSA9IHNoaXBwaW5nQWRkcmVzcy5jaXR5OyAvLyBjb25zdCBsb29rdXBLZXkgPSBgJHtzdGF0ZX1fJHt6aXBDb2RlfV8ke2NpdHl9XyR7bmFtZX1fJHt0eXBlfV9uZWFyYnlgCgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldFBsYWNlcyhzaGlwcGluZ0FkZHJlc3MsIG5hbWUsIHR5cGUpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHBsYWNlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgIHJlc3VsdHMgPSBwbGFjZXMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmNykgewogICAgICAgICAgICAgICAgdmFyIGJ1c2luZXNzU3RhdHVzID0gX3JlZjcuYnVzaW5lc3Nfc3RhdHVzOwogICAgICAgICAgICAgICAgcmV0dXJuICFidXNpbmVzc1N0YXR1cyA/IHRydWUgOiBidXNpbmVzc1N0YXR1cyA9PT0gJ09QRVJBVElPTkFMJzsKICAgICAgICAgICAgICB9KTsgLy8gT25seSBjYWxjdWxhdGUgZGlzdGFuY2UgZm9yIGEgbWF4IG9mIHRlbiByZXN1bHRzCgogICAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDEwKSB7CiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5zbGljZSgwLCAxMCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXJyaWVycyA9IFtdOwogICAgICAgICAgICAgIF9pdGVyYXRvckFicnVwdENvbXBsZXRpb24gPSBmYWxzZTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMTU7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2FzeW5jSXRlcmF0b3IocmVzdWx0cyk7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYXRvci5uZXh0KCk7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGlmICghKF9pdGVyYXRvckFicnVwdENvbXBsZXRpb24gPSAhKF9zdGVwID0gX2NvbnRleHQzLnNlbnQpLmRvbmUpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXN1bHQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICBwbGFjZUlkID0gcmVzdWx0LnBsYWNlX2lkOwogICAgICAgICAgICAgIHBsYWNlID0gR09PR0xFX01BUF9BUElfUElEX0NBQ0hFW3BsYWNlSWRdOwogICAgICAgICAgICAgIGRpc3RhbmNlID0gR09PR0xFX01BUF9BUElfRElTVF9DQUNIRVtwbGFjZUlkXTsKCiAgICAgICAgICAgICAgaWYgKCEoIXBsYWNlIHx8ICFkaXN0YW5jZSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgcmV0dXJuIHNsZWVwKDIwMCk7CgogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgcmV0dXJuIGdvb2dsZU1hcHNTZXJ2aWNlLmdldERldGFpbHMocGxhY2VJZCk7CgogICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgIHBsYWNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfUElEX0NBQ0hFW3BsYWNlSWRdID0gcGxhY2U7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMzsKICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoMjAwKTsKCiAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzNTsKICAgICAgICAgICAgICByZXR1cm4gZ29vZ2xlTWFwc1NlcnZpY2UuZ2V0RGlzdGFuY2UoIiIuY29uY2F0KHN0cmVldDEsICIsICIpLmNvbmNhdChjaXR5LCAiLCAiKS5jb25jYXQoc3RhdGUsICIgIikuY29uY2F0KHppcENvZGUpLCBwbGFjZS5mb3JtYXR0ZWRfYWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICAgIGRpc3RhbmNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgR09PR0xFX01BUF9BUElfRElTVF9DQUNIRVtwbGFjZUlkXSA9IGRpc3RhbmNlOwoKICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICBpZiAoaXNTdG9yZVdpdGhpbkRpc3RhbmNlKGRpc3RhbmNlLmRpc3RhbmNlLCBkaXN0YW5jZVRocmVzaG9sZCkgJiYgdmFsaWRTdG9yZU5hbWUocGxhY2UubmFtZSwgdHlwZSkpIHsKICAgICAgICAgICAgICAgIGNhcnJpZXJzLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNhcnJpZXIpLCBkaXN0YW5jZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHBsYWNlLm5hbWUsCiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBob25lTnVtYmVyOiAoX3BsYWNlID0gcGxhY2UpID09PSBudWxsIHx8IF9wbGFjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlLmZvcm1hdHRlZF9waG9uZV9udW1iZXIsCiAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IChfcGxhY2UyID0gcGxhY2UpID09PSBudWxsIHx8IF9wbGFjZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZTIuZm9ybWF0dGVkX2FkZHJlc3MsCiAgICAgICAgICAgICAgICAgIGljb246IHJlc3VsdC5pY29uLAogICAgICAgICAgICAgICAgICBvcGVuaW5nSG91cnM6IHsKICAgICAgICAgICAgICAgICAgICBpc09wZW46IChfcGxhY2UzID0gcGxhY2UpID09PSBudWxsIHx8IF9wbGFjZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfcGxhY2UzJG9wZW5pbmdfaG91cnMgPSBfcGxhY2UzLm9wZW5pbmdfaG91cnMpID09PSBudWxsIHx8IF9wbGFjZTMkb3BlbmluZ19ob3VycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BsYWNlMyRvcGVuaW5nX2hvdXJzLmlzT3BlbigpLAogICAgICAgICAgICAgICAgICAgIHdlZWtseVJhbmdlOiBnZXRXZWVrbHlSYW5nZShwbGFjZSksCiAgICAgICAgICAgICAgICAgICAgd2Vla2RheV90ZXh0OiAoX3BsYWNlNCA9IHBsYWNlKSA9PT0gbnVsbCB8fCBfcGxhY2U0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3BsYWNlNCRvcGVuaW5nX2hvdXJzID0gX3BsYWNlNC5vcGVuaW5nX2hvdXJzKSA9PT0gbnVsbCB8fCBfcGxhY2U0JG9wZW5pbmdfaG91cnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbGFjZTQkb3BlbmluZ19ob3Vycy53ZWVrZGF5X3RleHQsCiAgICAgICAgICAgICAgICAgICAgcGVyaW9kczogKF9wbGFjZTUgPSBwbGFjZSkgPT09IG51bGwgfHwgX3BsYWNlNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wbGFjZTUkb3BlbmluZ19ob3VycyA9IF9wbGFjZTUub3BlbmluZ19ob3VycykgPT09IG51bGwgfHwgX3BsYWNlNSRvcGVuaW5nX2hvdXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGxhY2U1JG9wZW5pbmdfaG91cnMucGVyaW9kcywKICAgICAgICAgICAgICAgICAgICB0b2RheUNsb3NpbmdUaW1lOiBnZXRGb3JtYXR0ZWRTdG9yZVRpbWUocGxhY2UpLmNsb3NpbmdUaW1lLAogICAgICAgICAgICAgICAgICAgIHRvZGF5T3BlbmluZ1RpbWU6IGdldEZvcm1hdHRlZFN0b3JlVGltZShwbGFjZSkub3BlbmluZ1RpbWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDM7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDE1KTsKICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBfY29udGV4dDMudDA7CgogICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDc7CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA0ODsKCiAgICAgICAgICAgICAgaWYgKCEoX2l0ZXJhdG9yQWJydXB0Q29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDUyOwogICAgICAgICAgICAgIHJldHVybiBfaXRlcmF0b3IucmV0dXJuKCk7CgogICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTI7CgogICAgICAgICAgICAgIGlmICghX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmZpbmlzaCg1Mik7CgogICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuZmluaXNoKDQ3KTsKCiAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgY2FycmllcnMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgcmV0dXJuICthLmRpc3RhbmNlLnNwbGl0KCcgJylbMF0gLSArYi5kaXN0YW5jZS5zcGxpdCgnICcpWzBdOwogICAgICAgICAgICAgIH0pLnNsaWNlKDAsIDMpOyAvLyBHT09HTEVfTUFQX0FQSV9DQUNIRVtsb29rdXBLZXldID0gY2FycmllcnMKCiAgICAgICAgICAgICAgY29tbWl0KCdzZXROZWFyYnlDYXJyaWVycycsIGNhcnJpZXJzKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2ODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA2MjsKICAgICAgICAgICAgICBfY29udGV4dDMudDEgPSBfY29udGV4dDNbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbmVhcmJ5IGxvY2F0aW9ucycsIHsKICAgICAgICAgICAgICAgIGVycm9yOiBfY29udGV4dDMudDEKICAgICAgICAgICAgICB9KTsgLy8gZGVsZXRlIEdPT0dMRV9NQVBfQVBJX0NBQ0hFW2xvb2t1cEtleV0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2NzsKICAgICAgICAgICAgICByZXR1cm4gc2xlZXAoNTAwMCk7CgogICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCdyZXR1cm5zL2ZldGNoTmVhcmJ5Q2FycmllcnMnLCB7CiAgICAgICAgICAgICAgICBjYXJyaWVyOiBjYXJyaWVyLAogICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBzaGlwcGluZ0FkZHJlc3MKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s2LCA2Ml0sIFsxNSwgNDMsIDQ3LCA1N10sIFs0OCwsIDUyLCA1Nl1dKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["/Users/naveenmuthyala/Documents/Projects/returns_portal_ui/returns_portal_ui/src/store/modules/returns/actions.js"],"names":["googleMapsService","toRegularTime","isStoreWithinDistance","getLookupKeys","dayOfWeekAsString","store","validStoreName","formattedTime","hours","minutes","parseInt","sleep","milliseconds","Promise","resolve","setTimeout","GOOGLE_MAP_API_CACHE","GOOGLE_MAP_API_PID_CACHE","GOOGLE_MAP_API_DIST_CACHE","getWeeklyRange","place","formattedWeeklyRange","dateRange","timeRange","weeklyRange","opening_hours","periods","reduce","acc","day","open","start","end","startHour","startMinute","close","endHour","endMinute","slice","dayIndex","getFormattedStoreTime","closingHours","openingHours","openingMinutes","closingMinutes","currentDay","Date","getDay","currentTime","getHours","getMinutes","todaysPeriodArr","filter","reqdDay","length","count","dayPeriodArr","Math","abs","index","closingTime","openingTime","fetchAddressInfo","commit","shippingAddress","returnMethods","isReturnMethodCommited","updatedMethods","all","map","method","type","distanceThreshold","name","customer_facing_carrier","zip_code","substring","street1","state","zipCode","city","lookupKey","keys","Object","rMethods","key","push","getPlaces","places","validPlaces","operationalStores","businessStatus","business_status","result","placeId","place_id","getDetails","getDistance","formatted_address","distance","formattedPhoneNumber","formatted_phone_number","formattedAddress","isOpen","weekday_text","todayClosingTime","todayOpeningTime","console","error","fetchNearbyCarriers","carrier","results","carriers","icon","sort","a","b","split","dispatch"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,iBAAP,MAA8B,6BAA9B;AACA,SAASC,aAAT,EAAwBC,qBAAxB,EAA+CC,aAA/C,EAA8DC,iBAA9D,QAAuF,SAAvF;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,cAAT,QAA+B,0CAA/B,C,CAEA;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,OAAR,EAAoB;AACxC,SAAOC,QAAQ,WAAIF,KAAJ,SAAYC,OAAO,GAAG,EAAV,GAAe,MAAMA,OAArB,GAA+BA,OAA3C,EAAf;AACD,CAFD;;AAIA,IAAME,KAAK,GAAG,SAARA,KAAQ,CAACC,YAAD,EAAkB;AAC9B,SAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO;AAAA,WAAIC,UAAU,CAACD,OAAD,EAAUF,YAAV,CAAd;AAAA,GAAnB,CAAP;AACD,CAFD;;AAGA,IAAMI,oBAAoB,GAAG,EAA7B;AACA,IAAMC,wBAAwB,GAAG,EAAjC;AACA,IAAMC,yBAAyB,GAAG,EAAlC;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAAA;;AAChC,MAAMC,oBAAoB,GAAG;AAAEC,IAAAA,SAAS,EAAE,EAAb;AAAiBC,IAAAA,SAAS,EAAE;AAA5B,GAA7B;AAEA,MAAMC,WAAW,GAAGJ,KAAH,aAAGA,KAAH,+CAAGA,KAAK,CAAEK,aAAV,kFAAG,qBAAsBC,OAAzB,0DAAG,sBAA+BC,MAA/B,CAAsC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA;;AACtE;AACA,QAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,yBAAAA,GAAG,CAAEC,IAAL,wDAAWD,GAAX,MAAkBD,GAAlB,aAAkBA,GAAlB,yCAAkBA,GAAG,CAAEN,SAAvB,mDAAkB,eAAgBS,KAAlC,CAAJ,EAA6C;AAC3CH,MAAAA,GAAG,CAACN,SAAJ,CAAcS,KAAd,GAAsBF,GAAG,CAACC,IAAJ,CAASD,GAA/B;AACD,KAJqE,CAKtE;;;AACA,QAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEC,IAAL,0DAAWD,GAAX,MAAkBD,GAAlB,aAAkBA,GAAlB,0CAAkBA,GAAG,CAAEN,SAAvB,oDAAkB,gBAAgBU,GAAlC,CAAJ,EAA2C;AACzCJ,MAAAA,GAAG,CAACN,SAAJ,CAAcU,GAAd,GAAoBH,GAAG,CAACC,IAAJ,CAASD,GAA7B;AACD,KARqE,CAStE;;;AACA,QAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEC,IAAL,0DAAWtB,KAAX,MAAoBoB,GAApB,aAAoBA,GAApB,yCAAoBA,GAAG,CAAEL,SAAzB,mDAAoB,eAAgBU,SAApC,CAAJ,EAAmD;AAAA;;AACjD,UAAI,CAAAJ,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEC,IAAL,0DAAWrB,OAAX,MAAsBmB,GAAtB,aAAsBA,GAAtB,0CAAsBA,GAAG,CAAEL,SAA3B,oDAAsB,gBAAgBW,WAAtC,CAAJ,EAAuD;AACrDN,QAAAA,GAAG,CAACL,SAAJ,CAAcW,WAAd,GAA4BL,GAAG,CAACC,IAAJ,CAASrB,OAArC;AACD;;AACDmB,MAAAA,GAAG,CAACL,SAAJ,CAAcU,SAAd,GAA0BJ,GAAG,CAACC,IAAJ,CAAStB,KAAnC;AACD,KAfqE,CAgBtE;;;AACA,QAAI,CAAAqB,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEM,KAAL,0DAAY3B,KAAZ,MAAqBoB,GAArB,aAAqBA,GAArB,0CAAqBA,GAAG,CAAEL,SAA1B,oDAAqB,gBAAgBa,OAArC,KAAgD,EAACR,GAAD,aAACA,GAAD,kCAACA,GAAG,CAAEL,SAAN,4CAAC,gBAAgBa,OAAjB,CAApD,EAA8E;AAAA;;AAC5E,UAAI,CAAAP,GAAG,SAAH,IAAAA,GAAG,WAAH,2BAAAA,GAAG,CAAEM,KAAL,4DAAY1B,OAAZ,MAAuBmB,GAAvB,aAAuBA,GAAvB,0CAAuBA,GAAG,CAAEL,SAA5B,oDAAuB,gBAAgBc,SAAvC,KAAoD,EAACT,GAAD,aAACA,GAAD,kCAACA,GAAG,CAAEL,SAAN,4CAAC,gBAAgBc,SAAjB,CAAxD,EAAoF;AAClFT,QAAAA,GAAG,CAACL,SAAJ,CAAcc,SAAd,GAA0BR,GAAG,CAACC,IAAJ,CAASrB,OAAnC;AACD;;AACDmB,MAAAA,GAAG,CAACL,SAAJ,CAAca,OAAd,GAAwBP,GAAG,CAACM,KAAJ,CAAU3B,KAAlC;AACD;;AACD,WAAOoB,GAAP;AACD,GAxBmB,EAwBjB;AAAEN,IAAAA,SAAS,EAAE;AAAES,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,GAAG,EAAE;AAAlB,KAAb;AAAqCT,IAAAA,SAAS,EAAE;AAAEU,MAAAA,SAAS,EAAE,EAAb;AAAiBC,MAAAA,WAAW,EAAE,EAA9B;AAAkCE,MAAAA,OAAO,EAAE,EAA3C;AAA+CC,MAAAA,SAAS,EAAE;AAA1D;AAAhD,GAxBiB,CAApB,CAHgC,CA6BhC;;AACAhB,EAAAA,oBAAoB,CAACC,SAArB,aAAoClB,iBAAiB,CAAC,CAAC,CAAAoB,WAAW,SAAX,IAAAA,WAAW,WAAX,qCAAAA,WAAW,CAAEF,SAAb,gFAAwBS,KAAxB,MAAkC,CAAlC,GAAsC,CAAtC,GAA0CP,WAA1C,aAA0CA,WAA1C,iDAA0CA,WAAW,CAAEF,SAAvD,2DAA0C,uBAAwBS,KAAnE,CAAD,CAAjB,CAA6FO,KAA7F,CAAmG,CAAnG,EAAsG,CAAtG,CAApC,gBAAkJlC,iBAAiB,CAAC,CAACoB,WAAD,aAACA,WAAD,iDAACA,WAAW,CAAEF,SAAd,2DAAC,uBAAwBU,GAAzB,CAAD,CAAjB,CAAiDM,KAAjD,CAAuD,CAAvD,EAA0D,CAA1D,CAAlJ;AAEAjB,EAAAA,oBAAoB,CAACE,SAArB,aAAoCtB,aAAa,CAAC;AAAEsC,IAAAA,QAAQ,EAAE,EAAZ;AAAgB/B,IAAAA,KAAK,EAAEgB,WAAF,aAAEA,WAAF,gDAAEA,WAAW,CAAED,SAAf,0DAAE,sBAAwBU,SAA/C;AAA0DxB,IAAAA,OAAO,EAAEe,WAAF,aAAEA,WAAF,iDAAEA,WAAW,CAAED,SAAf,2DAAE,uBAAwBW;AAA3F,GAAD,CAAjD,mBACIjC,aAAa,CAAC;AAAEO,IAAAA,KAAK,EAAEgB,WAAF,aAAEA,WAAF,iDAAEA,WAAW,CAAED,SAAf,2DAAE,uBAAwBa,OAAjC;AAA0C3B,IAAAA,OAAO,EAAE,CAAAe,WAAW,SAAX,IAAAA,WAAW,WAAX,sCAAAA,WAAW,CAAED,SAAb,kFAAwBc,SAAxB,KAAqC;AAAxF,GAAD,CADjB;AAGA,SAAOhB,oBAAP;AACD,CApCD;;AAsCA,IAAMmB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACpB,KAAD,EAAW;AAAA;;AACvC,MAAIqB,YAAY,GAAG,IAAnB;AACA,MAAIC,YAAY,GAAG,IAAnB;AACA,MAAIC,cAAc,GAAG,IAArB;AACA,MAAIC,cAAc,GAAG,IAArB;AACA,MAAIL,QAAQ,GAAG,EAAf;AAEA,MAAMM,UAAU,GAAG,IAAIC,IAAJ,GAAWC,MAAX,EAAnB;AACA,MAAMC,WAAW,GAAGzC,aAAa,CAAC,IAAIuC,IAAJ,GAAWG,QAAX,EAAD,EAAwB,IAAIH,IAAJ,GAAWI,UAAX,EAAxB,CAAjC;AACA,MAAMC,eAAe,4BAAG/B,KAAK,CAACK,aAAT,mFAAG,sBAAqBC,OAAxB,0DAAG,sBAA8B0B,MAA9B,CACtB,UAACC,OAAD;AAAA;;AAAA,WAAa,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,8BAAAA,OAAO,CAAElB,KAAT,kEAAgBN,GAAhB,MAAwBgB,UAArC;AAAA,GADsB,CAAxB,CATuC,CAYvC;;AAEA,MAAIM,eAAJ,EAAqB;AACnB,QAAI,CAACA,eAAe,CAACG,MAArB,EAA6B;AAAA,iCAClBzB,GADkB,EACU0B,KADV;AAAA;;AAEzB,YAAMC,YAAY,4BAAGpC,KAAK,CAACK,aAAT,mFAAG,sBAAqBC,OAAxB,0DAAG,sBAA8B0B,MAA9B,CACnB,UAACC,OAAD;AAAA;;AAAA,iBAAa,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,+BAAAA,OAAO,CAAElB,KAAT,oEAAgBN,GAAhB,MAAwBA,GAArC;AAAA,SADmB,CAArB;;AAGA,YAAI,CAAC2B,YAAY,CAACF,MAAlB,EAA0B;AACxB;AACD,SAFD,MAEO;AAAA;;AACLf,UAAAA,QAAQ,GAAGkB,IAAI,CAACC,GAAL,CAAS7B,GAAG,GAAGgB,UAAf,IAA6B,CAA7B,GAAiChB,GAAjC,GAAuC,EAAlD,CADK,CACgD;;AACrDa,UAAAA,YAAY,qBAAGc,YAAY,CAAC,CAAD,CAAf,0EAAG,eAAiB1B,IAApB,wDAAG,oBAAuBtB,KAAtC;AACAmC,UAAAA,cAAc,sBAAGa,YAAY,CAAC,CAAD,CAAf,4EAAG,gBAAiB1B,IAApB,yDAAG,qBAAuBrB,OAAxC;AACA;AACD;AAZwB;;AAAE;AAC7B,WAAK,IAAIoB,GAAG,GAAG,CAACgB,UAAU,GAAG,CAAd,IAAmB,CAA7B,EAAgCU,KAAK,GAAG,CAA7C,EAAgDA,KAAK,GAAG,CAAxD,EAA2D1B,GAAG,GAAG,CAACA,GAAG,GAAG,CAAP,IAAY,CAAlB,EAAqB0B,KAAK,EAArF,EAAyF;AAAA,yBAAhF1B,GAAgF,EAApD0B,KAAoD;;AAAA,iCAKrF;AALqF,8BAUrF;AAEH;AACF,KAdD,MAcO,IAAIJ,eAAe,CAACG,MAAhB,KAA2B,CAA/B,EAAkC;AAAA;;AACzC;AACEb,MAAAA,YAAY,wBAAGU,eAAe,CAAC,CAAD,CAAlB,+EAAG,kBAAoBhB,KAAvB,0DAAG,sBAA2B3B,KAA1C;AACAoC,MAAAA,cAAc,yBAAGO,eAAe,CAAC,CAAD,CAAlB,gFAAG,mBAAoBhB,KAAvB,0DAAG,sBAA2B1B,OAA5C;AACAiC,MAAAA,YAAY,yBAAGS,eAAe,CAAC,CAAD,CAAlB,gFAAG,mBAAoBrB,IAAvB,0DAAG,sBAA0BtB,KAAzC;AACAmC,MAAAA,cAAc,yBAAGQ,eAAe,CAAC,CAAD,CAAlB,gFAAG,mBAAoBrB,IAAvB,0DAAG,sBAA0BrB,OAA3C;AACD,KANM,MAMA;AACP;AACE,WAAK,IAAIkD,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGR,eAAe,CAACG,MAA5C,EAAoDK,KAAK,EAAzD,EAA6D;AAAA;;AAC3D,YAAIX,WAAW,GAAGzC,aAAa,0BAAC4C,eAAe,CAACQ,KAAD,CAAhB,oFAAC,sBAAwB7B,IAAzB,2DAAC,uBAA8BtB,KAA/B,4BAAsC2C,eAAe,CAACQ,KAAD,CAArD,qFAAsC,uBAAwB7B,IAA9D,2DAAsC,uBAA8BrB,OAApE,CAA/B,CACE;AADF,UAEE;AAAA;;AACAiC,UAAAA,YAAY,6BAAGS,eAAe,CAACQ,KAAD,CAAlB,qFAAG,uBAAwB7B,IAA3B,2DAAG,uBAA8BtB,KAA7C;AACAmC,UAAAA,cAAc,6BAAGQ,eAAe,CAACQ,KAAD,CAAlB,qFAAG,uBAAwB7B,IAA3B,2DAAG,uBAA8BrB,OAA/C;AACAgC,UAAAA,YAAY,6BAAGU,eAAe,CAACQ,KAAD,CAAlB,sFAAG,uBAAwBxB,KAA3B,4DAAG,wBAA+B3B,KAA9C;AACAoC,UAAAA,cAAc,8BAAGO,eAAe,CAACQ,KAAD,CAAlB,uFAAG,wBAAwBxB,KAA3B,4DAAG,wBAA+B1B,OAAhD;AACA;AACD,SARD,MAQO,IAAIuC,WAAW,IAAIzC,aAAa,4BAAC4C,eAAe,CAACQ,KAAD,CAAhB,uFAAC,wBAAwB7B,IAAzB,4DAAC,wBAA8BtB,KAA/B,6BAAsC2C,eAAe,CAACQ,KAAD,CAArD,uFAAsC,wBAAwB7B,IAA9D,4DAAsC,wBAA8BrB,OAApE,CAA5B,IAA4GuC,WAAW,GAAGzC,aAAa,4BAAC4C,eAAe,CAACQ,KAAD,CAAhB,uFAAC,wBAAwBxB,KAAzB,4DAAC,wBAA+B3B,KAAhC,6BAAuC2C,eAAe,CAACQ,KAAD,CAAtD,uFAAuC,wBAAwBxB,KAA/D,4DAAuC,wBAA+B1B,OAAtE,CAA3I,EAA2N;AAAA;;AAAE;AAClOgC,UAAAA,YAAY,8BAAGU,eAAe,CAACQ,KAAD,CAAlB,uFAAG,wBAAwBxB,KAA3B,4DAAG,wBAA+B3B,KAA9C;AACAoC,UAAAA,cAAc,8BAAGO,eAAe,CAACQ,KAAD,CAAlB,uFAAG,wBAAwBxB,KAA3B,4DAAG,wBAA+B1B,OAAhD;AACAiC,UAAAA,YAAY,8BAAGS,eAAe,CAACQ,KAAD,CAAlB,uFAAG,wBAAwB7B,IAA3B,4DAAG,wBAA8BtB,KAA7C;AACAmC,UAAAA,cAAc,8BAAGQ,eAAe,CAACQ,KAAD,CAAlB,uFAAG,wBAAwB7B,IAA3B,4DAAG,wBAA8BrB,OAA/C;AACA;AACD,SANM,MAMA;AAAA,uCAEIoB,IAFJ,EAEgC0B,MAFhC;AAAA;;AAGH,gBAAMC,YAAY,4BAAGpC,KAAK,CAACK,aAAT,mFAAG,sBAAqBC,OAAxB,0DAAG,sBAA8B0B,MAA9B,CACnB,UAACC,OAAD;AAAA;;AAAA,qBAAa,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,+BAAAA,OAAO,CAAElB,KAAT,oEAAgBN,GAAhB,MAAwBA,IAArC;AAAA,aADmB,CAArB;;AAGA,gBAAI,CAAC2B,YAAY,CAACF,MAAlB,EAA0B;AACxB;AACD,aAFD,MAEO;AAAA;;AACLf,cAAAA,QAAQ,GAAGkB,IAAI,CAACC,GAAL,CAAS7B,IAAG,GAAGgB,UAAf,IAA6B,CAA7B,GAAiChB,IAAjC,GAAuC,EAAlD;AACAa,cAAAA,YAAY,sBAAGc,YAAY,CAAC,CAAD,CAAf,4EAAG,gBAAiB1B,IAApB,yDAAG,qBAAuBtB,KAAtC;AACAmC,cAAAA,cAAc,sBAAGa,YAAY,CAAC,CAAD,CAAf,4EAAG,gBAAiB1B,IAApB,yDAAG,qBAAuBrB,OAAxC;AACAgC,cAAAA,YAAY,yBAAGU,eAAe,CAAC,CAAD,CAAlB,gFAAG,mBAAoBhB,KAAvB,0DAAG,sBAA2B3B,KAA1C;AACAoC,cAAAA,cAAc,yBAAGO,eAAe,CAAC,CAAD,CAAlB,gFAAG,mBAAoBhB,KAAvB,0DAAG,sBAA2B1B,OAA5C;AACA;AACD;AAfE;;AACP;AACE,eAAK,IAAIoB,IAAG,GAAG,CAACgB,UAAU,GAAG,CAAd,IAAmB,CAA7B,EAAgCU,MAAK,GAAG,CAA7C,EAAgDA,MAAK,GAAG,CAAxD,EAA2D1B,IAAG,GAAG,CAACA,IAAG,GAAG,CAAP,IAAY,CAAlB,EAAqB0B,MAAK,EAArF,EAAyF;AAAA,+BAAhF1B,IAAgF,EAApD0B,MAAoD;;AAAA,sCAKrF;AALqF,mCAYrF;AAEH;AACF;AACF;AACF;AACF;;AACD,SAAO;AACLK,IAAAA,WAAW,EAAE3D,aAAa,CAAC;AAAEsC,MAAAA,QAAQ,EAARA,QAAF;AAAY/B,MAAAA,KAAK,EAAEiC,YAAnB;AAAiChC,MAAAA,OAAO,EAAEmC;AAA1C,KAAD,CAAb,IAA6E,KADrF;AAELiB,IAAAA,WAAW,EAAE5D,aAAa,CAAC;AAAEsC,MAAAA,QAAQ,EAARA,QAAF;AAAY/B,MAAAA,KAAK,EAAEkC,YAAnB;AAAiCjC,MAAAA,OAAO,EAAEkC;AAA1C,KAAD,CAAb,IAA6E;AAFrF,GAAP;AAID,CA7ED;;AA+EA,eAAe;AACPmB,EAAAA,gBADO,yCAC2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA9CC,cAAAA,MAA8C,QAA9CA,MAA8C;AAAlCC,cAAAA,eAAkC,SAAlCA,eAAkC,EAAjBC,aAAiB,SAAjBA,aAAiB;AAClEC,cAAAA,sBADkE,GACzC,KADyC;AAEhEC,cAAAA,cAFgE,GAE/C,EAF+C,EAGtE;;AAHsE;AAAA;AAAA,qBAK9DtD,OAAO,CAACuD,GAAR,CACJH,aAAa,CAACI,GAAd;AAAA,oFAAkB,iBAAOC,MAAP;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AACRC,0BAAAA,IADQ,GACoBD,MADpB,CACRC,IADQ,EACFC,iBADE,GACoBF,MADpB,CACFE,iBADE;AAEVC,0BAAAA,IAFU,GAEHH,MAFG,aAEHA,MAFG,uBAEHA,MAAM,CAAEI,uBAFL;;AAGhB,8BAAI,CAAAV,eAAe,SAAf,IAAAA,eAAe,WAAf,qCAAAA,eAAe,CAAEW,QAAjB,gFAA2BrB,MAA3B,IAAoC,CAAxC,EAA2C;AACzCU,4BAAAA,eAAe,CAACW,QAAhB,GAA2BX,eAA3B,aAA2BA,eAA3B,iDAA2BA,eAAe,CAAEW,QAA5C,2DAA2B,uBAA2BC,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,CAA3B;AACD;;AACOC,0BAAAA,OANQ,GAMoCb,eANpC,CAMRa,OANQ,EAMCC,KAND,GAMoCd,eANpC,CAMCc,KAND,EAMkBC,OANlB,GAMoCf,eANpC,CAMQW,QANR,EAM2BK,IAN3B,GAMoChB,eANpC,CAM2BgB,IAN3B;AAOVC,0BAAAA,SAPU,aAOKH,KAPL,cAOcC,OAPd,cAOyBC,IAPzB,cAOiCP,IAPjC,cAOyCF,IAPzC;;AAAA,+BASZvD,oBAAoB,CAACiE,SAAD,CATR;AAAA;AAAA;AAAA;;AAURC,0BAAAA,IAVQ,GAUD/E,aAAa,CAACgF,MAAM,CAACD,IAAP,CAAYlE,oBAAZ,CAAD,EAAoCiE,SAApC,CAVZ;AAWVG,0BAAAA,QAXU,GAWC,EAXD;AAYdF,0BAAAA,IAAI,CAACb,GAAL,CAAS,UAAAgB,GAAG,EAAI;AAAE,gCAAIrE,oBAAoB,CAACqE,GAAD,CAApB,IAA6BrE,oBAAoB,CAACqE,GAAD,CAApB,CAA0B/B,MAA1B,GAAmC,CAApE,EAAuE;AAAE8B,8BAAAA,QAAQ,CAACE,IAAT,CAActE,oBAAoB,CAACqE,GAAD,CAApB,CAA0B,CAA1B,CAAd;AAA6C;AAAE,2BAA1I;AACAtB,0BAAAA,MAAM,CAAC,eAAD,EAAkBqB,QAAlB,CAAN;AACAlB,0BAAAA,sBAAsB,GAAG,IAAzB;AAdc,2DAePlD,oBAAoB,CAACiE,SAAD,CAfb;;AAAA;AAAA;AAAA,iCAuBKjF,iBAAiB,CAACuF,SAAlB,CAA4BvB,eAA5B,EAA6CS,IAA7C,EAAmDF,IAAnD,CAvBL;;AAAA;AAuBViB,0BAAAA,MAvBU;;AAAA,gCAwBZA,MAAM,CAAClC,MAAP,KAAkB,CAxBN;AAAA;AAAA;AAAA;;AAAA,6EA0BTgB,MA1BS;;AAAA;AA8BVmB,0BAAAA,WA9BU,GA8BID,MAAM,CAACpC,MAAP,CAAc,UAAChC,KAAD;AAAA,mCAAWd,cAAc,CAACc,KAAK,CAACqD,IAAP,EAAaF,IAAb,CAAzB;AAAA,2BAAd,CA9BJ;;AAAA,gCA+BZkB,WAAW,CAACnC,MAAZ,KAAuB,CA/BX;AAAA;AAAA;AAAA;;AAAA,6EAiCTgB,MAjCS;;AAAA;AAqCVoB,0BAAAA,iBArCU,GAqCUD,WAAW,CAACrC,MAAZ,CACxB;AAAA,gCAAoBuC,cAApB,SAAGC,eAAH;AAAA,mCACE,CAACD,cAAD,GAAkB,IAAlB,GAAyBA,cAAc,KAAK,aAD9C;AAAA,2BADwB,CArCV;;AAAA,gCAyCZD,iBAAiB,CAACpC,MAAlB,KAA6B,CAzCjB;AAAA;AAAA;AAAA;;AAAA,6EA2CTgB,MA3CS;;AAAA;AA+ChBtD,0BAAAA,oBAAoB,CAACiE,SAAD,CAApB,GAAkC,EAAlC;AAEStB,0BAAAA,KAjDO,GAiDC,CAjDD;;AAAA;AAAA,gCAiDIA,KAAK,GAAG+B,iBAAiB,CAACpC,MAjD9B;AAAA;AAAA;AAAA;;AAkDRuC,0BAAAA,MAlDQ,GAkDCH,iBAAiB,CAAC/B,KAAD,CAlDlB;AAoDImC,0BAAAA,OApDJ,GAoDgBD,MApDhB,CAoDNE,QApDM;AAAA;AAAA,iCAsDM/F,iBAAiB,CAACgG,UAAlB,CAA6BF,OAA7B,CAtDN;;AAAA;AAsDR1E,0BAAAA,KAtDQ;AAAA;AAAA,iCAwDSpB,iBAAiB,CAACiG,WAAlB,WACpBpB,OADoB,eACRG,IADQ,eACCF,KADD,cACUC,OADV,GAEvB3D,KAAK,CAAC8E,iBAFiB,CAxDT;;AAAA;AAwDRC,0BAAAA,QAxDQ;;AAAA,8BA6DTjG,qBAAqB,CAACiG,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEA,QAAX,EAAqB3B,iBAArB,CA7DZ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAgEZxD,0BAAAA,oBAAoB,CAACiE,SAAD,CAApB,CAAgCK,IAAhC,+CACKhB,MADL,GAEK6B,QAFL;AAGEC,4BAAAA,oBAAoB,EAAEhF,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEiF,sBAH/B;AAIEC,4BAAAA,gBAAgB,EAAElF,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAE8E,iBAJ3B;AAKExD,4BAAAA,YAAY,EAAE;AACZ6D,8BAAAA,MAAM,EAAEnF,KAAF,aAAEA,KAAF,gDAAEA,KAAK,CAAEK,aAAT,0DAAE,sBAAsB8E,MAAtB,EADI;AAEZC,8BAAAA,YAAY,EAAEpF,KAAF,aAAEA,KAAF,gDAAEA,KAAK,CAAEK,aAAT,0DAAE,sBAAsB+E,YAFxB;AAGZ9E,8BAAAA,OAAO,EAAEN,KAAF,aAAEA,KAAF,iDAAEA,KAAK,CAAEK,aAAT,2DAAE,uBAAsBC,OAHnB;AAIZF,8BAAAA,WAAW,EAAEL,cAAc,CAACC,KAAD,CAJf;AAKZqF,8BAAAA,gBAAgB,EAAEjE,qBAAqB,CAACpB,KAAD,CAArB,CAA6BwC,WALnC;AAMZ8C,8BAAAA,gBAAgB,EAAElE,qBAAqB,CAACpB,KAAD,CAArB,CAA6ByC;AANnC;AALhB;AAcAM,0BAAAA,cAAc,CAACmB,IAAf,+CACKhB,MADL,GAEK6B,QAFL;AAGEC,4BAAAA,oBAAoB,EAAEhF,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEiF,sBAH/B;AAIEC,4BAAAA,gBAAgB,EAAElF,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAE8E,iBAJ3B;AAKExD,4BAAAA,YAAY,EAAE;AACZ6D,8BAAAA,MAAM,EAAEnF,KAAF,aAAEA,KAAF,iDAAEA,KAAK,CAAEK,aAAT,2DAAE,uBAAsB8E,MAAtB,EADI;AAEZC,8BAAAA,YAAY,EAAEpF,KAAF,aAAEA,KAAF,iDAAEA,KAAK,CAAEK,aAAT,2DAAE,uBAAsB+E,YAFxB;AAGZ9E,8BAAAA,OAAO,EAAEN,KAAF,aAAEA,KAAF,iDAAEA,KAAK,CAAEK,aAAT,2DAAE,uBAAsBC,OAHnB;AAIZF,8BAAAA,WAAW,EAAEL,cAAc,CAACC,KAAD,CAJf;AAKZqF,8BAAAA,gBAAgB,EAAEjE,qBAAqB,CAACpB,KAAD,CAArB,CAA6BwC,WALnC;AAMZ8C,8BAAAA,gBAAgB,EAAElE,qBAAqB,CAACpB,KAAD,CAArB,CAA6ByC;AANnC;AALhB;AA9EY;;AAAA;AAiDsCF,0BAAAA,KAAK,EAjD3C;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAlB;;AAAA;AAAA;AAAA;AAAA,kBADI,CAL8D;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAwGpEgD,cAAAA,OAAO,CAACC,KAAR,CAAc,6BAAd,EAA6C;AAAEA,gBAAAA,KAAK;AAAP,eAA7C;;AAxGoE;AA2GtE,kBAAI,CAAC1C,sBAAL,EAA6B;AAC3BH,gBAAAA,MAAM,CAAC,eAAD,EAAkBI,cAAlB,CAAN;AACD,eA7GqE,CA8GtE;;;AA9GsE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+GvE,GAhHY;AAiHP0C,EAAAA,mBAjHO,6CAiHwD;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAxC9C,cAAAA,MAAwC,SAAxCA,MAAwC;AAA5B+C,cAAAA,OAA4B,SAA5BA,OAA4B,EAAnB9C,eAAmB,SAAnBA,eAAmB;AACnED,cAAAA,MAAM,CAAC,YAAD,EAAe,IAAf,CAAN;AACQQ,cAAAA,IAF2D,GAE/BuC,OAF+B,CAE3DvC,IAF2D,EAErDC,iBAFqD,GAE/BsC,OAF+B,CAErDtC,iBAFqD;AAG7DC,cAAAA,IAH6D,GAGtDqC,OAHsD,aAGtDA,OAHsD,uBAGtDA,OAAO,CAAEpC,uBAH6C;AAI3DG,cAAAA,OAJ2D,GAIfb,eAJe,CAI3Da,OAJ2D,EAIlDC,KAJkD,GAIfd,eAJe,CAIlDc,KAJkD,EAIjCC,OAJiC,GAIff,eAJe,CAI3CW,QAJ2C,EAIxBK,IAJwB,GAIfhB,eAJe,CAIxBgB,IAJwB,EAKnE;;AALmE;AAAA;AAAA,qBAY5ChF,iBAAiB,CAACuF,SAAlB,CAA4BvB,eAA5B,EAA6CS,IAA7C,EAAmDF,IAAnD,CAZ4C;;AAAA;AAY3DiB,cAAAA,MAZ2D;AAc7DuB,cAAAA,OAd6D,GAcnDvB,MAAM,CACjBpC,MADW,CAEV;AAAA,oBAAoBuC,cAApB,SAAGC,eAAH;AAAA,uBACE,CAACD,cAAD,GAAkB,IAAlB,GAAyBA,cAAc,KAAK,aAD9C;AAAA,eAFU,CAdmD,EAmBjE;;AACA,kBAAIoB,OAAO,CAACzD,MAAR,GAAiB,EAArB,EAAyB;AACvByD,gBAAAA,OAAO,GAAGA,OAAO,CAACzE,KAAR,CAAc,CAAd,EAAiB,EAAjB,CAAV;AACD;;AAEK0E,cAAAA,QAxB2D,GAwBhD,EAxBgD;AAAA;AAAA;AAAA;AAAA,yCAyBtCD,OAzBsC;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAyBhDlB,cAAAA,MAzBgD;AA0B7CC,cAAAA,OA1B6C,GA0BjCD,MA1BiC,CA0BvDE,QA1BuD;AA4B3D3E,cAAAA,KA5B2D,GA4BnDH,wBAAwB,CAAC6E,OAAD,CA5B2B;AA6B3DK,cAAAA,QA7B2D,GA6BhDjF,yBAAyB,CAAC4E,OAAD,CA7BuB;;AAAA,oBA+B3D,CAAC1E,KAAD,IAAU,CAAC+E,QA/BgD;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAgCvDxF,KAAK,CAAC,GAAD,CAhCkD;;AAAA;AAAA;AAAA,qBAiC/CX,iBAAiB,CAACgG,UAAlB,CAA6BF,OAA7B,CAjC+C;;AAAA;AAiC7D1E,cAAAA,KAjC6D;AAkC7DH,cAAAA,wBAAwB,CAAC6E,OAAD,CAAxB,GAAoC1E,KAApC;AAlC6D;AAAA,qBAoCvDT,KAAK,CAAC,GAAD,CApCkD;;AAAA;AAAA;AAAA,qBAqC5CX,iBAAiB,CAACiG,WAAlB,WACZpB,OADY,eACAG,IADA,eACSF,KADT,cACkBC,OADlB,GAEf3D,KAAK,CAAC8E,iBAFS,CArC4C;;AAAA;AAqC7DC,cAAAA,QArC6D;AA0C7DjF,cAAAA,yBAAyB,CAAC4E,OAAD,CAAzB,GAAqCK,QAArC;;AA1C6D;AA6C/D,kBAAIjG,qBAAqB,CAACiG,QAAQ,CAACA,QAAV,EAAoB3B,iBAApB,CAArB,IAA+DlE,cAAc,CAACc,KAAK,CAACqD,IAAP,EAAaF,IAAb,CAAjF,EAAqG;AACnGyC,gBAAAA,QAAQ,CAAC1B,IAAT,+CACKwB,OADL,GAEKX,QAFL;AAGE1B,kBAAAA,IAAI,EAAErD,KAAK,CAACqD,IAHd;AAIE2B,kBAAAA,oBAAoB,YAAEhF,KAAF,2CAAE,OAAOiF,sBAJ/B;AAKEC,kBAAAA,gBAAgB,aAAElF,KAAF,4CAAE,QAAO8E,iBAL3B;AAMEe,kBAAAA,IAAI,EAAEpB,MAAM,CAACoB,IANf;AAOEvE,kBAAAA,YAAY,EAAE;AACZ6D,oBAAAA,MAAM,aAAEnF,KAAF,qEAAE,QAAOK,aAAT,0DAAE,sBAAsB8E,MAAtB,EADI;AAEZ/E,oBAAAA,WAAW,EAAEL,cAAc,CAACC,KAAD,CAFf;AAGZoF,oBAAAA,YAAY,aAAEpF,KAAF,qEAAE,QAAOK,aAAT,0DAAE,sBAAsB+E,YAHxB;AAIZ9E,oBAAAA,OAAO,aAAEN,KAAF,qEAAE,QAAOK,aAAT,0DAAE,sBAAsBC,OAJnB;AAKZ+E,oBAAAA,gBAAgB,EAAEjE,qBAAqB,CAACpB,KAAD,CAArB,CAA6BwC,WALnC;AAMZ8C,oBAAAA,gBAAgB,EAAElE,qBAAqB,CAACpB,KAAD,CAArB,CAA6ByC;AANnC;AAPhB;AAgBD;;AA9D8D;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAiEjEmD,cAAAA,QAAQ,CAACE,IAAT,CACE,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAU,CAACD,CAAC,CAAChB,QAAF,CAAWkB,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAD,GAA4B,CAACD,CAAC,CAACjB,QAAF,CAAWkB,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAvC;AAAA,eADF,EAEE/E,KAFF,CAEQ,CAFR,EAEW,CAFX,EAjEiE,CAqEjE;;AAEAyB,cAAAA,MAAM,CAAC,mBAAD,EAAsBiD,QAAtB,CAAN;AACAjD,cAAAA,MAAM,CAAC,YAAD,EAAe,KAAf,CAAN;AAxEiE;AAAA;;AAAA;AAAA;AAAA;AA0EjE4C,cAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd,EAAiD;AAAEA,gBAAAA,KAAK;AAAP,eAAjD,EA1EiE,CA2EjE;;AA3EiE;AAAA,qBA4E3DjG,KAAK,CAAC,IAAD,CA5EsD;;AAAA;AA6EjEN,cAAAA,KAAK,CAACiH,QAAN,CAAe,6BAAf,EAA8C;AAC5CR,gBAAAA,OAAO,EAAEA,OADmC;AAE5C9C,gBAAAA,eAAe,EAAEA;AAF2B,eAA9C;;AA7EiE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkFpE;AAnMY,CAAf","sourcesContent":["import googleMapsService from '@/common/googleMaps.service'\nimport { toRegularTime, isStoreWithinDistance, getLookupKeys, dayOfWeekAsString } from '@/utils'\nimport store from '@/store'\nimport { validStoreName } from '@/controllers/ReturnMethodsController.js'\n\n// in HHMM format\nconst formattedTime = (hours, minutes) => {\n  return parseInt(`${hours}${minutes < 10 ? '0' + minutes : minutes}`)\n}\n\nconst sleep = (milliseconds) => {\n  return new Promise(resolve => setTimeout(resolve, milliseconds))\n}\nconst GOOGLE_MAP_API_CACHE = {}\nconst GOOGLE_MAP_API_PID_CACHE = {}\nconst GOOGLE_MAP_API_DIST_CACHE = {}\n\nconst getWeeklyRange = (place) => {\n  const formattedWeeklyRange = { dateRange: '', timeRange: '' }\n\n  const weeklyRange = place?.opening_hours?.periods?.reduce((acc, day) => {\n    // if earliest found open day, set as start\n    if (day?.open?.day <= acc?.dateRange?.start) {\n      acc.dateRange.start = day.open.day\n    }\n    // if latest found open day, set as end\n    if (day?.open?.day >= acc?.dateRange?.end) {\n      acc.dateRange.end = day.open.day\n    }\n    // check if current day open is later than stored\n    if (day?.open?.hours >= acc?.timeRange?.startHour) {\n      if (day?.open?.minutes >= acc?.timeRange?.startMinute) {\n        acc.timeRange.startMinute = day.open.minutes\n      }\n      acc.timeRange.startHour = day.open.hours\n    }\n    // check if current day close is earlier than stored\n    if (day?.close?.hours <= acc?.timeRange?.endHour || !acc?.timeRange?.endHour) {\n      if (day?.close?.minutes <= acc?.timeRange?.endMinute || !acc?.timeRange?.endMinute) {\n        acc.timeRange.endMinute = day.open.minutes\n      }\n      acc.timeRange.endHour = day.close.hours\n    }\n    return acc\n  }, { dateRange: { start: '', end: '' }, timeRange: { startHour: '', startMinute: '', endHour: '', endMinute: '' } })\n\n  // reformat for human-readable\n  formattedWeeklyRange.dateRange = `${dayOfWeekAsString([weeklyRange?.dateRange?.start === 0 ? 1 : weeklyRange?.dateRange?.start]).slice(0, 3)} - ${dayOfWeekAsString([weeklyRange?.dateRange?.end]).slice(0, 3)}`\n\n  formattedWeeklyRange.timeRange = `${toRegularTime({ dayIndex: '', hours: weeklyRange?.timeRange?.startHour, minutes: weeklyRange?.timeRange?.startMinute })}\n  - ${toRegularTime({ hours: weeklyRange?.timeRange?.endHour, minutes: weeklyRange?.timeRange?.endMinute || 0 })}`\n\n  return formattedWeeklyRange\n}\n\nconst getFormattedStoreTime = (place) => {\n  let closingHours = null\n  let openingHours = null\n  let openingMinutes = null\n  let closingMinutes = null\n  let dayIndex = ''\n\n  const currentDay = new Date().getDay()\n  const currentTime = formattedTime(new Date().getHours(), new Date().getMinutes())\n  const todaysPeriodArr = place.opening_hours?.periods?.filter(\n    (reqdDay) => reqdDay?.close?.day === currentDay\n  )\n  // todaysPeriod array can be of any length\n\n  if (todaysPeriodArr) {\n    if (!todaysPeriodArr.length) { // holiday\n      for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n        const dayPeriodArr = place.opening_hours?.periods?.filter(\n          (reqdDay) => reqdDay?.close?.day === day\n        )\n        if (!dayPeriodArr.length) {\n          continue\n        } else {\n          dayIndex = Math.abs(day - currentDay) > 1 ? day : '' // show day of the week only when its not the next day\n          openingHours = dayPeriodArr[0]?.open?.hours\n          openingMinutes = dayPeriodArr[0]?.open?.minutes\n          break\n        }\n      }\n    } else if (todaysPeriodArr.length === 1) {\n    // only one closing and opening time for a day\n      closingHours = todaysPeriodArr[0]?.close?.hours\n      closingMinutes = todaysPeriodArr[0]?.close?.minutes\n      openingHours = todaysPeriodArr[0]?.open?.hours\n      openingMinutes = todaysPeriodArr[0]?.open?.minutes\n    } else {\n    // store open in breaks in a day\n      for (let index = 0; index < todaysPeriodArr.length; index++) {\n        if (currentTime < formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes\n        ) // closed: before store opening\n        ) {\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          break\n        } else if (currentTime >= formattedTime(todaysPeriodArr[index]?.open?.hours, todaysPeriodArr[index]?.open?.minutes) && currentTime < formattedTime(todaysPeriodArr[index]?.close?.hours, todaysPeriodArr[index]?.close?.minutes)) { // store is open\n          closingHours = todaysPeriodArr[index]?.close?.hours\n          closingMinutes = todaysPeriodArr[index]?.close?.minutes\n          openingHours = todaysPeriodArr[index]?.open?.hours\n          openingMinutes = todaysPeriodArr[index]?.open?.minutes\n          break\n        } else {\n        // closed: after store closing. We need next active day's openingHours\n          for (let day = (currentDay + 1) % 7, count = 0; count < 6; day = (day + 1) % 7, count++) {\n            const dayPeriodArr = place.opening_hours?.periods?.filter(\n              (reqdDay) => reqdDay?.close?.day === day\n            )\n            if (!dayPeriodArr.length) {\n              continue\n            } else {\n              dayIndex = Math.abs(day - currentDay) > 1 ? day : ''\n              openingHours = dayPeriodArr[0]?.open?.hours\n              openingMinutes = dayPeriodArr[0]?.open?.minutes\n              closingHours = todaysPeriodArr[0]?.close?.hours\n              closingMinutes = todaysPeriodArr[0]?.close?.minutes\n              break\n            }\n          }\n        }\n      }\n    }\n  }\n  return {\n    closingTime: toRegularTime({ dayIndex, hours: closingHours, minutes: closingMinutes }) || 'N/A',\n    openingTime: toRegularTime({ dayIndex, hours: openingHours, minutes: openingMinutes }) || 'N/A'\n  }\n}\n\nexport default {\n  async fetchAddressInfo ({ commit }, { shippingAddress, returnMethods }) {\n    var isReturnMethodCommited = false\n    const updatedMethods = []\n    // commit('setLoading', true)\n    try {\n      await Promise.all(\n        returnMethods.map(async (method) => {\n          const { type, distanceThreshold } = method\n          const name = method?.customer_facing_carrier\n          if (shippingAddress?.zip_code?.length > 5) {\n            shippingAddress.zip_code = shippingAddress?.zip_code?.substring(0, 5)\n          }\n          const { street1, state, zip_code: zipCode, city } = shippingAddress\n          const lookupKey = `${state}_${zipCode}_${city}_${name}_${type}_info`\n\n          if (GOOGLE_MAP_API_CACHE[lookupKey]) {\n            const keys = getLookupKeys(Object.keys(GOOGLE_MAP_API_CACHE), lookupKey)\n            var rMethods = []\n            keys.map(key => { if (GOOGLE_MAP_API_CACHE[key] && GOOGLE_MAP_API_CACHE[key].length > 0) { rMethods.push(GOOGLE_MAP_API_CACHE[key][0]) } })\n            commit('updateMethods', rMethods)\n            isReturnMethodCommited = true\n            return GOOGLE_MAP_API_CACHE[lookupKey]\n          }\n\n          // STEP 1: Get places for the specified zipcode, city and state\n          // STEP 2: Ensure the place name has specified names (storeNames) as mentioned in the policy\n          // STEP 3: Filter only OPERATIONAL stores. PERMANENTLY_CLOSED stores are eliminated\n          // STEP 4: Pick up the first operational, valid store (To be changed)\n\n          const places = await googleMapsService.getPlaces(shippingAddress, name, type)\n          if (places.length === 0) {\n            return {\n              ...method\n            }\n          }\n\n          const validPlaces = places.filter((place) => validStoreName(place.name, type))\n          if (validPlaces.length === 0) {\n            return {\n              ...method\n            }\n          }\n\n          const operationalStores = validPlaces.filter(\n            ({ business_status: businessStatus }) =>\n              !businessStatus ? true : businessStatus === 'OPERATIONAL'\n          )\n          if (operationalStores.length === 0) {\n            return {\n              ...method\n            }\n          }\n\n          GOOGLE_MAP_API_CACHE[lookupKey] = []\n\n          for (let index = 0; index < operationalStores.length; index++) {\n            const result = operationalStores[index]\n\n            const { place_id: placeId } = result\n\n            const place = await googleMapsService.getDetails(placeId)\n\n            const distance = await googleMapsService.getDistance(\n            `${street1}, ${city}, ${state} ${zipCode}`,\n            place.formatted_address\n            )\n\n            if (!isStoreWithinDistance(distance?.distance, distanceThreshold)) {\n              continue\n            } else {\n              GOOGLE_MAP_API_CACHE[lookupKey].push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  weeklyRange: getWeeklyRange(place),\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              updatedMethods.push({\n                ...method,\n                ...distance,\n                formattedPhoneNumber: place?.formatted_phone_number,\n                formattedAddress: place?.formatted_address,\n                openingHours: {\n                  isOpen: place?.opening_hours?.isOpen(),\n                  weekday_text: place?.opening_hours?.weekday_text,\n                  periods: place?.opening_hours?.periods,\n                  weeklyRange: getWeeklyRange(place),\n                  todayClosingTime: getFormattedStoreTime(place).closingTime,\n                  todayOpeningTime: getFormattedStoreTime(place).openingTime\n                }\n              })\n              break\n            }\n          }\n        })\n      )\n    } catch (error) {\n      console.error('Error fetching address Info', { error })\n    }\n\n    if (!isReturnMethodCommited) {\n      commit('updateMethods', updatedMethods)\n    }\n    // commit('setLoading', false)\n  },\n  async fetchNearbyCarriers ({ commit }, { carrier, shippingAddress }) {\n    commit('setLoading', true)\n    const { type, distanceThreshold } = carrier\n    const name = carrier?.customer_facing_carrier\n    const { street1, state, zip_code: zipCode, city } = shippingAddress\n    // const lookupKey = `${state}_${zipCode}_${city}_${name}_${type}_nearby`\n    try {\n      // if (GOOGLE_MAP_API_CACHE[lookupKey]) {\n      //   commit('setNearbyCarriers', GOOGLE_MAP_API_CACHE[lookupKey])\n      //   commit('setLoading', false)\n      //   return\n      // }\n      const places = await googleMapsService.getPlaces(shippingAddress, name, type)\n\n      let results = places\n        .filter(\n          ({ business_status: businessStatus }) =>\n            !businessStatus ? true : businessStatus === 'OPERATIONAL'\n        )\n      // Only calculate distance for a max of ten results\n      if (results.length > 10) {\n        results = results.slice(0, 10)\n      }\n\n      const carriers = []\n      for await (const result of results) {\n        const { place_id: placeId } = result\n\n        var place = GOOGLE_MAP_API_PID_CACHE[placeId]\n        var distance = GOOGLE_MAP_API_DIST_CACHE[placeId]\n\n        if (!place || !distance) {\n          await sleep(200)\n          place = await googleMapsService.getDetails(placeId)\n          GOOGLE_MAP_API_PID_CACHE[placeId] = place\n\n          await sleep(200)\n          distance = await googleMapsService.getDistance(\n            `${street1}, ${city}, ${state} ${zipCode}`,\n            place.formatted_address\n          )\n\n          GOOGLE_MAP_API_DIST_CACHE[placeId] = distance\n        }\n\n        if (isStoreWithinDistance(distance.distance, distanceThreshold) && validStoreName(place.name, type)) {\n          carriers.push({\n            ...carrier,\n            ...distance,\n            name: place.name,\n            formattedPhoneNumber: place?.formatted_phone_number,\n            formattedAddress: place?.formatted_address,\n            icon: result.icon,\n            openingHours: {\n              isOpen: place?.opening_hours?.isOpen(),\n              weeklyRange: getWeeklyRange(place),\n              weekday_text: place?.opening_hours?.weekday_text,\n              periods: place?.opening_hours?.periods,\n              todayClosingTime: getFormattedStoreTime(place).closingTime,\n              todayOpeningTime: getFormattedStoreTime(place).openingTime\n            }\n          })\n        }\n      }\n\n      carriers.sort(\n        (a, b) => +a.distance.split(' ')[0] - +b.distance.split(' ')[0]\n      ).slice(0, 3)\n\n      // GOOGLE_MAP_API_CACHE[lookupKey] = carriers\n\n      commit('setNearbyCarriers', carriers)\n      commit('setLoading', false)\n    } catch (error) {\n      console.error('Error fetching nearby locations', { error })\n      // delete GOOGLE_MAP_API_CACHE[lookupKey]\n      await sleep(5000)\n      store.dispatch('returns/fetchNearbyCarriers', {\n        carrier: carrier,\n        shippingAddress: shippingAddress\n      })\n    }\n  }\n}\n"]}]}